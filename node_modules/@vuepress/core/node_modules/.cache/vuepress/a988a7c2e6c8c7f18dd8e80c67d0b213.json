{"remainingRequest":"/Users/mengyu/vuepress-starter/vuepress-starter/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/mengyu/vuepress-starter/vuepress-starter/node_modules/valine/dist/Valine.min.js","dependencies":[{"path":"/Users/mengyu/vuepress-starter/vuepress-starter/node_modules/valine/dist/Valine.min.js","mtime":1661659639223},{"path":"/Users/mengyu/vuepress-starter/vuepress-starter/node_modules/cache-loader/dist/cjs.js","mtime":1661658709451},{"path":"/Users/mengyu/vuepress-starter/vuepress-starter/node_modules/babel-loader/lib/index.js","mtime":1661658709446}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuYXQuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zZXQuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lc25leHQudHlwZWQtYXJyYXkuZmluZC1sYXN0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXNuZXh0LnR5cGVkLWFycmF5LmZpbmQtbGFzdC1pbmRleC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFnZ3JlZ2F0ZS1lcnJvci5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFnZ3JlZ2F0ZS1lcnJvci5jYXVzZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZmxlY3QudG8tc3RyaW5nLXRhZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmF0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmF0LWFsdGVybmF0aXZlLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1leGNlcHRpb24uc3RhY2suanMiKTsKCi8qIQogKiBWYWxpbmUgdjEuNS4xCiAqIChjKSAyMDE3LTIwMjIgeENzcwogKiBSZWxlYXNlZCB1bmRlciB0aGUgR1BMLTIuMCBMaWNlbnNlLgogKiBMYXN0IFVwZGF0ZTogMjAyMi03LTIxIDM6NDM6NTkg4pScRjEwOiBQTeKUpAogKi8KIWZ1bmN0aW9uIChlLCB0KSB7CiAgIm9iamVjdCIgPT0gdHlwZW9mIGV4cG9ydHMgJiYgIm9iamVjdCIgPT0gdHlwZW9mIG1vZHVsZSA/IG1vZHVsZS5leHBvcnRzID0gdCgpIDogImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoW10sIHQpIDogIm9iamVjdCIgPT0gdHlwZW9mIGV4cG9ydHMgPyBleHBvcnRzLlZhbGluZSA9IHQoKSA6IGUuVmFsaW5lID0gdCgpOwp9KHRoaXMsIGZ1bmN0aW9uICgpIHsKICByZXR1cm4gZnVuY3Rpb24gKGUpIHsKICAgIGZ1bmN0aW9uIHQocikgewogICAgICBpZiAobltyXSkgcmV0dXJuIG5bcl0uZXhwb3J0czsKICAgICAgdmFyIGkgPSBuW3JdID0gewogICAgICAgIGk6IHIsCiAgICAgICAgbDogITEsCiAgICAgICAgZXhwb3J0czoge30KICAgICAgfTsKICAgICAgcmV0dXJuIGVbcl0uY2FsbChpLmV4cG9ydHMsIGksIGkuZXhwb3J0cywgdCksIGkubCA9ICEwLCBpLmV4cG9ydHM7CiAgICB9CgogICAgdmFyIG4gPSB7fTsKICAgIHJldHVybiB0Lm0gPSBlLCB0LmMgPSBuLCB0LmkgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZTsKICAgIH0sIHQuZCA9IGZ1bmN0aW9uIChlLCBuLCByKSB7CiAgICAgIHQubyhlLCBuKSB8fCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgbiwgewogICAgICAgIGNvbmZpZ3VyYWJsZTogITEsCiAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgZ2V0OiByCiAgICAgIH0pOwogICAgfSwgdC5uID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIG4gPSBlICYmIGUuX19lc01vZHVsZSA/IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gZS5kZWZhdWx0OwogICAgICB9IDogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBlOwogICAgICB9OwogICAgICByZXR1cm4gdC5kKG4sICJhIiwgbiksIG47CiAgICB9LCB0Lm8gPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIHQpOwogICAgfSwgdC5wID0gIiIsIHQodC5zID0gMTA4KTsKICB9KFtmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gU3ludGF4RXJyb3IsCiAgICAgICAgaSA9IEZ1bmN0aW9uLAogICAgICAgIG8gPSBUeXBlRXJyb3IsCiAgICAgICAgYSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIGkoJyJ1c2Ugc3RyaWN0IjsgcmV0dXJuICgnICsgZSArICIpLmNvbnN0cnVjdG9yOyIpKCk7CiAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICB9LAogICAgICAgIHUgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwoKICAgIGlmICh1KSB0cnkgewogICAgICB1KHt9LCAiIik7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHUgPSBudWxsOwogICAgfQoKICAgIHZhciBzID0gZnVuY3Rpb24gKCkgewogICAgICB0aHJvdyBuZXcgbygpOwogICAgfSwKICAgICAgICBsID0gdSA/IGZ1bmN0aW9uICgpIHsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gYXJndW1lbnRzLmNhbGxlZSwgczsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gdShhcmd1bWVudHMsICJjYWxsZWUiKS5nZXQ7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgcmV0dXJuIHM7CiAgICAgICAgfQogICAgICB9CiAgICB9KCkgOiBzLAogICAgICAgIGMgPSBuKDIyKSgpLAogICAgICAgIGYgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUuX19wcm90b19fOwogICAgfSwKICAgICAgICBwID0ge30sCiAgICAgICAgZCA9ICJ1bmRlZmluZWQiID09IHR5cGVvZiBVaW50OEFycmF5ID8gdm9pZCAwIDogZihVaW50OEFycmF5KSwKICAgICAgICBoID0gewogICAgICAiJUFnZ3JlZ2F0ZUVycm9yJSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBBZ2dyZWdhdGVFcnJvciA/IHZvaWQgMCA6IEFnZ3JlZ2F0ZUVycm9yLAogICAgICAiJUFycmF5JSI6IEFycmF5LAogICAgICAiJUFycmF5QnVmZmVyJSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBBcnJheUJ1ZmZlciA/IHZvaWQgMCA6IEFycmF5QnVmZmVyLAogICAgICAiJUFycmF5SXRlcmF0b3JQcm90b3R5cGUlIjogYyA/IGYoW11bU3ltYm9sLml0ZXJhdG9yXSgpKSA6IHZvaWQgMCwKICAgICAgIiVBc3luY0Zyb21TeW5jSXRlcmF0b3JQcm90b3R5cGUlIjogdm9pZCAwLAogICAgICAiJUFzeW5jRnVuY3Rpb24lIjogcCwKICAgICAgIiVBc3luY0dlbmVyYXRvciUiOiBwLAogICAgICAiJUFzeW5jR2VuZXJhdG9yRnVuY3Rpb24lIjogcCwKICAgICAgIiVBc3luY0l0ZXJhdG9yUHJvdG90eXBlJSI6IHAsCiAgICAgICIlQXRvbWljcyUiOiAidW5kZWZpbmVkIiA9PSB0eXBlb2YgQXRvbWljcyA/IHZvaWQgMCA6IEF0b21pY3MsCiAgICAgICIlQmlnSW50JSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBCaWdJbnQgPyB2b2lkIDAgOiBCaWdJbnQsCiAgICAgICIlQm9vbGVhbiUiOiBCb29sZWFuLAogICAgICAiJURhdGFWaWV3JSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBEYXRhVmlldyA/IHZvaWQgMCA6IERhdGFWaWV3LAogICAgICAiJURhdGUlIjogRGF0ZSwKICAgICAgIiVkZWNvZGVVUkklIjogZGVjb2RlVVJJLAogICAgICAiJWRlY29kZVVSSUNvbXBvbmVudCUiOiBkZWNvZGVVUklDb21wb25lbnQsCiAgICAgICIlZW5jb2RlVVJJJSI6IGVuY29kZVVSSSwKICAgICAgIiVlbmNvZGVVUklDb21wb25lbnQlIjogZW5jb2RlVVJJQ29tcG9uZW50LAogICAgICAiJUVycm9yJSI6IEVycm9yLAogICAgICAiJWV2YWwlIjogZXZhbCwKICAgICAgIiVFdmFsRXJyb3IlIjogRXZhbEVycm9yLAogICAgICAiJUZsb2F0MzJBcnJheSUiOiAidW5kZWZpbmVkIiA9PSB0eXBlb2YgRmxvYXQzMkFycmF5ID8gdm9pZCAwIDogRmxvYXQzMkFycmF5LAogICAgICAiJUZsb2F0NjRBcnJheSUiOiAidW5kZWZpbmVkIiA9PSB0eXBlb2YgRmxvYXQ2NEFycmF5ID8gdm9pZCAwIDogRmxvYXQ2NEFycmF5LAogICAgICAiJUZpbmFsaXphdGlvblJlZ2lzdHJ5JSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBGaW5hbGl6YXRpb25SZWdpc3RyeSA/IHZvaWQgMCA6IEZpbmFsaXphdGlvblJlZ2lzdHJ5LAogICAgICAiJUZ1bmN0aW9uJSI6IGksCiAgICAgICIlR2VuZXJhdG9yRnVuY3Rpb24lIjogcCwKICAgICAgIiVJbnQ4QXJyYXklIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIEludDhBcnJheSA/IHZvaWQgMCA6IEludDhBcnJheSwKICAgICAgIiVJbnQxNkFycmF5JSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBJbnQxNkFycmF5ID8gdm9pZCAwIDogSW50MTZBcnJheSwKICAgICAgIiVJbnQzMkFycmF5JSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBJbnQzMkFycmF5ID8gdm9pZCAwIDogSW50MzJBcnJheSwKICAgICAgIiVpc0Zpbml0ZSUiOiBpc0Zpbml0ZSwKICAgICAgIiVpc05hTiUiOiBpc05hTiwKICAgICAgIiVJdGVyYXRvclByb3RvdHlwZSUiOiBjID8gZihmKFtdW1N5bWJvbC5pdGVyYXRvcl0oKSkpIDogdm9pZCAwLAogICAgICAiJUpTT04lIjogIm9iamVjdCIgPT0gdHlwZW9mIEpTT04gPyBKU09OIDogdm9pZCAwLAogICAgICAiJU1hcCUiOiAidW5kZWZpbmVkIiA9PSB0eXBlb2YgTWFwID8gdm9pZCAwIDogTWFwLAogICAgICAiJU1hcEl0ZXJhdG9yUHJvdG90eXBlJSI6ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBNYXAgJiYgYyA/IGYobmV3IE1hcCgpW1N5bWJvbC5pdGVyYXRvcl0oKSkgOiB2b2lkIDAsCiAgICAgICIlTWF0aCUiOiBNYXRoLAogICAgICAiJU51bWJlciUiOiBOdW1iZXIsCiAgICAgICIlT2JqZWN0JSI6IE9iamVjdCwKICAgICAgIiVwYXJzZUZsb2F0JSI6IHBhcnNlRmxvYXQsCiAgICAgICIlcGFyc2VJbnQlIjogcGFyc2VJbnQsCiAgICAgICIlUHJvbWlzZSUiOiAidW5kZWZpbmVkIiA9PSB0eXBlb2YgUHJvbWlzZSA/IHZvaWQgMCA6IFByb21pc2UsCiAgICAgICIlUHJveHklIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIFByb3h5ID8gdm9pZCAwIDogUHJveHksCiAgICAgICIlUmFuZ2VFcnJvciUiOiBSYW5nZUVycm9yLAogICAgICAiJVJlZmVyZW5jZUVycm9yJSI6IFJlZmVyZW5jZUVycm9yLAogICAgICAiJVJlZmxlY3QlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIFJlZmxlY3QgPyB2b2lkIDAgOiBSZWZsZWN0LAogICAgICAiJVJlZ0V4cCUiOiBSZWdFeHAsCiAgICAgICIlU2V0JSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBTZXQgPyB2b2lkIDAgOiBTZXQsCiAgICAgICIlU2V0SXRlcmF0b3JQcm90b3R5cGUlIjogInVuZGVmaW5lZCIgIT0gdHlwZW9mIFNldCAmJiBjID8gZihuZXcgU2V0KClbU3ltYm9sLml0ZXJhdG9yXSgpKSA6IHZvaWQgMCwKICAgICAgIiVTaGFyZWRBcnJheUJ1ZmZlciUiOiAidW5kZWZpbmVkIiA9PSB0eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXIgPyB2b2lkIDAgOiBTaGFyZWRBcnJheUJ1ZmZlciwKICAgICAgIiVTdHJpbmclIjogU3RyaW5nLAogICAgICAiJVN0cmluZ0l0ZXJhdG9yUHJvdG90eXBlJSI6IGMgPyBmKCIiW1N5bWJvbC5pdGVyYXRvcl0oKSkgOiB2b2lkIDAsCiAgICAgICIlU3ltYm9sJSI6IGMgPyBTeW1ib2wgOiB2b2lkIDAsCiAgICAgICIlU3ludGF4RXJyb3IlIjogciwKICAgICAgIiVUaHJvd1R5cGVFcnJvciUiOiBsLAogICAgICAiJVR5cGVkQXJyYXklIjogZCwKICAgICAgIiVUeXBlRXJyb3IlIjogbywKICAgICAgIiVVaW50OEFycmF5JSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBVaW50OEFycmF5ID8gdm9pZCAwIDogVWludDhBcnJheSwKICAgICAgIiVVaW50OENsYW1wZWRBcnJheSUiOiAidW5kZWZpbmVkIiA9PSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgPyB2b2lkIDAgOiBVaW50OENsYW1wZWRBcnJheSwKICAgICAgIiVVaW50MTZBcnJheSUiOiAidW5kZWZpbmVkIiA9PSB0eXBlb2YgVWludDE2QXJyYXkgPyB2b2lkIDAgOiBVaW50MTZBcnJheSwKICAgICAgIiVVaW50MzJBcnJheSUiOiAidW5kZWZpbmVkIiA9PSB0eXBlb2YgVWludDMyQXJyYXkgPyB2b2lkIDAgOiBVaW50MzJBcnJheSwKICAgICAgIiVVUklFcnJvciUiOiBVUklFcnJvciwKICAgICAgIiVXZWFrTWFwJSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBXZWFrTWFwID8gdm9pZCAwIDogV2Vha01hcCwKICAgICAgIiVXZWFrUmVmJSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBXZWFrUmVmID8gdm9pZCAwIDogV2Vha1JlZiwKICAgICAgIiVXZWFrU2V0JSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBXZWFrU2V0ID8gdm9pZCAwIDogV2Vha1NldAogICAgfSwKICAgICAgICB2ID0gZnVuY3Rpb24gZSh0KSB7CiAgICAgIHZhciBuOwogICAgICBpZiAoIiVBc3luY0Z1bmN0aW9uJSIgPT09IHQpIG4gPSBhKCJhc3luYyBmdW5jdGlvbiAoKSB7fSIpO2Vsc2UgaWYgKCIlR2VuZXJhdG9yRnVuY3Rpb24lIiA9PT0gdCkgbiA9IGEoImZ1bmN0aW9uKiAoKSB7fSIpO2Vsc2UgaWYgKCIlQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiUiID09PSB0KSBuID0gYSgiYXN5bmMgZnVuY3Rpb24qICgpIHt9Iik7ZWxzZSBpZiAoIiVBc3luY0dlbmVyYXRvciUiID09PSB0KSB7CiAgICAgICAgdmFyIHIgPSBlKCIlQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiUiKTsKICAgICAgICByICYmIChuID0gci5wcm90b3R5cGUpOwogICAgICB9IGVsc2UgaWYgKCIlQXN5bmNJdGVyYXRvclByb3RvdHlwZSUiID09PSB0KSB7CiAgICAgICAgdmFyIGkgPSBlKCIlQXN5bmNHZW5lcmF0b3IlIik7CiAgICAgICAgaSAmJiAobiA9IGYoaS5wcm90b3R5cGUpKTsKICAgICAgfQogICAgICByZXR1cm4gaFt0XSA9IG4sIG47CiAgICB9LAogICAgICAgIGcgPSB7CiAgICAgICIlQXJyYXlCdWZmZXJQcm90b3R5cGUlIjogWyJBcnJheUJ1ZmZlciIsICJwcm90b3R5cGUiXSwKICAgICAgIiVBcnJheVByb3RvdHlwZSUiOiBbIkFycmF5IiwgInByb3RvdHlwZSJdLAogICAgICAiJUFycmF5UHJvdG9fZW50cmllcyUiOiBbIkFycmF5IiwgInByb3RvdHlwZSIsICJlbnRyaWVzIl0sCiAgICAgICIlQXJyYXlQcm90b19mb3JFYWNoJSI6IFsiQXJyYXkiLCAicHJvdG90eXBlIiwgImZvckVhY2giXSwKICAgICAgIiVBcnJheVByb3RvX2tleXMlIjogWyJBcnJheSIsICJwcm90b3R5cGUiLCAia2V5cyJdLAogICAgICAiJUFycmF5UHJvdG9fdmFsdWVzJSI6IFsiQXJyYXkiLCAicHJvdG90eXBlIiwgInZhbHVlcyJdLAogICAgICAiJUFzeW5jRnVuY3Rpb25Qcm90b3R5cGUlIjogWyJBc3luY0Z1bmN0aW9uIiwgInByb3RvdHlwZSJdLAogICAgICAiJUFzeW5jR2VuZXJhdG9yJSI6IFsiQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiIsICJwcm90b3R5cGUiXSwKICAgICAgIiVBc3luY0dlbmVyYXRvclByb3RvdHlwZSUiOiBbIkFzeW5jR2VuZXJhdG9yRnVuY3Rpb24iLCAicHJvdG90eXBlIiwgInByb3RvdHlwZSJdLAogICAgICAiJUJvb2xlYW5Qcm90b3R5cGUlIjogWyJCb29sZWFuIiwgInByb3RvdHlwZSJdLAogICAgICAiJURhdGFWaWV3UHJvdG90eXBlJSI6IFsiRGF0YVZpZXciLCAicHJvdG90eXBlIl0sCiAgICAgICIlRGF0ZVByb3RvdHlwZSUiOiBbIkRhdGUiLCAicHJvdG90eXBlIl0sCiAgICAgICIlRXJyb3JQcm90b3R5cGUlIjogWyJFcnJvciIsICJwcm90b3R5cGUiXSwKICAgICAgIiVFdmFsRXJyb3JQcm90b3R5cGUlIjogWyJFdmFsRXJyb3IiLCAicHJvdG90eXBlIl0sCiAgICAgICIlRmxvYXQzMkFycmF5UHJvdG90eXBlJSI6IFsiRmxvYXQzMkFycmF5IiwgInByb3RvdHlwZSJdLAogICAgICAiJUZsb2F0NjRBcnJheVByb3RvdHlwZSUiOiBbIkZsb2F0NjRBcnJheSIsICJwcm90b3R5cGUiXSwKICAgICAgIiVGdW5jdGlvblByb3RvdHlwZSUiOiBbIkZ1bmN0aW9uIiwgInByb3RvdHlwZSJdLAogICAgICAiJUdlbmVyYXRvciUiOiBbIkdlbmVyYXRvckZ1bmN0aW9uIiwgInByb3RvdHlwZSJdLAogICAgICAiJUdlbmVyYXRvclByb3RvdHlwZSUiOiBbIkdlbmVyYXRvckZ1bmN0aW9uIiwgInByb3RvdHlwZSIsICJwcm90b3R5cGUiXSwKICAgICAgIiVJbnQ4QXJyYXlQcm90b3R5cGUlIjogWyJJbnQ4QXJyYXkiLCAicHJvdG90eXBlIl0sCiAgICAgICIlSW50MTZBcnJheVByb3RvdHlwZSUiOiBbIkludDE2QXJyYXkiLCAicHJvdG90eXBlIl0sCiAgICAgICIlSW50MzJBcnJheVByb3RvdHlwZSUiOiBbIkludDMyQXJyYXkiLCAicHJvdG90eXBlIl0sCiAgICAgICIlSlNPTlBhcnNlJSI6IFsiSlNPTiIsICJwYXJzZSJdLAogICAgICAiJUpTT05TdHJpbmdpZnklIjogWyJKU09OIiwgInN0cmluZ2lmeSJdLAogICAgICAiJU1hcFByb3RvdHlwZSUiOiBbIk1hcCIsICJwcm90b3R5cGUiXSwKICAgICAgIiVOdW1iZXJQcm90b3R5cGUlIjogWyJOdW1iZXIiLCAicHJvdG90eXBlIl0sCiAgICAgICIlT2JqZWN0UHJvdG90eXBlJSI6IFsiT2JqZWN0IiwgInByb3RvdHlwZSJdLAogICAgICAiJU9ialByb3RvX3RvU3RyaW5nJSI6IFsiT2JqZWN0IiwgInByb3RvdHlwZSIsICJ0b1N0cmluZyJdLAogICAgICAiJU9ialByb3RvX3ZhbHVlT2YlIjogWyJPYmplY3QiLCAicHJvdG90eXBlIiwgInZhbHVlT2YiXSwKICAgICAgIiVQcm9taXNlUHJvdG90eXBlJSI6IFsiUHJvbWlzZSIsICJwcm90b3R5cGUiXSwKICAgICAgIiVQcm9taXNlUHJvdG9fdGhlbiUiOiBbIlByb21pc2UiLCAicHJvdG90eXBlIiwgInRoZW4iXSwKICAgICAgIiVQcm9taXNlX2FsbCUiOiBbIlByb21pc2UiLCAiYWxsIl0sCiAgICAgICIlUHJvbWlzZV9yZWplY3QlIjogWyJQcm9taXNlIiwgInJlamVjdCJdLAogICAgICAiJVByb21pc2VfcmVzb2x2ZSUiOiBbIlByb21pc2UiLCAicmVzb2x2ZSJdLAogICAgICAiJVJhbmdlRXJyb3JQcm90b3R5cGUlIjogWyJSYW5nZUVycm9yIiwgInByb3RvdHlwZSJdLAogICAgICAiJVJlZmVyZW5jZUVycm9yUHJvdG90eXBlJSI6IFsiUmVmZXJlbmNlRXJyb3IiLCAicHJvdG90eXBlIl0sCiAgICAgICIlUmVnRXhwUHJvdG90eXBlJSI6IFsiUmVnRXhwIiwgInByb3RvdHlwZSJdLAogICAgICAiJVNldFByb3RvdHlwZSUiOiBbIlNldCIsICJwcm90b3R5cGUiXSwKICAgICAgIiVTaGFyZWRBcnJheUJ1ZmZlclByb3RvdHlwZSUiOiBbIlNoYXJlZEFycmF5QnVmZmVyIiwgInByb3RvdHlwZSJdLAogICAgICAiJVN0cmluZ1Byb3RvdHlwZSUiOiBbIlN0cmluZyIsICJwcm90b3R5cGUiXSwKICAgICAgIiVTeW1ib2xQcm90b3R5cGUlIjogWyJTeW1ib2wiLCAicHJvdG90eXBlIl0sCiAgICAgICIlU3ludGF4RXJyb3JQcm90b3R5cGUlIjogWyJTeW50YXhFcnJvciIsICJwcm90b3R5cGUiXSwKICAgICAgIiVUeXBlZEFycmF5UHJvdG90eXBlJSI6IFsiVHlwZWRBcnJheSIsICJwcm90b3R5cGUiXSwKICAgICAgIiVUeXBlRXJyb3JQcm90b3R5cGUlIjogWyJUeXBlRXJyb3IiLCAicHJvdG90eXBlIl0sCiAgICAgICIlVWludDhBcnJheVByb3RvdHlwZSUiOiBbIlVpbnQ4QXJyYXkiLCAicHJvdG90eXBlIl0sCiAgICAgICIlVWludDhDbGFtcGVkQXJyYXlQcm90b3R5cGUlIjogWyJVaW50OENsYW1wZWRBcnJheSIsICJwcm90b3R5cGUiXSwKICAgICAgIiVVaW50MTZBcnJheVByb3RvdHlwZSUiOiBbIlVpbnQxNkFycmF5IiwgInByb3RvdHlwZSJdLAogICAgICAiJVVpbnQzMkFycmF5UHJvdG90eXBlJSI6IFsiVWludDMyQXJyYXkiLCAicHJvdG90eXBlIl0sCiAgICAgICIlVVJJRXJyb3JQcm90b3R5cGUlIjogWyJVUklFcnJvciIsICJwcm90b3R5cGUiXSwKICAgICAgIiVXZWFrTWFwUHJvdG90eXBlJSI6IFsiV2Vha01hcCIsICJwcm90b3R5cGUiXSwKICAgICAgIiVXZWFrU2V0UHJvdG90eXBlJSI6IFsiV2Vha1NldCIsICJwcm90b3R5cGUiXQogICAgfSwKICAgICAgICBtID0gbig5KSwKICAgICAgICB5ID0gbigyNSksCiAgICAgICAgYiA9IG0uY2FsbChGdW5jdGlvbi5jYWxsLCBBcnJheS5wcm90b3R5cGUuY29uY2F0KSwKICAgICAgICBEID0gbS5jYWxsKEZ1bmN0aW9uLmFwcGx5LCBBcnJheS5wcm90b3R5cGUuc3BsaWNlKSwKICAgICAgICB4ID0gbS5jYWxsKEZ1bmN0aW9uLmNhbGwsIFN0cmluZy5wcm90b3R5cGUucmVwbGFjZSksCiAgICAgICAgdyA9IG0uY2FsbChGdW5jdGlvbi5jYWxsLCBTdHJpbmcucHJvdG90eXBlLnNsaWNlKSwKICAgICAgICBBID0gL1teJS5bXF1dK3xcWyg/OigtP1xkKyg/OlwuXGQrKT8pfChbIiddKSgoPzooPyFcMilbXlxcXXxcXC4pKj8pXDIpXF18KD89KD86XC58XFtcXSkoPzpcLnxcW1xdfCUkKSkvZywKICAgICAgICBrID0gL1xcKFxcKT8vZywKICAgICAgICBFID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSB3KGUsIDAsIDEpLAogICAgICAgICAgbiA9IHcoZSwgLTEpOwogICAgICBpZiAoIiUiID09PSB0ICYmICIlIiAhPT0gbikgdGhyb3cgbmV3IHIoImludmFsaWQgaW50cmluc2ljIHN5bnRheCwgZXhwZWN0ZWQgY2xvc2luZyBgJWAiKTsKICAgICAgaWYgKCIlIiA9PT0gbiAmJiAiJSIgIT09IHQpIHRocm93IG5ldyByKCJpbnZhbGlkIGludHJpbnNpYyBzeW50YXgsIGV4cGVjdGVkIG9wZW5pbmcgYCVgIik7CiAgICAgIHZhciBpID0gW107CiAgICAgIHJldHVybiB4KGUsIEEsIGZ1bmN0aW9uIChlLCB0LCBuLCByKSB7CiAgICAgICAgaVtpLmxlbmd0aF0gPSBuID8geChyLCBrLCAiJDEiKSA6IHQgfHwgZTsKICAgICAgfSksIGk7CiAgICB9LAogICAgICAgIEYgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgbiwKICAgICAgICAgIGkgPSBlOwoKICAgICAgaWYgKHkoZywgaSkgJiYgKG4gPSBnW2ldLCBpID0gIiUiICsgblswXSArICIlIiksIHkoaCwgaSkpIHsKICAgICAgICB2YXIgYSA9IGhbaV07CiAgICAgICAgaWYgKGEgPT09IHAgJiYgKGEgPSB2KGkpKSwgdm9pZCAwID09PSBhICYmICF0KSB0aHJvdyBuZXcgbygiaW50cmluc2ljICIgKyBlICsgIiBleGlzdHMsIGJ1dCBpcyBub3QgYXZhaWxhYmxlLiBQbGVhc2UgZmlsZSBhbiBpc3N1ZSEiKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgYWxpYXM6IG4sCiAgICAgICAgICBuYW1lOiBpLAogICAgICAgICAgdmFsdWU6IGEKICAgICAgICB9OwogICAgICB9CgogICAgICB0aHJvdyBuZXcgcigiaW50cmluc2ljICIgKyBlICsgIiBkb2VzIG5vdCBleGlzdCEiKTsKICAgIH07CgogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgaWYgKCJzdHJpbmciICE9IHR5cGVvZiBlIHx8IDAgPT09IGUubGVuZ3RoKSB0aHJvdyBuZXcgbygiaW50cmluc2ljIG5hbWUgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmciKTsKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxICYmICJib29sZWFuIiAhPSB0eXBlb2YgdCkgdGhyb3cgbmV3IG8oJyJhbGxvd01pc3NpbmciIGFyZ3VtZW50IG11c3QgYmUgYSBib29sZWFuJyk7CiAgICAgIHZhciBuID0gRShlKSwKICAgICAgICAgIGkgPSBuLmxlbmd0aCA+IDAgPyBuWzBdIDogIiIsCiAgICAgICAgICBhID0gRigiJSIgKyBpICsgIiUiLCB0KSwKICAgICAgICAgIHMgPSBhLm5hbWUsCiAgICAgICAgICBsID0gYS52YWx1ZSwKICAgICAgICAgIGMgPSAhMSwKICAgICAgICAgIGYgPSBhLmFsaWFzOwogICAgICBmICYmIChpID0gZlswXSwgRChuLCBiKFswLCAxXSwgZikpKTsKCiAgICAgIGZvciAodmFyIHAgPSAxLCBkID0gITA7IHAgPCBuLmxlbmd0aDsgcCArPSAxKSB7CiAgICAgICAgdmFyIHYgPSBuW3BdLAogICAgICAgICAgICBnID0gdyh2LCAwLCAxKSwKICAgICAgICAgICAgbSA9IHcodiwgLTEpOwogICAgICAgIGlmICgoJyInID09PSBnIHx8ICInIiA9PT0gZyB8fCAiYCIgPT09IGcgfHwgJyInID09PSBtIHx8ICInIiA9PT0gbSB8fCAiYCIgPT09IG0pICYmIGcgIT09IG0pIHRocm93IG5ldyByKCJwcm9wZXJ0eSBuYW1lcyB3aXRoIHF1b3RlcyBtdXN0IGhhdmUgbWF0Y2hpbmcgcXVvdGVzIik7CiAgICAgICAgaWYgKCJjb25zdHJ1Y3RvciIgIT09IHYgJiYgZCB8fCAoYyA9ICEwKSwgaSArPSAiLiIgKyB2LCBzID0gIiUiICsgaSArICIlIiwgeShoLCBzKSkgbCA9IGhbc107ZWxzZSBpZiAobnVsbCAhPSBsKSB7CiAgICAgICAgICBpZiAoISh2IGluIGwpKSB7CiAgICAgICAgICAgIGlmICghdCkgdGhyb3cgbmV3IG8oImJhc2UgaW50cmluc2ljIGZvciAiICsgZSArICIgZXhpc3RzLCBidXQgdGhlIHByb3BlcnR5IGlzIG5vdCBhdmFpbGFibGUuIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodSAmJiBwICsgMSA+PSBuLmxlbmd0aCkgewogICAgICAgICAgICB2YXIgeCA9IHUobCwgdik7CiAgICAgICAgICAgIGQgPSAhIXgsIGwgPSBkICYmICJnZXQiIGluIHggJiYgISgib3JpZ2luYWxWYWx1ZSIgaW4geC5nZXQpID8geC5nZXQgOiBsW3ZdOwogICAgICAgICAgfSBlbHNlIGQgPSB5KGwsIHYpLCBsID0gbFt2XTsKCiAgICAgICAgICBkICYmICFjICYmIChoW3NdID0gbCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gbDsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oMCksCiAgICAgICAgaSA9IG4oNCksCiAgICAgICAgbyA9IGkocigiU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mIikpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHZhciBuID0gcihlLCAhIXQpOwogICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgbiAmJiBvKGUsICIucHJvdG90eXBlLiIpID4gLTEgPyBpKG4pIDogbjsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oODgpLAogICAgICAgIGkgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbCgiZm9vIiksCiAgICAgICAgbyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsCiAgICAgICAgYSA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQsCiAgICAgICAgdSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSwKICAgICAgICBzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgIltvYmplY3QgRnVuY3Rpb25dIiA9PT0gby5jYWxsKGUpOwogICAgfSwKICAgICAgICBsID0gdSAmJiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0ge307CgogICAgICB0cnkgewogICAgICAgIHUoZSwgIngiLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMSwKICAgICAgICAgIHZhbHVlOiBlCiAgICAgICAgfSk7CgogICAgICAgIGZvciAodmFyIHQgaW4gZSkgcmV0dXJuICExOwoKICAgICAgICByZXR1cm4gZS54ID09PSBlOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuICExOwogICAgICB9CiAgICB9KCksCiAgICAgICAgYyA9IGZ1bmN0aW9uIChlLCB0LCBuLCByKSB7CiAgICAgICghKHQgaW4gZSkgfHwgcyhyKSAmJiByKCkpICYmIChsID8gdShlLCB0LCB7CiAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICBlbnVtZXJhYmxlOiAhMSwKICAgICAgICB2YWx1ZTogbiwKICAgICAgICB3cml0YWJsZTogITAKICAgICAgfSkgOiBlW3RdID0gbik7CiAgICB9LAogICAgICAgIGYgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDoge30sCiAgICAgICAgICBvID0gcih0KTsKICAgICAgaSAmJiAobyA9IGEuY2FsbChvLCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpKSk7CgogICAgICBmb3IgKHZhciB1ID0gMDsgdSA8IG8ubGVuZ3RoOyB1ICs9IDEpIGMoZSwgb1t1XSwgdFtvW3VdXSwgbltvW3VdXSk7CiAgICB9OwoKICAgIGYuc3VwcG9ydHNEZXNjcmlwdG9ycyA9ICEhbCwgZS5leHBvcnRzID0gZjsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogewogICAgICAgIGRlZmF1bHQ6IGUKICAgICAgfTsKICAgIH0KCiAgICB0Ll9fZXNNb2R1bGUgPSAhMDsKICAgIHZhciBpID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJzeW1ib2wiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gdHlwZW9mIGU7CiAgICB9IDogZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIGUuY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBlICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2YgZTsKICAgIH0sCiAgICAgICAgbyA9IG4oODUpLAogICAgICAgIGEgPSByKG8pLAogICAgICAgIHUgPSBuKDQ5KSwKICAgICAgICBzID0gcih1KSwKICAgICAgICBsID0gbig0NiksCiAgICAgICAgYyA9IHIobCksCiAgICAgICAgZiA9IG4oNDgpLAogICAgICAgIHAgPSByKGYpLAogICAgICAgIGQgPSBuKDQ1KSwKICAgICAgICBoID0gcihkKSwKICAgICAgICB2ID0gZG9jdW1lbnQsCiAgICAgICAgZyA9IG5hdmlnYXRvciwKICAgICAgICBtID0gL1smPD4iJ2BcXF0vZywKICAgICAgICB5ID0gUmVnRXhwKG0uc291cmNlKSwKICAgICAgICBiID0gLyYoPzphbXB8bHR8Z3R8cXVvdHwjMzl8I3g2MHwjeDVjKTsvZywKICAgICAgICBEID0gUmVnRXhwKGIuc291cmNlKSwKICAgICAgICB4ID0gewogICAgICAiJiI6ICImYW1wOyIsCiAgICAgICI8IjogIiZsdDsiLAogICAgICAiPiI6ICImZ3Q7IiwKICAgICAgJyInOiAiJnF1b3Q7IiwKICAgICAgIiciOiAiJiMzOTsiLAogICAgICAiYCI6ICImI3g2MDsiLAogICAgICAiXFwiOiAiJiN4NWM7IgogICAgfSwKICAgICAgICB3ID0ge307CgogICAgZm9yICh2YXIgQSBpbiB4KSB3W3hbQV1dID0gQTsKCiAgICB2YXIgayA9IG51bGw7CiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaCB8fCAoQXJyYXkucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgbiwgcjsKICAgICAgaWYgKG51bGwgPT0gdGhpcykgdGhyb3cgbmV3IFR5cGVFcnJvcigiIHRoaXMgaXMgbnVsbCBvciBub3QgZGVmaW5lZCIpOwogICAgICB2YXIgaSA9IE9iamVjdCh0aGlzKSwKICAgICAgICAgIG8gPSBpLmxlbmd0aCA+Pj4gMDsKICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBUeXBlRXJyb3IoZSArICIgaXMgbm90IGEgZnVuY3Rpb24iKTsKCiAgICAgIGZvciAoYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgKG4gPSB0KSwgciA9IDA7IHIgPCBvOykgewogICAgICAgIHZhciBhOwogICAgICAgIHIgaW4gaSAmJiAoYSA9IGlbcl0sIGUuY2FsbChuLCBhLCByLCBpKSksIHIrKzsKICAgICAgfQogICAgfSksIHdpbmRvdy5Ob2RlTGlzdCAmJiAhTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2ggJiYgKE5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoID0gQXJyYXkucHJvdG90eXBlLmZvckVhY2gpLCBTdHJpbmcucHJvdG90eXBlLnRyaW0gfHwgKFN0cmluZy5wcm90b3R5cGUudHJpbSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZSgvXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csICIiKTsKICAgIH0pLCAoMCwgYS5kZWZhdWx0KShzLmRlZmF1bHQuZm4sIHsKICAgICAgcHJlcGVuZDogZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IHx8IChlID0gZVswXSksIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgdC5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyQmVnaW4iLCBlKTsKICAgICAgICB9KSwgdGhpczsKICAgICAgfSwKICAgICAgYXBwZW5kOiBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgfHwgKGUgPSBlWzBdKSwgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB0Lmluc2VydEFkamFjZW50RWxlbWVudCgiYmVmb3JlRW5kIiwgZSk7CiAgICAgICAgfSksIHRoaXM7CiAgICAgIH0sCiAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgfSksIHRoaXM7CiAgICAgIH0sCiAgICAgIGZpbmQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuICgwLCBzLmRlZmF1bHQpKGUsIHRoaXMpOwogICAgICB9LAogICAgICBzaG93OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgZS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICB9KSwgdGhpczsKICAgICAgfSwKICAgICAgaGlkZTogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICB9KSwgdGhpczsKICAgICAgfSwKICAgICAgb246IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgcmV0dXJuIHMuZGVmYXVsdC5mbi5vZmYoZSwgdCwgbiksIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAocikgewogICAgICAgICAgZS5zcGxpdCgiICIpLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgci5hZGRFdmVudExpc3RlbmVyID8gci5hZGRFdmVudExpc3RlbmVyKGUsIHQsIG4gfHwgITEpIDogci5hdHRhY2hFdmVudCA/IHIuYXR0YWNoRXZlbnQoIm9uIiArIGUsIHQpIDogclsib24iICsgZV0gPSB0OwogICAgICAgICAgfSk7CiAgICAgICAgfSksIHRoaXM7CiAgICAgIH0sCiAgICAgIG9mZjogZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICBlLnNwbGl0KCIgIikuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByLnJlbW92ZUV2ZW50TGlzdGVuZXIgPyByLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSwgdCwgbiB8fCAhMSkgOiByLmRldGFjaEV2ZW50ID8gci5kZXRhY2hFdmVudCgib24iICsgZSwgdCkgOiByWyJvbiIgKyBlXSA9IG51bGw7CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgdGhpczsKICAgICAgfSwKICAgICAgaHRtbDogZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlID8gKHRoaXMuZm9yRWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgdC5pbm5lckhUTUwgPSBlOwogICAgICAgIH0pLCB0aGlzKSA6IHRoaXNbMF0uaW5uZXJIVE1MOwogICAgICB9LAogICAgICB0ZXh0OiBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUgPyAodGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB0LmlubmVyVGV4dCA9IGU7CiAgICAgICAgfSksIHRoaXMpIDogdGhpc1swXS5pbm5lclRleHQ7CiAgICAgIH0sCiAgICAgIGVtcHR5OiBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlID0gZSB8fCAwLCB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdC5pbm5lclRleHQgPSAiIjsKICAgICAgICAgIH0sIGUpOwogICAgICAgIH0pLCB0aGlzOwogICAgICB9LAogICAgICB2YWw6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZSA/ICh0aGlzLmZvckVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHQudmFsdWUgPSBlOwogICAgICAgIH0pLCB0aGlzKSA6IHRoaXNbMF0udmFsdWUgfHwgIiI7CiAgICAgIH0sCiAgICAgIGF0dHI6IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZSA9IGFyZ3VtZW50czsKCiAgICAgICAgaWYgKCJvYmplY3QiID09IGkoYXJndW1lbnRzWzBdKSkgewogICAgICAgICAgdmFyIHQgPSBhcmd1bWVudHNbMF0sCiAgICAgICAgICAgICAgbiA9IHRoaXM7CiAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBuLmZvckVhY2goZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICBuLnNldEF0dHJpYnV0ZShlLCB0W2VdKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KSwgdGhpczsKICAgICAgICB9CgogICAgICAgIHJldHVybiAic3RyaW5nIiA9PSB0eXBlb2YgYXJndW1lbnRzWzBdICYmIGFyZ3VtZW50cy5sZW5ndGggPCAyID8gdGhpc1swXS5nZXRBdHRyaWJ1dGUoYXJndW1lbnRzWzBdKSB8fCAiIiA6ICh0aGlzLmZvckVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHQuc2V0QXR0cmlidXRlKGVbMF0sIGVbMV0pOwogICAgICAgIH0pLCB0aGlzKTsKICAgICAgfSwKICAgICAgcmVtb3ZlQXR0cjogZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB2YXIgbiwKICAgICAgICAgICAgICByID0gMCwKICAgICAgICAgICAgICBpID0gZSAmJiBlLm1hdGNoKC9bXlx4MjBcdFxyXG5cZlwqXC9cXF0rL2cpOwogICAgICAgICAgaWYgKGkgJiYgMSA9PT0gdC5ub2RlVHlwZSkgZm9yICg7IG4gPSBpW3IrK107KSB0LnJlbW92ZUF0dHJpYnV0ZShuKTsKICAgICAgICB9KSwgdGhpczsKICAgICAgfSwKICAgICAgaGFzQ2xhc3M6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuICEhdGhpc1swXSAmJiBuZXcgUmVnRXhwKCIoXFxzfF4pIiArIGUgKyAiKFxcc3wkKSIpLnRlc3QodGhpc1swXS5nZXRBdHRyaWJ1dGUoImNsYXNzIikpOwogICAgICB9LAogICAgICBhZGRDbGFzczogZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB2YXIgbiA9ICgwLCBzLmRlZmF1bHQpKHQpLAogICAgICAgICAgICAgIHIgPSBuLmF0dHIoImNsYXNzIik7CiAgICAgICAgICBuLmhhc0NsYXNzKGUpIHx8IG4uYXR0cigiY2xhc3MiLCByICs9ICIgIiArIGUpOwogICAgICAgIH0pLCB0aGlzOwogICAgICB9LAogICAgICByZW1vdmVDbGFzczogZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB2YXIgbiA9ICgwLCBzLmRlZmF1bHQpKHQpLAogICAgICAgICAgICAgIHIgPSBuLmF0dHIoImNsYXNzIik7CgogICAgICAgICAgaWYgKG4uaGFzQ2xhc3MoZSkpIHsKICAgICAgICAgICAgdmFyIGkgPSBuZXcgUmVnRXhwKCIoXFxzfF4pIiArIGUgKyAiKFxcc3wkKSIpOwogICAgICAgICAgICBuLmF0dHIoImNsYXNzIiwgci5yZXBsYWNlKGksICIiKSk7CiAgICAgICAgICB9CiAgICAgICAgfSksIHRoaXM7CiAgICAgIH0KICAgIH0pLCAoMCwgYS5kZWZhdWx0KShzLmRlZmF1bHQsIHsKICAgICAgZXh0ZW5kOiBhLmRlZmF1bHQsCiAgICAgIG5vb3A6IGZ1bmN0aW9uICgpIHt9LAogICAgICBuYXZpOiBnLAogICAgICB1YTogZy51c2VyQWdlbnQsCiAgICAgIGxhbmc6IGcubGFuZ3VhZ2UgfHwgZy5sYW5ndWFnZXNbMF0sCiAgICAgIGRldGVjdDogYy5kZWZhdWx0LAogICAgICBzdG9yZTogcC5kZWZhdWx0LAogICAgICBlc2NhcGU6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUgJiYgeS50ZXN0KGUpID8gZS5yZXBsYWNlKG0sIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4geFtlXTsKICAgICAgICB9KSA6IGU7CiAgICAgIH0sCiAgICAgIHVuZXNjYXBlOiBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlICYmIEQudGVzdChlKSA/IGUucmVwbGFjZShiLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIHdbZV07CiAgICAgICAgfSkgOiBlOwogICAgICB9LAogICAgICBkeW5hbWljTG9hZFNvdXJjZTogZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICBpZiAoKDAsIHMuZGVmYXVsdCkoJ3NjcmlwdFtzcmM9IicgKyBlICsgJyJdJykubGVuZ3RoKSB0ICYmIHQoKTtlbHNlIHsKICAgICAgICAgIHZhciBuID0gdi5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKICAgICAgICAgIG4ub25sb2FkID0gbi5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBlID0gdGhpczsKICAgICAgICAgICAgZS5vbmxvYWQgPSBlLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGwsIHQgJiYgdCgpLCAoMCwgcy5kZWZhdWx0KShuKS5yZW1vdmUoKTsKICAgICAgICAgIH0sIG4uYXN5bmMgPSAhMCwgbi5zZXRBdHRyaWJ1dGUoInJlZmVycmVyUG9saWN5IiwgIm5vLXJlZmVycmVyIik7CiAgICAgICAgICAoMCwgcy5kZWZhdWx0KSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKG4pLCBuLnNyYyA9IGU7CiAgICAgICAgfQogICAgICB9LAogICAgICBzZGtMb2FkZXI6IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgdCBpbiB3aW5kb3cgJiYgd2luZG93W3RdID8gKGsgJiYgY2xlYXJUaW1lb3V0KGspLCBuICYmIG4oKSkgOiBzLmRlZmF1bHQuZHluYW1pY0xvYWRTb3VyY2UoZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgayA9IHNldFRpbWVvdXQocy5kZWZhdWx0LnNka0xvYWRlcihlLCB0LCBuKSwgMTAwKTsKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgZGVsZXRlSW5XaW46IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgdmFyIG4gPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgaWYgKGUgaW4gd2luZG93KSB0cnkgewogICAgICAgICAgICBkZWxldGUgd2luZG93W2VdOwogICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICB3aW5kb3dbZV0gPSBudWxsOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIDAgPT09IHQgPyBuKCkgOiBzZXRUaW1lb3V0KG4sIHQgfHwgNTAwKTsKICAgICAgfSwKICAgICAgYWpheDogaC5kZWZhdWx0CiAgICB9KSwgdC5kZWZhdWx0ID0gcy5kZWZhdWx0OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBuKDkpLAogICAgICAgIGkgPSBuKDApLAogICAgICAgIG8gPSBpKCIlRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5JSIpLAogICAgICAgIGEgPSBpKCIlRnVuY3Rpb24ucHJvdG90eXBlLmNhbGwlIiksCiAgICAgICAgdSA9IGkoIiVSZWZsZWN0LmFwcGx5JSIsICEwKSB8fCByLmNhbGwoYSwgbyksCiAgICAgICAgcyA9IGkoIiVPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yJSIsICEwKSwKICAgICAgICBsID0gaSgiJU9iamVjdC5kZWZpbmVQcm9wZXJ0eSUiLCAhMCksCiAgICAgICAgYyA9IGkoIiVNYXRoLm1heCUiKTsKICAgIGlmIChsKSB0cnkgewogICAgICBsKHt9LCAiYSIsIHsKICAgICAgICB2YWx1ZTogMQogICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgbCA9IG51bGw7CiAgICB9CgogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSB1KHIsIGEsIGFyZ3VtZW50cyk7CgogICAgICBpZiAocyAmJiBsKSB7CiAgICAgICAgcyh0LCAibGVuZ3RoIikuY29uZmlndXJhYmxlICYmIGwodCwgImxlbmd0aCIsIHsKICAgICAgICAgIHZhbHVlOiAxICsgYygwLCBlLmxlbmd0aCAtIChhcmd1bWVudHMubGVuZ3RoIC0gMSkpCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0OwogICAgfTsKCiAgICB2YXIgZiA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHUociwgbywgYXJndW1lbnRzKTsKICAgIH07CgogICAgbCA/IGwoZS5leHBvcnRzLCAiYXBwbHkiLCB7CiAgICAgIHZhbHVlOiBmCiAgICB9KSA6IGUuZXhwb3J0cy5hcHBseSA9IGY7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICBlLmV4cG9ydHMgPSBuKDYyKTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHQuX19lc01vZHVsZSA9ICEwOwogICAgdC5ERUZBVUxUX0VNT0pJX0NETiA9ICIvL2ltZy50LnNpbmFqcy5jbi90NC9hcHBzdHlsZS9leHByZXNzaW9uL2V4dC9ub3JtYWwvIiwgdC5EQl9OQU1FID0gIkNvbW1lbnQiLCB0LkNPTkZJRyA9IHsKICAgICAgbGFuZzogInpoLUNOIiwKICAgICAgbGFuZ01vZGU6IG51bGwsCiAgICAgIGFwcElkOiAiIiwKICAgICAgYXBwS2V5OiAiIiwKICAgICAgY2xhenpOYW1lOiAiQ29tbWVudCIsCiAgICAgIG1ldGE6IFsibmljayIsICJtYWlsIiwgImxpbmsiXSwKICAgICAgcGF0aDogbG9jYXRpb24ucGF0aG5hbWUsCiAgICAgIHBsYWNlaG9sZGVyOiAiSnVzdCBHbyBHbyIsCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgcmVjb3JkSVA6ICEwLAogICAgICBzZXJ2ZXJVUkxzOiAiIiwKICAgICAgdmlzaXRvcjogITEsCiAgICAgIG1hdGhKYXg6ICExLAogICAgICBlbW9qaUNETjogIiIsCiAgICAgIGVtb2ppTWFwczogdm9pZCAwLAogICAgICBlbmFibGVRUTogITEsCiAgICAgIHJlcXVpcmVkRmllbGRzOiBbXQogICAgfSwgdC5kZWZhdWx0TWV0YSA9IFsibmljayIsICJtYWlsIiwgImxpbmsiXSwgdC5RUUNhY2hlS2V5ID0gIl92X0NhY2hlX1EiLCB0Lk1ldGFDYWNoZUtleSA9ICJfdl9DYWNoZV9NZXRhIiwgdC5SYW5kb21TdHIgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gKERhdGUubm93KCkgKyBNYXRoLnJvdW5kKDFlMyAqIE1hdGgucmFuZG9tKCkpKS50b1N0cmluZygzMik7CiAgICB9LCB0LlZFUlNJT04gPSAiMS41LjEiOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICBmdW5jdGlvbiByKGUsIHQpIHsKICAgICAgcmV0dXJuIG5ldyBvKHQpLnByb2Nlc3MoZSk7CiAgICB9CgogICAgdmFyIGkgPSBuKDE2KSwKICAgICAgICBvID0gbig1MCk7CiAgICB0ID0gZS5leHBvcnRzID0gciwgdC5GaWx0ZXJDU1MgPSBvOwoKICAgIGZvciAodmFyIGEgaW4gaSkgdFthXSA9IGlbYV07CgogICAgInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdyAmJiAod2luZG93LmZpbHRlckNTUyA9IGUuZXhwb3J0cyk7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oNjYpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiAic3ltYm9sIiA9PSB0eXBlb2YgZSA/ICJTeW1ib2wiIDogImJpZ2ludCIgPT0gdHlwZW9mIGUgPyAiQmlnSW50IiA6IHIoZSk7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBuKDc4KTsKICAgIGUuZXhwb3J0cyA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIHx8IHI7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciwKICAgICAgICBpLAogICAgICAgIG8gPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcsCiAgICAgICAgYSA9ICJvYmplY3QiID09IHR5cGVvZiBSZWZsZWN0ICYmIG51bGwgIT09IFJlZmxlY3QgJiYgUmVmbGVjdC5hcHBseTsKICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBhICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgdHJ5IHsKICAgICAgciA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgImxlbmd0aCIsIHsKICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IGk7CiAgICAgICAgfQogICAgICB9KSwgaSA9IHt9LCBhKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdyA0MjsKICAgICAgfSwgbnVsbCwgcik7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGUgIT09IGkgJiYgKGEgPSBudWxsKTsKICAgIH0gZWxzZSBhID0gbnVsbDsKCiAgICB2YXIgdSA9IC9eXHMqY2xhc3NcYi8sCiAgICAgICAgcyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdmFyIHQgPSBvLmNhbGwoZSk7CiAgICAgICAgcmV0dXJuIHUudGVzdCh0KTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiAhMTsKICAgICAgfQogICAgfSwKICAgICAgICBsID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gIXMoZSkgJiYgKG8uY2FsbChlKSwgITApOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuICExOwogICAgICB9CiAgICB9LAogICAgICAgIGMgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLAogICAgICAgIGYgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgISFTeW1ib2wudG9TdHJpbmdUYWcsCiAgICAgICAgcCA9ICJvYmplY3QiID09IHR5cGVvZiBkb2N1bWVudCAmJiB2b2lkIDAgPT09IGRvY3VtZW50LmFsbCAmJiB2b2lkIDAgIT09IGRvY3VtZW50LmFsbCA/IGRvY3VtZW50LmFsbCA6IHt9OwoKICAgIGUuZXhwb3J0cyA9IGEgPyBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZSA9PT0gcCkgcmV0dXJuICEwOwogICAgICBpZiAoIWUpIHJldHVybiAhMTsKICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIGUgJiYgIm9iamVjdCIgIT0gdHlwZW9mIGUpIHJldHVybiAhMTsKICAgICAgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgIWUucHJvdG90eXBlKSByZXR1cm4gITA7CgogICAgICB0cnkgewogICAgICAgIGEoZSwgbnVsbCwgcik7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBpZiAoZSAhPT0gaSkgcmV0dXJuICExOwogICAgICB9CgogICAgICByZXR1cm4gIXMoZSk7CiAgICB9IDogZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGUgPT09IHApIHJldHVybiAhMDsKICAgICAgaWYgKCFlKSByZXR1cm4gITE7CiAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiBlICYmICJvYmplY3QiICE9IHR5cGVvZiBlKSByZXR1cm4gITE7CiAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBlICYmICFlLnByb3RvdHlwZSkgcmV0dXJuICEwOwogICAgICBpZiAoZikgcmV0dXJuIGwoZSk7CiAgICAgIGlmIChzKGUpKSByZXR1cm4gITE7CiAgICAgIHZhciB0ID0gYy5jYWxsKGUpOwogICAgICByZXR1cm4gIltvYmplY3QgRnVuY3Rpb25dIiA9PT0gdCB8fCAiW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0iID09PSB0OwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCkgewogICAgZS5leHBvcnRzID0gewogICAgICBpbmRleE9mOiBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuLCByOwogICAgICAgIGlmIChBcnJheS5wcm90b3R5cGUuaW5kZXhPZikgcmV0dXJuIGUuaW5kZXhPZih0KTsKCiAgICAgICAgZm9yIChuID0gMCwgciA9IGUubGVuZ3RoOyBuIDwgcjsgbisrKSBpZiAoZVtuXSA9PT0gdCkgcmV0dXJuIG47CgogICAgICAgIHJldHVybiAtMTsKICAgICAgfSwKICAgICAgZm9yRWFjaDogZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICB2YXIgciwgaTsKICAgICAgICBpZiAoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpIHJldHVybiBlLmZvckVhY2godCwgbik7CgogICAgICAgIGZvciAociA9IDAsIGkgPSBlLmxlbmd0aDsgciA8IGk7IHIrKykgdC5jYWxsKG4sIGVbcl0sIHIsIGUpOwogICAgICB9LAogICAgICB0cmltOiBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBTdHJpbmcucHJvdG90eXBlLnRyaW0gPyBlLnRyaW0oKSA6IGUucmVwbGFjZSgvKF5ccyopfChccyokKS9nLCAiIik7CiAgICAgIH0sCiAgICAgIHNwYWNlSW5kZXg6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQgPSAvXHN8XG58XHQvLAogICAgICAgICAgICBuID0gdC5leGVjKGUpOwogICAgICAgIHJldHVybiBuID8gbi5pbmRleCA6IC0xOwogICAgICB9CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdC5fX2VzTW9kdWxlID0gITA7CiAgICB2YXIgciA9IG4oNiksCiAgICAgICAgaSA9IHsKICAgICAgY2RuOiByLkRFRkFVTFRfRU1PSklfQ0ROLAogICAgICBtYXBzOiBuKDk3KSwKICAgICAgcGFyc2U6IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgcmV0dXJuIFN0cmluZyhlKS5yZXBsYWNlKG5ldyBSZWdFeHAoIjooIiArIE9iamVjdC5rZXlzKGkubWFwcykuam9pbigifCIpICsgIik6IiwgImlnIiksIGZ1bmN0aW9uIChlLCBuKSB7CiAgICAgICAgICByZXR1cm4gaS5tYXBzW25dID8gaS5idWlsZChuLCB0KSA6IGU7CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGJ1aWxkOiBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuID0gL14oaHR0cHM/Oik/XC9cLy9pLAogICAgICAgICAgICByID0gaS5tYXBzW2VdLAogICAgICAgICAgICBvID0gbi50ZXN0KHIpID8gciA6IGkuY2RuICsgciwKICAgICAgICAgICAgYSA9ICcgPGltZyBhbHQ9IicgKyBlICsgJyIgcmVmZXJyZXJwb2xpY3k9Im5vLXJlZmVycmVyIiBjbGFzcz0idmVtb2ppIiBzcmM9IicgKyBvICsgJyIgLz4nOwogICAgICAgIHJldHVybiBuLnRlc3QobykgPyBhIDogIiI7CiAgICAgIH0KICAgIH07CiAgICB0LmRlZmF1bHQgPSBpOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdC5fX2VzTW9kdWxlID0gITA7CgogICAgdmFyIHIgPSBuKDk1KSwKICAgICAgICBpID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsKICAgICAgICBkZWZhdWx0OiBlCiAgICAgIH07CiAgICB9KHIpOwoKICAgIHQuZGVmYXVsdCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiAoMCwgaS5kZWZhdWx0KShlLCB7CiAgICAgICAgb25UYWdBdHRyOiBmdW5jdGlvbiAoZSwgdCwgbiwgcikgewogICAgICAgICAgcmV0dXJuIG8oZSwgdCwgbiwgcik7CiAgICAgICAgfSwKICAgICAgICBvbklnbm9yZVRhZ0F0dHI6IGZ1bmN0aW9uIChlLCB0LCBuLCByKSB7CiAgICAgICAgICByZXR1cm4gbyhlLCB0LCBuLCByKTsKICAgICAgICB9CiAgICAgIH0pLnJlcGxhY2UoL1w8XC8/ZGl2XD4vZ2ksICIiKTsKICAgIH07CgogICAgdmFyIG8gPSBmdW5jdGlvbiAoZSwgdCwgbiwgcikgewogICAgICBpZiAoL3ZpZGVvfGF1ZGlvL2kudGVzdChlKSkgcmV0dXJuICIiOwoKICAgICAgaWYgKC9jb2RlfHByZXxzcGFuL2kudGVzdChlKSkgewogICAgICAgIGlmICgic3R5bGUiID09IHQpIHsKICAgICAgICAgIHZhciBvID0gbi5tYXRjaCgvY29sb3I6KFsjYS16MC05XXszLDd9fFxzK1sjYS16MC05XXszLDh9KS9naSk7CiAgICAgICAgICByZXR1cm4gbyAmJiBvLmxlbmd0aCA/ICdzdHlsZT0iJyArIG9bMF0gKyAnIicgOiAiIjsKICAgICAgICB9CgogICAgICAgIGlmICgiY2xhc3MiID09IHQpIHJldHVybiB0ICsgIj0nIiArIGkuZGVmYXVsdC5lc2NhcGVBdHRyVmFsdWUobikgKyAiJyI7CiAgICAgIH0KCiAgICAgIHJldHVybiAiYSIgPT09IGUgJiYgImNsYXNzIiA9PSB0ICYmICJhdCIgPT09IG4gPyB0ICsgIj0nIiArIGkuZGVmYXVsdC5lc2NhcGVBdHRyVmFsdWUobikgKyAiJyIgOiAiaW1nIiA9PT0gZSAmJiAvc3JjfGNsYXNzL2kudGVzdCh0KSA/IHQgKyAiPSciICsgaS5kZWZhdWx0LmVzY2FwZUF0dHJWYWx1ZShuKSArICInIHJlZmVycmVyUG9saWN5PSduby1yZWZlcnJlciciIDogdm9pZCAwOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gbigwKSwKICAgICAgICBpID0gbigxKSwKICAgICAgICBvID0gcigiJVR5cGVFcnJvciUiKSwKICAgICAgICBhID0gbig1MiksCiAgICAgICAgdSA9IG4oMTgpLAogICAgICAgIHMgPSBuKDUzKSwKICAgICAgICBsID0gbig1NSksCiAgICAgICAgYyA9IG4oNTYpLAogICAgICAgIGYgPSBuKDYwKSwKICAgICAgICBwID0gbigyMCksCiAgICAgICAgZCA9IG4oODEpLAogICAgICAgIGggPSBpKCJTdHJpbmcucHJvdG90eXBlLnNwbGl0IiksCiAgICAgICAgdiA9IE9iamVjdCgiYSIpLAogICAgICAgIGcgPSAiYSIgIT09IHZbMF0gfHwgISgwIGluIHYpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gZih0aGlzKSwKICAgICAgICAgIG4gPSBnICYmIGQodGhpcykgPyBoKHRoaXMsICIiKSA6IHQsCiAgICAgICAgICByID0gYyhuKTsKICAgICAgaWYgKCFsKGUpKSB0aHJvdyBuZXcgbygiQXJyYXkucHJvdG90eXBlLmZvckVhY2ggY2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uIik7CiAgICAgIHZhciBpOwogICAgICBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiAoaSA9IGFyZ3VtZW50c1sxXSk7CgogICAgICBmb3IgKHZhciB2ID0gMDsgdiA8IHI7KSB7CiAgICAgICAgdmFyIG0gPSBwKHYpOwoKICAgICAgICBpZiAocyhuLCBtKSkgewogICAgICAgICAgdmFyIHkgPSB1KG4sIG0pOwogICAgICAgICAgYShlLCBpLCBbeSwgdiwgbl0pOwogICAgICAgIH0KCiAgICAgICAgdiArPSAxOwogICAgICB9CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBuKDc1KSwKICAgICAgICBpID0gbigxNCk7CgogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoOwogICAgICByZXR1cm4gcihlKSA/IGUgOiBpOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCkgewogICAgZnVuY3Rpb24gbigpIHsKICAgICAgdmFyIGUgPSB7fTsKICAgICAgcmV0dXJuIGVbImFsaWduLWNvbnRlbnQiXSA9ICExLCBlWyJhbGlnbi1pdGVtcyJdID0gITEsIGVbImFsaWduLXNlbGYiXSA9ICExLCBlWyJhbGlnbm1lbnQtYWRqdXN0Il0gPSAhMSwgZVsiYWxpZ25tZW50LWJhc2VsaW5lIl0gPSAhMSwgZS5hbGwgPSAhMSwgZVsiYW5jaG9yLXBvaW50Il0gPSAhMSwgZS5hbmltYXRpb24gPSAhMSwgZVsiYW5pbWF0aW9uLWRlbGF5Il0gPSAhMSwgZVsiYW5pbWF0aW9uLWRpcmVjdGlvbiJdID0gITEsIGVbImFuaW1hdGlvbi1kdXJhdGlvbiJdID0gITEsIGVbImFuaW1hdGlvbi1maWxsLW1vZGUiXSA9ICExLCBlWyJhbmltYXRpb24taXRlcmF0aW9uLWNvdW50Il0gPSAhMSwgZVsiYW5pbWF0aW9uLW5hbWUiXSA9ICExLCBlWyJhbmltYXRpb24tcGxheS1zdGF0ZSJdID0gITEsIGVbImFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb24iXSA9ICExLCBlLmF6aW11dGggPSAhMSwgZVsiYmFja2ZhY2UtdmlzaWJpbGl0eSJdID0gITEsIGUuYmFja2dyb3VuZCA9ICEwLCBlWyJiYWNrZ3JvdW5kLWF0dGFjaG1lbnQiXSA9ICEwLCBlWyJiYWNrZ3JvdW5kLWNsaXAiXSA9ICEwLCBlWyJiYWNrZ3JvdW5kLWNvbG9yIl0gPSAhMCwgZVsiYmFja2dyb3VuZC1pbWFnZSJdID0gITAsIGVbImJhY2tncm91bmQtb3JpZ2luIl0gPSAhMCwgZVsiYmFja2dyb3VuZC1wb3NpdGlvbiJdID0gITAsIGVbImJhY2tncm91bmQtcmVwZWF0Il0gPSAhMCwgZVsiYmFja2dyb3VuZC1zaXplIl0gPSAhMCwgZVsiYmFzZWxpbmUtc2hpZnQiXSA9ICExLCBlLmJpbmRpbmcgPSAhMSwgZS5ibGVlZCA9ICExLCBlWyJib29rbWFyay1sYWJlbCJdID0gITEsIGVbImJvb2ttYXJrLWxldmVsIl0gPSAhMSwgZVsiYm9va21hcmstc3RhdGUiXSA9ICExLCBlLmJvcmRlciA9ICEwLCBlWyJib3JkZXItYm90dG9tIl0gPSAhMCwgZVsiYm9yZGVyLWJvdHRvbS1jb2xvciJdID0gITAsIGVbImJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXMiXSA9ICEwLCBlWyJib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1cyJdID0gITAsIGVbImJvcmRlci1ib3R0b20tc3R5bGUiXSA9ICEwLCBlWyJib3JkZXItYm90dG9tLXdpZHRoIl0gPSAhMCwgZVsiYm9yZGVyLWNvbGxhcHNlIl0gPSAhMCwgZVsiYm9yZGVyLWNvbG9yIl0gPSAhMCwgZVsiYm9yZGVyLWltYWdlIl0gPSAhMCwgZVsiYm9yZGVyLWltYWdlLW91dHNldCJdID0gITAsIGVbImJvcmRlci1pbWFnZS1yZXBlYXQiXSA9ICEwLCBlWyJib3JkZXItaW1hZ2Utc2xpY2UiXSA9ICEwLCBlWyJib3JkZXItaW1hZ2Utc291cmNlIl0gPSAhMCwgZVsiYm9yZGVyLWltYWdlLXdpZHRoIl0gPSAhMCwgZVsiYm9yZGVyLWxlZnQiXSA9ICEwLCBlWyJib3JkZXItbGVmdC1jb2xvciJdID0gITAsIGVbImJvcmRlci1sZWZ0LXN0eWxlIl0gPSAhMCwgZVsiYm9yZGVyLWxlZnQtd2lkdGgiXSA9ICEwLCBlWyJib3JkZXItcmFkaXVzIl0gPSAhMCwgZVsiYm9yZGVyLXJpZ2h0Il0gPSAhMCwgZVsiYm9yZGVyLXJpZ2h0LWNvbG9yIl0gPSAhMCwgZVsiYm9yZGVyLXJpZ2h0LXN0eWxlIl0gPSAhMCwgZVsiYm9yZGVyLXJpZ2h0LXdpZHRoIl0gPSAhMCwgZVsiYm9yZGVyLXNwYWNpbmciXSA9ICEwLCBlWyJib3JkZXItc3R5bGUiXSA9ICEwLCBlWyJib3JkZXItdG9wIl0gPSAhMCwgZVsiYm9yZGVyLXRvcC1jb2xvciJdID0gITAsIGVbImJvcmRlci10b3AtbGVmdC1yYWRpdXMiXSA9ICEwLCBlWyJib3JkZXItdG9wLXJpZ2h0LXJhZGl1cyJdID0gITAsIGVbImJvcmRlci10b3Atc3R5bGUiXSA9ICEwLCBlWyJib3JkZXItdG9wLXdpZHRoIl0gPSAhMCwgZVsiYm9yZGVyLXdpZHRoIl0gPSAhMCwgZS5ib3R0b20gPSAhMSwgZVsiYm94LWRlY29yYXRpb24tYnJlYWsiXSA9ICEwLCBlWyJib3gtc2hhZG93Il0gPSAhMCwgZVsiYm94LXNpemluZyJdID0gITAsIGVbImJveC1zbmFwIl0gPSAhMCwgZVsiYm94LXN1cHByZXNzIl0gPSAhMCwgZVsiYnJlYWstYWZ0ZXIiXSA9ICEwLCBlWyJicmVhay1iZWZvcmUiXSA9ICEwLCBlWyJicmVhay1pbnNpZGUiXSA9ICEwLCBlWyJjYXB0aW9uLXNpZGUiXSA9ICExLCBlLmNoYWlucyA9ICExLCBlLmNsZWFyID0gITAsIGUuY2xpcCA9ICExLCBlWyJjbGlwLXBhdGgiXSA9ICExLCBlWyJjbGlwLXJ1bGUiXSA9ICExLCBlLmNvbG9yID0gITAsIGVbImNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycyJdID0gITAsIGVbImNvbHVtbi1jb3VudCJdID0gITEsIGVbImNvbHVtbi1maWxsIl0gPSAhMSwgZVsiY29sdW1uLWdhcCJdID0gITEsIGVbImNvbHVtbi1ydWxlIl0gPSAhMSwgZVsiY29sdW1uLXJ1bGUtY29sb3IiXSA9ICExLCBlWyJjb2x1bW4tcnVsZS1zdHlsZSJdID0gITEsIGVbImNvbHVtbi1ydWxlLXdpZHRoIl0gPSAhMSwgZVsiY29sdW1uLXNwYW4iXSA9ICExLCBlWyJjb2x1bW4td2lkdGgiXSA9ICExLCBlLmNvbHVtbnMgPSAhMSwgZS5jb250YWluID0gITEsIGUuY29udGVudCA9ICExLCBlWyJjb3VudGVyLWluY3JlbWVudCJdID0gITEsIGVbImNvdW50ZXItcmVzZXQiXSA9ICExLCBlWyJjb3VudGVyLXNldCJdID0gITEsIGUuY3JvcCA9ICExLCBlLmN1ZSA9ICExLCBlWyJjdWUtYWZ0ZXIiXSA9ICExLCBlWyJjdWUtYmVmb3JlIl0gPSAhMSwgZS5jdXJzb3IgPSAhMSwgZS5kaXJlY3Rpb24gPSAhMSwgZS5kaXNwbGF5ID0gITAsIGVbImRpc3BsYXktaW5zaWRlIl0gPSAhMCwgZVsiZGlzcGxheS1saXN0Il0gPSAhMCwgZVsiZGlzcGxheS1vdXRzaWRlIl0gPSAhMCwgZVsiZG9taW5hbnQtYmFzZWxpbmUiXSA9ICExLCBlLmVsZXZhdGlvbiA9ICExLCBlWyJlbXB0eS1jZWxscyJdID0gITEsIGUuZmlsdGVyID0gITEsIGUuZmxleCA9ICExLCBlWyJmbGV4LWJhc2lzIl0gPSAhMSwgZVsiZmxleC1kaXJlY3Rpb24iXSA9ICExLCBlWyJmbGV4LWZsb3ciXSA9ICExLCBlWyJmbGV4LWdyb3ciXSA9ICExLCBlWyJmbGV4LXNocmluayJdID0gITEsIGVbImZsZXgtd3JhcCJdID0gITEsIGUuZmxvYXQgPSAhMSwgZVsiZmxvYXQtb2Zmc2V0Il0gPSAhMSwgZVsiZmxvb2QtY29sb3IiXSA9ICExLCBlWyJmbG9vZC1vcGFjaXR5Il0gPSAhMSwgZVsiZmxvdy1mcm9tIl0gPSAhMSwgZVsiZmxvdy1pbnRvIl0gPSAhMSwgZS5mb250ID0gITAsIGVbImZvbnQtZmFtaWx5Il0gPSAhMCwgZVsiZm9udC1mZWF0dXJlLXNldHRpbmdzIl0gPSAhMCwgZVsiZm9udC1rZXJuaW5nIl0gPSAhMCwgZVsiZm9udC1sYW5ndWFnZS1vdmVycmlkZSJdID0gITAsIGVbImZvbnQtc2l6ZSJdID0gITAsIGVbImZvbnQtc2l6ZS1hZGp1c3QiXSA9ICEwLCBlWyJmb250LXN0cmV0Y2giXSA9ICEwLCBlWyJmb250LXN0eWxlIl0gPSAhMCwgZVsiZm9udC1zeW50aGVzaXMiXSA9ICEwLCBlWyJmb250LXZhcmlhbnQiXSA9ICEwLCBlWyJmb250LXZhcmlhbnQtYWx0ZXJuYXRlcyJdID0gITAsIGVbImZvbnQtdmFyaWFudC1jYXBzIl0gPSAhMCwgZVsiZm9udC12YXJpYW50LWVhc3QtYXNpYW4iXSA9ICEwLCBlWyJmb250LXZhcmlhbnQtbGlnYXR1cmVzIl0gPSAhMCwgZVsiZm9udC12YXJpYW50LW51bWVyaWMiXSA9ICEwLCBlWyJmb250LXZhcmlhbnQtcG9zaXRpb24iXSA9ICEwLCBlWyJmb250LXdlaWdodCJdID0gITAsIGUuZ3JpZCA9ICExLCBlWyJncmlkLWFyZWEiXSA9ICExLCBlWyJncmlkLWF1dG8tY29sdW1ucyJdID0gITEsIGVbImdyaWQtYXV0by1mbG93Il0gPSAhMSwgZVsiZ3JpZC1hdXRvLXJvd3MiXSA9ICExLCBlWyJncmlkLWNvbHVtbiJdID0gITEsIGVbImdyaWQtY29sdW1uLWVuZCJdID0gITEsIGVbImdyaWQtY29sdW1uLXN0YXJ0Il0gPSAhMSwgZVsiZ3JpZC1yb3ciXSA9ICExLCBlWyJncmlkLXJvdy1lbmQiXSA9ICExLCBlWyJncmlkLXJvdy1zdGFydCJdID0gITEsIGVbImdyaWQtdGVtcGxhdGUiXSA9ICExLCBlWyJncmlkLXRlbXBsYXRlLWFyZWFzIl0gPSAhMSwgZVsiZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zIl0gPSAhMSwgZVsiZ3JpZC10ZW1wbGF0ZS1yb3dzIl0gPSAhMSwgZVsiaGFuZ2luZy1wdW5jdHVhdGlvbiJdID0gITEsIGUuaGVpZ2h0ID0gITAsIGUuaHlwaGVucyA9ICExLCBlLmljb24gPSAhMSwgZVsiaW1hZ2Utb3JpZW50YXRpb24iXSA9ICExLCBlWyJpbWFnZS1yZXNvbHV0aW9uIl0gPSAhMSwgZVsiaW1lLW1vZGUiXSA9ICExLCBlWyJpbml0aWFsLWxldHRlcnMiXSA9ICExLCBlWyJpbmxpbmUtYm94LWFsaWduIl0gPSAhMSwgZVsianVzdGlmeS1jb250ZW50Il0gPSAhMSwgZVsianVzdGlmeS1pdGVtcyJdID0gITEsIGVbImp1c3RpZnktc2VsZiJdID0gITEsIGUubGVmdCA9ICExLCBlWyJsZXR0ZXItc3BhY2luZyJdID0gITAsIGVbImxpZ2h0aW5nLWNvbG9yIl0gPSAhMCwgZVsibGluZS1ib3gtY29udGFpbiJdID0gITEsIGVbImxpbmUtYnJlYWsiXSA9ICExLCBlWyJsaW5lLWdyaWQiXSA9ICExLCBlWyJsaW5lLWhlaWdodCJdID0gITEsIGVbImxpbmUtc25hcCJdID0gITEsIGVbImxpbmUtc3RhY2tpbmciXSA9ICExLCBlWyJsaW5lLXN0YWNraW5nLXJ1YnkiXSA9ICExLCBlWyJsaW5lLXN0YWNraW5nLXNoaWZ0Il0gPSAhMSwgZVsibGluZS1zdGFja2luZy1zdHJhdGVneSJdID0gITEsIGVbImxpc3Qtc3R5bGUiXSA9ICEwLCBlWyJsaXN0LXN0eWxlLWltYWdlIl0gPSAhMCwgZVsibGlzdC1zdHlsZS1wb3NpdGlvbiJdID0gITAsIGVbImxpc3Qtc3R5bGUtdHlwZSJdID0gITAsIGUubWFyZ2luID0gITAsIGVbIm1hcmdpbi1ib3R0b20iXSA9ICEwLCBlWyJtYXJnaW4tbGVmdCJdID0gITAsIGVbIm1hcmdpbi1yaWdodCJdID0gITAsIGVbIm1hcmdpbi10b3AiXSA9ICEwLCBlWyJtYXJrZXItb2Zmc2V0Il0gPSAhMSwgZVsibWFya2VyLXNpZGUiXSA9ICExLCBlLm1hcmtzID0gITEsIGUubWFzayA9ICExLCBlWyJtYXNrLWJveCJdID0gITEsIGVbIm1hc2stYm94LW91dHNldCJdID0gITEsIGVbIm1hc2stYm94LXJlcGVhdCJdID0gITEsIGVbIm1hc2stYm94LXNsaWNlIl0gPSAhMSwgZVsibWFzay1ib3gtc291cmNlIl0gPSAhMSwgZVsibWFzay1ib3gtd2lkdGgiXSA9ICExLCBlWyJtYXNrLWNsaXAiXSA9ICExLCBlWyJtYXNrLWltYWdlIl0gPSAhMSwgZVsibWFzay1vcmlnaW4iXSA9ICExLCBlWyJtYXNrLXBvc2l0aW9uIl0gPSAhMSwgZVsibWFzay1yZXBlYXQiXSA9ICExLCBlWyJtYXNrLXNpemUiXSA9ICExLCBlWyJtYXNrLXNvdXJjZS10eXBlIl0gPSAhMSwgZVsibWFzay10eXBlIl0gPSAhMSwgZVsibWF4LWhlaWdodCJdID0gITAsIGVbIm1heC1saW5lcyJdID0gITEsIGVbIm1heC13aWR0aCJdID0gITAsIGVbIm1pbi1oZWlnaHQiXSA9ICEwLCBlWyJtaW4td2lkdGgiXSA9ICEwLCBlWyJtb3ZlLXRvIl0gPSAhMSwgZVsibmF2LWRvd24iXSA9ICExLCBlWyJuYXYtaW5kZXgiXSA9ICExLCBlWyJuYXYtbGVmdCJdID0gITEsIGVbIm5hdi1yaWdodCJdID0gITEsIGVbIm5hdi11cCJdID0gITEsIGVbIm9iamVjdC1maXQiXSA9ICExLCBlWyJvYmplY3QtcG9zaXRpb24iXSA9ICExLCBlLm9wYWNpdHkgPSAhMSwgZS5vcmRlciA9ICExLCBlLm9ycGhhbnMgPSAhMSwgZS5vdXRsaW5lID0gITEsIGVbIm91dGxpbmUtY29sb3IiXSA9ICExLCBlWyJvdXRsaW5lLW9mZnNldCJdID0gITEsIGVbIm91dGxpbmUtc3R5bGUiXSA9ICExLCBlWyJvdXRsaW5lLXdpZHRoIl0gPSAhMSwgZS5vdmVyZmxvdyA9ICExLCBlWyJvdmVyZmxvdy13cmFwIl0gPSAhMSwgZVsib3ZlcmZsb3cteCJdID0gITEsIGVbIm92ZXJmbG93LXkiXSA9ICExLCBlLnBhZGRpbmcgPSAhMCwgZVsicGFkZGluZy1ib3R0b20iXSA9ICEwLCBlWyJwYWRkaW5nLWxlZnQiXSA9ICEwLCBlWyJwYWRkaW5nLXJpZ2h0Il0gPSAhMCwgZVsicGFkZGluZy10b3AiXSA9ICEwLCBlLnBhZ2UgPSAhMSwgZVsicGFnZS1icmVhay1hZnRlciJdID0gITEsIGVbInBhZ2UtYnJlYWstYmVmb3JlIl0gPSAhMSwgZVsicGFnZS1icmVhay1pbnNpZGUiXSA9ICExLCBlWyJwYWdlLXBvbGljeSJdID0gITEsIGUucGF1c2UgPSAhMSwgZVsicGF1c2UtYWZ0ZXIiXSA9ICExLCBlWyJwYXVzZS1iZWZvcmUiXSA9ICExLCBlLnBlcnNwZWN0aXZlID0gITEsIGVbInBlcnNwZWN0aXZlLW9yaWdpbiJdID0gITEsIGUucGl0Y2ggPSAhMSwgZVsicGl0Y2gtcmFuZ2UiXSA9ICExLCBlWyJwbGF5LWR1cmluZyJdID0gITEsIGUucG9zaXRpb24gPSAhMSwgZVsicHJlc2VudGF0aW9uLWxldmVsIl0gPSAhMSwgZS5xdW90ZXMgPSAhMSwgZVsicmVnaW9uLWZyYWdtZW50Il0gPSAhMSwgZS5yZXNpemUgPSAhMSwgZS5yZXN0ID0gITEsIGVbInJlc3QtYWZ0ZXIiXSA9ICExLCBlWyJyZXN0LWJlZm9yZSJdID0gITEsIGUucmljaG5lc3MgPSAhMSwgZS5yaWdodCA9ICExLCBlLnJvdGF0aW9uID0gITEsIGVbInJvdGF0aW9uLXBvaW50Il0gPSAhMSwgZVsicnVieS1hbGlnbiJdID0gITEsIGVbInJ1YnktbWVyZ2UiXSA9ICExLCBlWyJydWJ5LXBvc2l0aW9uIl0gPSAhMSwgZVsic2hhcGUtaW1hZ2UtdGhyZXNob2xkIl0gPSAhMSwgZVsic2hhcGUtb3V0c2lkZSJdID0gITEsIGVbInNoYXBlLW1hcmdpbiJdID0gITEsIGUuc2l6ZSA9ICExLCBlLnNwZWFrID0gITEsIGVbInNwZWFrLWFzIl0gPSAhMSwgZVsic3BlYWstaGVhZGVyIl0gPSAhMSwgZVsic3BlYWstbnVtZXJhbCJdID0gITEsIGVbInNwZWFrLXB1bmN0dWF0aW9uIl0gPSAhMSwgZVsic3BlZWNoLXJhdGUiXSA9ICExLCBlLnN0cmVzcyA9ICExLCBlWyJzdHJpbmctc2V0Il0gPSAhMSwgZVsidGFiLXNpemUiXSA9ICExLCBlWyJ0YWJsZS1sYXlvdXQiXSA9ICExLCBlWyJ0ZXh0LWFsaWduIl0gPSAhMCwgZVsidGV4dC1hbGlnbi1sYXN0Il0gPSAhMCwgZVsidGV4dC1jb21iaW5lLXVwcmlnaHQiXSA9ICEwLCBlWyJ0ZXh0LWRlY29yYXRpb24iXSA9ICEwLCBlWyJ0ZXh0LWRlY29yYXRpb24tY29sb3IiXSA9ICEwLCBlWyJ0ZXh0LWRlY29yYXRpb24tbGluZSJdID0gITAsIGVbInRleHQtZGVjb3JhdGlvbi1za2lwIl0gPSAhMCwgZVsidGV4dC1kZWNvcmF0aW9uLXN0eWxlIl0gPSAhMCwgZVsidGV4dC1lbXBoYXNpcyJdID0gITAsIGVbInRleHQtZW1waGFzaXMtY29sb3IiXSA9ICEwLCBlWyJ0ZXh0LWVtcGhhc2lzLXBvc2l0aW9uIl0gPSAhMCwgZVsidGV4dC1lbXBoYXNpcy1zdHlsZSJdID0gITAsIGVbInRleHQtaGVpZ2h0Il0gPSAhMCwgZVsidGV4dC1pbmRlbnQiXSA9ICEwLCBlWyJ0ZXh0LWp1c3RpZnkiXSA9ICEwLCBlWyJ0ZXh0LW9yaWVudGF0aW9uIl0gPSAhMCwgZVsidGV4dC1vdmVyZmxvdyJdID0gITAsIGVbInRleHQtc2hhZG93Il0gPSAhMCwgZVsidGV4dC1zcGFjZS1jb2xsYXBzZSJdID0gITAsIGVbInRleHQtdHJhbnNmb3JtIl0gPSAhMCwgZVsidGV4dC11bmRlcmxpbmUtcG9zaXRpb24iXSA9ICEwLCBlWyJ0ZXh0LXdyYXAiXSA9ICEwLCBlLnRvcCA9ICExLCBlLnRyYW5zZm9ybSA9ICExLCBlWyJ0cmFuc2Zvcm0tb3JpZ2luIl0gPSAhMSwgZVsidHJhbnNmb3JtLXN0eWxlIl0gPSAhMSwgZS50cmFuc2l0aW9uID0gITEsIGVbInRyYW5zaXRpb24tZGVsYXkiXSA9ICExLCBlWyJ0cmFuc2l0aW9uLWR1cmF0aW9uIl0gPSAhMSwgZVsidHJhbnNpdGlvbi1wcm9wZXJ0eSJdID0gITEsIGVbInRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uIl0gPSAhMSwgZVsidW5pY29kZS1iaWRpIl0gPSAhMSwgZVsidmVydGljYWwtYWxpZ24iXSA9ICExLCBlLnZpc2liaWxpdHkgPSAhMSwgZVsidm9pY2UtYmFsYW5jZSJdID0gITEsIGVbInZvaWNlLWR1cmF0aW9uIl0gPSAhMSwgZVsidm9pY2UtZmFtaWx5Il0gPSAhMSwgZVsidm9pY2UtcGl0Y2giXSA9ICExLCBlWyJ2b2ljZS1yYW5nZSJdID0gITEsIGVbInZvaWNlLXJhdGUiXSA9ICExLCBlWyJ2b2ljZS1zdHJlc3MiXSA9ICExLCBlWyJ2b2ljZS12b2x1bWUiXSA9ICExLCBlLnZvbHVtZSA9ICExLCBlWyJ3aGl0ZS1zcGFjZSJdID0gITEsIGUud2lkb3dzID0gITEsIGUud2lkdGggPSAhMCwgZVsid2lsbC1jaGFuZ2UiXSA9ICExLCBlWyJ3b3JkLWJyZWFrIl0gPSAhMCwgZVsid29yZC1zcGFjaW5nIl0gPSAhMCwgZVsid29yZC13cmFwIl0gPSAhMCwgZVsid3JhcC1mbG93Il0gPSAhMSwgZVsid3JhcC10aHJvdWdoIl0gPSAhMSwgZVsid3JpdGluZy1tb2RlIl0gPSAhMSwgZVsiei1pbmRleCJdID0gITEsIGU7CiAgICB9CgogICAgZnVuY3Rpb24gcihlLCB0LCBuKSB7fQoKICAgIGZ1bmN0aW9uIGkoZSwgdCwgbikge30KCiAgICBmdW5jdGlvbiBvKGUsIHQpIHsKICAgICAgcmV0dXJuIGEudGVzdCh0KSA/ICIiIDogdDsKICAgIH0KCiAgICB2YXIgYSA9IC9qYXZhc2NyaXB0XHMqXDovZ2ltOwogICAgdC53aGl0ZUxpc3QgPSBuKCksIHQuZ2V0RGVmYXVsdFdoaXRlTGlzdCA9IG4sIHQub25BdHRyID0gciwgdC5vbklnbm9yZUF0dHIgPSBpLCB0LnNhZmVBdHRyVmFsdWUgPSBvOwogIH0sIGZ1bmN0aW9uIChlLCB0KSB7CiAgICBlLmV4cG9ydHMgPSB7CiAgICAgIGluZGV4T2Y6IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgdmFyIG4sIHI7CiAgICAgICAgaWYgKEFycmF5LnByb3RvdHlwZS5pbmRleE9mKSByZXR1cm4gZS5pbmRleE9mKHQpOwoKICAgICAgICBmb3IgKG4gPSAwLCByID0gZS5sZW5ndGg7IG4gPCByOyBuKyspIGlmIChlW25dID09PSB0KSByZXR1cm4gbjsKCiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9LAogICAgICBmb3JFYWNoOiBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgIHZhciByLCBpOwogICAgICAgIGlmIChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCkgcmV0dXJuIGUuZm9yRWFjaCh0LCBuKTsKCiAgICAgICAgZm9yIChyID0gMCwgaSA9IGUubGVuZ3RoOyByIDwgaTsgcisrKSB0LmNhbGwobiwgZVtyXSwgciwgZSk7CiAgICAgIH0sCiAgICAgIHRyaW06IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIFN0cmluZy5wcm90b3R5cGUudHJpbSA/IGUudHJpbSgpIDogZS5yZXBsYWNlKC8oXlxzKil8KFxzKiQpL2csICIiKTsKICAgICAgfSwKICAgICAgdHJpbVJpZ2h0OiBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBTdHJpbmcucHJvdG90eXBlLnRyaW1SaWdodCA/IGUudHJpbVJpZ2h0KCkgOiBlLnJlcGxhY2UoLyhccyokKS9nLCAiIik7CiAgICAgIH0KICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oMCksCiAgICAgICAgaSA9IHIoIiVUeXBlRXJyb3IlIiksCiAgICAgICAgbyA9IG4oODYpLAogICAgICAgIGEgPSBuKDE5KSwKICAgICAgICB1ID0gbig4KTsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICBpZiAoIk9iamVjdCIgIT09IHUoZSkpIHRocm93IG5ldyBpKCJBc3NlcnRpb24gZmFpbGVkOiBUeXBlKE8pIGlzIG5vdCBPYmplY3QiKTsKICAgICAgaWYgKCFhKHQpKSB0aHJvdyBuZXcgaSgiQXNzZXJ0aW9uIGZhaWxlZDogSXNQcm9wZXJ0eUtleShQKSBpcyBub3QgdHJ1ZSwgZ290ICIgKyBvKHQpKTsKICAgICAgcmV0dXJuIGVbdF07CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuICJzdHJpbmciID09IHR5cGVvZiBlIHx8ICJzeW1ib2wiID09IHR5cGVvZiBlOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gbigwKSwKICAgICAgICBpID0gcigiJVN0cmluZyUiKSwKICAgICAgICBvID0gcigiJVR5cGVFcnJvciUiKTsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoInN5bWJvbCIgPT0gdHlwZW9mIGUpIHRocm93IG5ldyBvKCJDYW5ub3QgY29udmVydCBhIFN5bWJvbCB2YWx1ZSB0byBhIHN0cmluZyIpOwogICAgICByZXR1cm4gaShlKTsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gbnVsbCA9PT0gZSB8fCAiZnVuY3Rpb24iICE9IHR5cGVvZiBlICYmICJvYmplY3QiICE9IHR5cGVvZiBlOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBTeW1ib2wsCiAgICAgICAgaSA9IG4oMjMpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIHIgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJzeW1ib2wiID09IHR5cGVvZiByKCJmb28iKSAmJiAic3ltYm9sIiA9PSB0eXBlb2YgU3ltYm9sKCJiYXIiKSAmJiBpKCk7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgU3ltYm9sIHx8ICJmdW5jdGlvbiIgIT0gdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHJldHVybiAhMTsKICAgICAgaWYgKCJzeW1ib2wiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IpIHJldHVybiAhMDsKICAgICAgdmFyIGUgPSB7fSwKICAgICAgICAgIHQgPSBTeW1ib2woInRlc3QiKSwKICAgICAgICAgIG4gPSBPYmplY3QodCk7CiAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgdCkgcmV0dXJuICExOwogICAgICBpZiAoIltvYmplY3QgU3ltYm9sXSIgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSkgcmV0dXJuICExOwogICAgICBpZiAoIltvYmplY3QgU3ltYm9sXSIgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuKSkgcmV0dXJuICExOwogICAgICBlW3RdID0gNDI7CgogICAgICBmb3IgKHQgaW4gZSkgcmV0dXJuICExOwoKICAgICAgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIE9iamVjdC5rZXlzICYmIDAgIT09IE9iamVjdC5rZXlzKGUpLmxlbmd0aCkgcmV0dXJuICExOwogICAgICBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgJiYgMCAhPT0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkubGVuZ3RoKSByZXR1cm4gITE7CiAgICAgIHZhciByID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsKICAgICAgaWYgKDEgIT09IHIubGVuZ3RoIHx8IHJbMF0gIT09IHQpIHJldHVybiAhMTsKICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSwgdCkpIHJldHVybiAhMTsKCiAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKSB7CiAgICAgICAgdmFyIGkgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHQpOwogICAgICAgIGlmICg0MiAhPT0gaS52YWx1ZSB8fCAhMCAhPT0gaS5lbnVtZXJhYmxlKSByZXR1cm4gITE7CiAgICAgIH0KCiAgICAgIHJldHVybiAhMDsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oMjMpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHIoKSAmJiAhIVN5bWJvbC50b1N0cmluZ1RhZzsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oOSk7CiAgICBlLmV4cG9ydHMgPSByLmNhbGwoRnVuY3Rpb24uY2FsbCwgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSk7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CgogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSByLmNhbGwoZSksCiAgICAgICAgICBuID0gIltvYmplY3QgQXJndW1lbnRzXSIgPT09IHQ7CiAgICAgIHJldHVybiBuIHx8IChuID0gIltvYmplY3QgQXJyYXldIiAhPT0gdCAmJiBudWxsICE9PSBlICYmICJvYmplY3QiID09IHR5cGVvZiBlICYmICJudW1iZXIiID09IHR5cGVvZiBlLmxlbmd0aCAmJiBlLmxlbmd0aCA+PSAwICYmICJbb2JqZWN0IEZ1bmN0aW9uXSIgPT09IHIuY2FsbChlLmNhbGxlZSkpLCBuOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gbig1KSwKICAgICAgICBpID0gbigxKSwKICAgICAgICBvID0gaSgiT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSIpLAogICAgICAgIGEgPSBpKCJBcnJheS5wcm90b3R5cGUucHVzaCIpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gcihlKSwKICAgICAgICAgIG4gPSBbXTsKCiAgICAgIGZvciAodmFyIGkgaW4gdCkgbyh0LCBpKSAmJiBhKG4sIFtpLCB0W2ldXSk7CgogICAgICByZXR1cm4gbjsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oMjcpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIE9iamVjdC5lbnRyaWVzID8gT2JqZWN0LmVudHJpZXMgOiByOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gbig1KSwKICAgICAgICBpID0gbigyMCksCiAgICAgICAgbyA9IG4oMSksCiAgICAgICAgYSA9IG8oIlN0cmluZy5wcm90b3R5cGUucmVwbGFjZSIpLAogICAgICAgIHUgPSAvXltceDA5XHgwQVx4MEJceDBDXHgwRFx4MjBceEEwXHUxNjgwXHUxODBFXHUyMDAwXHUyMDAxXHUyMDAyXHUyMDAzXHUyMDA0XHUyMDA1XHUyMDA2XHUyMDA3XHUyMDA4XHUyMDA5XHUyMDBBXHUyMDJGXHUyMDVGXHUzMDAwXHUyMDI4XHUyMDI5XHVGRUZGXSsvLAogICAgICAgIHMgPSAvW1x4MDlceDBBXHgwQlx4MENceDBEXHgyMFx4QTBcdTE2ODBcdTE4MEVcdTIwMDBcdTIwMDFcdTIwMDJcdTIwMDNcdTIwMDRcdTIwMDVcdTIwMDZcdTIwMDdcdTIwMDhcdTIwMDlcdTIwMEFcdTIwMkZcdTIwNUZcdTMwMDBcdTIwMjhcdTIwMjlcdUZFRkZdKyQvOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSBpKHIodGhpcykpOwogICAgICByZXR1cm4gYShhKGUsIHUsICIiKSwgcywgIiIpOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gbigyOSksCiAgICAgICAgaSA9ICLigIsiOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFN0cmluZy5wcm90b3R5cGUudHJpbSAmJiBpLnRyaW0oKSA9PT0gaSA/IFN0cmluZy5wcm90b3R5cGUudHJpbSA6IHI7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICBmdW5jdGlvbiByKCkgewogICAgICByZXR1cm4gewogICAgICAgIGE6IFsidGFyZ2V0IiwgImhyZWYiLCAidGl0bGUiXSwKICAgICAgICBhYmJyOiBbInRpdGxlIl0sCiAgICAgICAgYWRkcmVzczogW10sCiAgICAgICAgYXJlYTogWyJzaGFwZSIsICJjb29yZHMiLCAiaHJlZiIsICJhbHQiXSwKICAgICAgICBhcnRpY2xlOiBbXSwKICAgICAgICBhc2lkZTogW10sCiAgICAgICAgYXVkaW86IFsiYXV0b3BsYXkiLCAiY29udHJvbHMiLCAiY3Jvc3NvcmlnaW4iLCAibG9vcCIsICJtdXRlZCIsICJwcmVsb2FkIiwgInNyYyJdLAogICAgICAgIGI6IFtdLAogICAgICAgIGJkaTogWyJkaXIiXSwKICAgICAgICBiZG86IFsiZGlyIl0sCiAgICAgICAgYmlnOiBbXSwKICAgICAgICBibG9ja3F1b3RlOiBbImNpdGUiXSwKICAgICAgICBicjogW10sCiAgICAgICAgY2FwdGlvbjogW10sCiAgICAgICAgY2VudGVyOiBbXSwKICAgICAgICBjaXRlOiBbXSwKICAgICAgICBjb2RlOiBbXSwKICAgICAgICBjb2w6IFsiYWxpZ24iLCAidmFsaWduIiwgInNwYW4iLCAid2lkdGgiXSwKICAgICAgICBjb2xncm91cDogWyJhbGlnbiIsICJ2YWxpZ24iLCAic3BhbiIsICJ3aWR0aCJdLAogICAgICAgIGRkOiBbXSwKICAgICAgICBkZWw6IFsiZGF0ZXRpbWUiXSwKICAgICAgICBkZXRhaWxzOiBbIm9wZW4iXSwKICAgICAgICBkaXY6IFtdLAogICAgICAgIGRsOiBbXSwKICAgICAgICBkdDogW10sCiAgICAgICAgZW06IFtdLAogICAgICAgIGZpZ2NhcHRpb246IFtdLAogICAgICAgIGZpZ3VyZTogW10sCiAgICAgICAgZm9udDogWyJjb2xvciIsICJzaXplIiwgImZhY2UiXSwKICAgICAgICBmb290ZXI6IFtdLAogICAgICAgIGgxOiBbXSwKICAgICAgICBoMjogW10sCiAgICAgICAgaDM6IFtdLAogICAgICAgIGg0OiBbXSwKICAgICAgICBoNTogW10sCiAgICAgICAgaDY6IFtdLAogICAgICAgIGhlYWRlcjogW10sCiAgICAgICAgaHI6IFtdLAogICAgICAgIGk6IFtdLAogICAgICAgIGltZzogWyJzcmMiLCAiYWx0IiwgInRpdGxlIiwgIndpZHRoIiwgImhlaWdodCJdLAogICAgICAgIGluczogWyJkYXRldGltZSJdLAogICAgICAgIGxpOiBbXSwKICAgICAgICBtYXJrOiBbXSwKICAgICAgICBuYXY6IFtdLAogICAgICAgIG9sOiBbXSwKICAgICAgICBwOiBbXSwKICAgICAgICBwcmU6IFtdLAogICAgICAgIHM6IFtdLAogICAgICAgIHNlY3Rpb246IFtdLAogICAgICAgIHNtYWxsOiBbXSwKICAgICAgICBzcGFuOiBbXSwKICAgICAgICBzdWI6IFtdLAogICAgICAgIHN1bW1hcnk6IFtdLAogICAgICAgIHN1cDogW10sCiAgICAgICAgc3Ryb25nOiBbXSwKICAgICAgICBzdHJpa2U6IFtdLAogICAgICAgIHRhYmxlOiBbIndpZHRoIiwgImJvcmRlciIsICJhbGlnbiIsICJ2YWxpZ24iXSwKICAgICAgICB0Ym9keTogWyJhbGlnbiIsICJ2YWxpZ24iXSwKICAgICAgICB0ZDogWyJ3aWR0aCIsICJyb3dzcGFuIiwgImNvbHNwYW4iLCAiYWxpZ24iLCAidmFsaWduIl0sCiAgICAgICAgdGZvb3Q6IFsiYWxpZ24iLCAidmFsaWduIl0sCiAgICAgICAgdGg6IFsid2lkdGgiLCAicm93c3BhbiIsICJjb2xzcGFuIiwgImFsaWduIiwgInZhbGlnbiJdLAogICAgICAgIHRoZWFkOiBbImFsaWduIiwgInZhbGlnbiJdLAogICAgICAgIHRyOiBbInJvd3NwYW4iLCAiYWxpZ24iLCAidmFsaWduIl0sCiAgICAgICAgdHQ6IFtdLAogICAgICAgIHU6IFtdLAogICAgICAgIHVsOiBbXSwKICAgICAgICB2aWRlbzogWyJhdXRvcGxheSIsICJjb250cm9scyIsICJjcm9zc29yaWdpbiIsICJsb29wIiwgIm11dGVkIiwgInBsYXlzaW5saW5lIiwgInBvc3RlciIsICJwcmVsb2FkIiwgInNyYyIsICJoZWlnaHQiLCAid2lkdGgiXQogICAgICB9OwogICAgfQoKICAgIGZ1bmN0aW9uIGkoZSwgdCwgbikge30KCiAgICBmdW5jdGlvbiBvKGUsIHQsIG4pIHt9CgogICAgZnVuY3Rpb24gYShlLCB0LCBuKSB7fQoKICAgIGZ1bmN0aW9uIHUoZSwgdCwgbikge30KCiAgICBmdW5jdGlvbiBzKGUpIHsKICAgICAgcmV0dXJuIGUucmVwbGFjZShFLCAiJmx0OyIpLnJlcGxhY2UoRiwgIiZndDsiKTsKICAgIH0KCiAgICBmdW5jdGlvbiBsKGUsIHQsIG4sIHIpIHsKICAgICAgaWYgKG4gPSB2KG4pLCAiaHJlZiIgPT09IHQgfHwgInNyYyIgPT09IHQpIHsKICAgICAgICBpZiAoIiMiID09PSAobiA9IEEudHJpbShuKSkpIHJldHVybiAiIyI7CiAgICAgICAgaWYgKCJodHRwOi8vIiAhPT0gbi5zdWJzdHIoMCwgNykgJiYgImh0dHBzOi8vIiAhPT0gbi5zdWJzdHIoMCwgOCkgJiYgIm1haWx0bzoiICE9PSBuLnN1YnN0cigwLCA3KSAmJiAidGVsOiIgIT09IG4uc3Vic3RyKDAsIDQpICYmICJkYXRhOmltYWdlLyIgIT09IG4uc3Vic3RyKDAsIDExKSAmJiAiZnRwOi8vIiAhPT0gbi5zdWJzdHIoMCwgNikgJiYgIi4vIiAhPT0gbi5zdWJzdHIoMCwgMikgJiYgIi4uLyIgIT09IG4uc3Vic3RyKDAsIDMpICYmICIjIiAhPT0gblswXSAmJiAiLyIgIT09IG5bMF0pIHJldHVybiAiIjsKICAgICAgfSBlbHNlIGlmICgiYmFja2dyb3VuZCIgPT09IHQpIHsKICAgICAgICBpZiAoJC5sYXN0SW5kZXggPSAwLCAkLnRlc3QobikpIHJldHVybiAiIjsKICAgICAgfSBlbHNlIGlmICgic3R5bGUiID09PSB0KSB7CiAgICAgICAgaWYgKGoubGFzdEluZGV4ID0gMCwgai50ZXN0KG4pKSByZXR1cm4gIiI7CiAgICAgICAgaWYgKFQubGFzdEluZGV4ID0gMCwgVC50ZXN0KG4pICYmICgkLmxhc3RJbmRleCA9IDAsICQudGVzdChuKSkpIHJldHVybiAiIjsKICAgICAgICAhMSAhPT0gciAmJiAociA9IHIgfHwgaywgbiA9IHIucHJvY2VzcyhuKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuID0gZyhuKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjKGUpIHsKICAgICAgcmV0dXJuIGUucmVwbGFjZShDLCAiJnF1b3Q7Iik7CiAgICB9CgogICAgZnVuY3Rpb24gZihlKSB7CiAgICAgIHJldHVybiBlLnJlcGxhY2UoXywgJyInKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwKGUpIHsKICAgICAgcmV0dXJuIGUucmVwbGFjZShTLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHJldHVybiAieCIgPT09IHRbMF0gfHwgIlgiID09PSB0WzBdID8gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludCh0LnN1YnN0cigxKSwgMTYpKSA6IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQodCwgMTApKTsKICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gZChlKSB7CiAgICAgIHJldHVybiBlLnJlcGxhY2UoTywgIjoiKS5yZXBsYWNlKEIsICIgIik7CiAgICB9CgogICAgZnVuY3Rpb24gaChlKSB7CiAgICAgIGZvciAodmFyIHQgPSAiIiwgbiA9IDAsIHIgPSBlLmxlbmd0aDsgbiA8IHI7IG4rKykgdCArPSBlLmNoYXJDb2RlQXQobikgPCAzMiA/ICIgIiA6IGUuY2hhckF0KG4pOwoKICAgICAgcmV0dXJuIEEudHJpbSh0KTsKICAgIH0KCiAgICBmdW5jdGlvbiB2KGUpIHsKICAgICAgcmV0dXJuIGUgPSBmKGUpLCBlID0gcChlKSwgZSA9IGQoZSksIGUgPSBoKGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGcoZSkgewogICAgICByZXR1cm4gZSA9IGMoZSksIGUgPSBzKGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIG0oKSB7CiAgICAgIHJldHVybiAiIjsKICAgIH0KCiAgICBmdW5jdGlvbiB5KGUsIHQpIHsKICAgICAgZnVuY3Rpb24gbih0KSB7CiAgICAgICAgcmV0dXJuICEhciB8fCAtMSAhPT0gQS5pbmRleE9mKGUsIHQpOwogICAgICB9CgogICAgICAiZnVuY3Rpb24iICE9IHR5cGVvZiB0ICYmICh0ID0gZnVuY3Rpb24gKCkge30pOwogICAgICB2YXIgciA9ICFBcnJheS5pc0FycmF5KGUpLAogICAgICAgICAgaSA9IFtdLAogICAgICAgICAgbyA9ICExOwogICAgICByZXR1cm4gewogICAgICAgIG9uSWdub3JlVGFnOiBmdW5jdGlvbiAoZSwgciwgYSkgewogICAgICAgICAgaWYgKG4oZSkpIHsKICAgICAgICAgICAgaWYgKGEuaXNDbG9zaW5nKSB7CiAgICAgICAgICAgICAgdmFyIHUgPSAiWy9yZW1vdmVkXSIsCiAgICAgICAgICAgICAgICAgIHMgPSBhLnBvc2l0aW9uICsgdS5sZW5ndGg7CiAgICAgICAgICAgICAgcmV0dXJuIGkucHVzaChbITEgIT09IG8gPyBvIDogYS5wb3NpdGlvbiwgc10pLCBvID0gITEsIHU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBvIHx8IChvID0gYS5wb3NpdGlvbiksICJbcmVtb3ZlZF0iOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB0KGUsIHIsIGEpOwogICAgICAgIH0sCiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgdmFyIHQgPSAiIiwKICAgICAgICAgICAgICBuID0gMDsKICAgICAgICAgIHJldHVybiBBLmZvckVhY2goaSwgZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgdCArPSBlLnNsaWNlKG4sIHJbMF0pLCBuID0gclsxXTsKICAgICAgICAgIH0pLCB0ICs9IGUuc2xpY2Uobik7CiAgICAgICAgfQogICAgICB9OwogICAgfQoKICAgIGZ1bmN0aW9uIGIoZSkgewogICAgICBmb3IgKHZhciB0ID0gIiIsIG4gPSAwOyBuIDwgZS5sZW5ndGg7KSB7CiAgICAgICAgdmFyIHIgPSBlLmluZGV4T2YoIlx4M2MhLS0iLCBuKTsKCiAgICAgICAgaWYgKC0xID09PSByKSB7CiAgICAgICAgICB0ICs9IGUuc2xpY2Uobik7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIHQgKz0gZS5zbGljZShuLCByKTsKICAgICAgICB2YXIgaSA9IGUuaW5kZXhPZigiLS1ceDNlIiwgcik7CiAgICAgICAgaWYgKC0xID09PSBpKSBicmVhazsKICAgICAgICBuID0gaSArIDM7CiAgICAgIH0KCiAgICAgIHJldHVybiB0OwogICAgfQoKICAgIGZ1bmN0aW9uIEQoZSkgewogICAgICB2YXIgdCA9IGUuc3BsaXQoIiIpOwogICAgICByZXR1cm4gdCA9IHQuZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQgPSBlLmNoYXJDb2RlQXQoMCk7CiAgICAgICAgcmV0dXJuIDEyNyAhPT0gdCAmJiAoISh0IDw9IDMxKSB8fCAxMCA9PT0gdCB8fCAxMyA9PT0gdCk7CiAgICAgIH0pLCB0LmpvaW4oIiIpOwogICAgfQoKICAgIHZhciB4ID0gbig3KS5GaWx0ZXJDU1MsCiAgICAgICAgdyA9IG4oNykuZ2V0RGVmYXVsdFdoaXRlTGlzdCwKICAgICAgICBBID0gbigxMSksCiAgICAgICAgayA9IG5ldyB4KCksCiAgICAgICAgRSA9IC88L2csCiAgICAgICAgRiA9IC8+L2csCiAgICAgICAgQyA9IC8iL2csCiAgICAgICAgXyA9IC8mcXVvdDsvZywKICAgICAgICBTID0gLyYjKFthLXpBLVowLTldKik7Py9naW0sCiAgICAgICAgTyA9IC8mY29sb247Py9naW0sCiAgICAgICAgQiA9IC8mbmV3bGluZTs/L2dpbSwKICAgICAgICAkID0gLygoalxzKmFccyp2XHMqYXx2XHMqYnxsXHMqaVxzKnZccyplKVxzKnNccypjXHMqclxzKmlccypwXHMqdFxzKnxtXHMqb1xzKmNccypoXHMqYSlcOi9naSwKICAgICAgICBqID0gL2Vccyp4XHMqcFxzKnJccyplXHMqc1xzKnNccyppXHMqb1xzKm5ccypcKC4qL2dpLAogICAgICAgIFQgPSAvdVxzKnJccypsXHMqXCguKi9naTsKICAgIHQud2hpdGVMaXN0ID0gcigpLCB0LmdldERlZmF1bHRXaGl0ZUxpc3QgPSByLCB0Lm9uVGFnID0gaSwgdC5vbklnbm9yZVRhZyA9IG8sIHQub25UYWdBdHRyID0gYSwgdC5vbklnbm9yZVRhZ0F0dHIgPSB1LCB0LnNhZmVBdHRyVmFsdWUgPSBsLCB0LmVzY2FwZUh0bWwgPSBzLCB0LmVzY2FwZVF1b3RlID0gYywgdC51bmVzY2FwZVF1b3RlID0gZiwgdC5lc2NhcGVIdG1sRW50aXRpZXMgPSBwLCB0LmVzY2FwZURhbmdlckh0bWw1RW50aXRpZXMgPSBkLCB0LmNsZWFyTm9uUHJpbnRhYmxlQ2hhcmFjdGVyID0gaCwgdC5mcmllbmRseUF0dHJWYWx1ZSA9IHYsIHQuZXNjYXBlQXR0clZhbHVlID0gZywgdC5vbklnbm9yZVRhZ1N0cmlwQWxsID0gbSwgdC5TdHJpcFRhZ0JvZHkgPSB5LCB0LnN0cmlwQ29tbWVudFRhZyA9IGIsIHQuc3RyaXBCbGFua0NoYXIgPSBELCB0LmNzc0ZpbHRlciA9IGssIHQuZ2V0RGVmYXVsdENTU1doaXRlTGlzdCA9IHc7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICB2YXIgdCA9IGYuc3BhY2VJbmRleChlKTsKICAgICAgaWYgKC0xID09PSB0KSB2YXIgbiA9IGUuc2xpY2UoMSwgLTEpO2Vsc2UgdmFyIG4gPSBlLnNsaWNlKDEsIHQgKyAxKTsKICAgICAgcmV0dXJuIG4gPSBmLnRyaW0obikudG9Mb3dlckNhc2UoKSwgIi8iID09PSBuLnNsaWNlKDAsIDEpICYmIChuID0gbi5zbGljZSgxKSksICIvIiA9PT0gbi5zbGljZSgtMSkgJiYgKG4gPSBuLnNsaWNlKDAsIC0xKSksIG47CiAgICB9CgogICAgZnVuY3Rpb24gaShlKSB7CiAgICAgIHJldHVybiAiPC8iID09PSBlLnNsaWNlKDAsIDIpOwogICAgfQoKICAgIGZ1bmN0aW9uIG8oZSwgdCwgbikgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgbyA9ICIiLAogICAgICAgICAgYSA9IDAsCiAgICAgICAgICB1ID0gITEsCiAgICAgICAgICBzID0gITEsCiAgICAgICAgICBsID0gMCwKICAgICAgICAgIGMgPSBlLmxlbmd0aCwKICAgICAgICAgIGYgPSAiIiwKICAgICAgICAgIHAgPSAiIjsKCiAgICAgIGU6IGZvciAobCA9IDA7IGwgPCBjOyBsKyspIHsKICAgICAgICB2YXIgZCA9IGUuY2hhckF0KGwpOwoKICAgICAgICBpZiAoITEgPT09IHUpIHsKICAgICAgICAgIGlmICgiPCIgPT09IGQpIHsKICAgICAgICAgICAgdSA9IGw7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoITEgPT09IHMpIHsKICAgICAgICAgIGlmICgiPCIgPT09IGQpIHsKICAgICAgICAgICAgbyArPSBuKGUuc2xpY2UoYSwgbCkpLCB1ID0gbCwgYSA9IGw7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICgiPiIgPT09IGQpIHsKICAgICAgICAgICAgbyArPSBuKGUuc2xpY2UoYSwgdSkpLCBwID0gZS5zbGljZSh1LCBsICsgMSksIGYgPSByKHApLCBvICs9IHQodSwgby5sZW5ndGgsIGYsIHAsIGkocCkpLCBhID0gbCArIDEsIHUgPSAhMTsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCciJyA9PT0gZCB8fCAiJyIgPT09IGQpIGZvciAodmFyIGggPSAxLCB2ID0gZS5jaGFyQXQobCAtIGgpOyAiIiA9PT0gdi50cmltKCkgfHwgIj0iID09PSB2OykgewogICAgICAgICAgICBpZiAoIj0iID09PSB2KSB7CiAgICAgICAgICAgICAgcyA9IGQ7CiAgICAgICAgICAgICAgY29udGludWUgZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdiA9IGUuY2hhckF0KGwgLSArK2gpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZCA9PT0gcykgewogICAgICAgICAgcyA9ICExOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gYSA8IGUubGVuZ3RoICYmIChvICs9IG4oZS5zdWJzdHIoYSkpKSwgbzsKICAgIH0KCiAgICBmdW5jdGlvbiBhKGUsIHQpIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgZnVuY3Rpb24gbihlLCBuKSB7CiAgICAgICAgaWYgKGUgPSBmLnRyaW0oZSksIGUgPSBlLnJlcGxhY2UocCwgIiIpLnRvTG93ZXJDYXNlKCksICEoZS5sZW5ndGggPCAxKSkgewogICAgICAgICAgdmFyIHIgPSB0KGUsIG4gfHwgIiIpOwogICAgICAgICAgciAmJiBpLnB1c2gocik7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKHZhciByID0gMCwgaSA9IFtdLCBvID0gITEsIGEgPSBlLmxlbmd0aCwgbCA9IDA7IGwgPCBhOyBsKyspIHsKICAgICAgICB2YXIgZCwKICAgICAgICAgICAgaCwKICAgICAgICAgICAgdiA9IGUuY2hhckF0KGwpOwogICAgICAgIGlmICghMSAhPT0gbyB8fCAiPSIgIT09IHYpIHsKICAgICAgICAgIGlmICghMSA9PT0gbyB8fCBsICE9PSByIHx8ICciJyAhPT0gdiAmJiAiJyIgIT09IHYgfHwgIj0iICE9PSBlLmNoYXJBdChsIC0gMSkpIHsKICAgICAgICAgICAgaWYgKC9cc3xcbnxcdC8udGVzdCh2KSkgewogICAgICAgICAgICAgIGlmIChlID0gZS5yZXBsYWNlKC9cc3xcbnxcdC9nLCAiICIpLCAhMSA9PT0gbykgewogICAgICAgICAgICAgICAgaWYgKC0xID09PSAoaCA9IHUoZSwgbCkpKSB7CiAgICAgICAgICAgICAgICAgIGQgPSBmLnRyaW0oZS5zbGljZShyLCBsKSksIG4oZCksIG8gPSAhMSwgciA9IGwgKyAxOwogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBsID0gaCAtIDE7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICgtMSA9PT0gKGggPSBzKGUsIGwgLSAxKSkpIHsKICAgICAgICAgICAgICAgIGQgPSBmLnRyaW0oZS5zbGljZShyLCBsKSksIGQgPSBjKGQpLCBuKG8sIGQpLCBvID0gITEsIHIgPSBsICsgMTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmICgtMSA9PT0gKGggPSBlLmluZGV4T2YodiwgbCArIDEpKSkgYnJlYWs7CiAgICAgICAgICAgIGQgPSBmLnRyaW0oZS5zbGljZShyICsgMSwgaCkpLCBuKG8sIGQpLCBvID0gITEsIGwgPSBoLCByID0gbCArIDE7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIG8gPSBlLnNsaWNlKHIsIGwpLCByID0gbCArIDE7CiAgICAgIH0KCiAgICAgIHJldHVybiByIDwgZS5sZW5ndGggJiYgKCExID09PSBvID8gbihlLnNsaWNlKHIpKSA6IG4obywgYyhmLnRyaW0oZS5zbGljZShyKSkpKSksIGYudHJpbShpLmpvaW4oIiAiKSk7CiAgICB9CgogICAgZnVuY3Rpb24gdShlLCB0KSB7CiAgICAgIGZvciAoOyB0IDwgZS5sZW5ndGg7IHQrKykgewogICAgICAgIHZhciBuID0gZVt0XTsKICAgICAgICBpZiAoIiAiICE9PSBuKSByZXR1cm4gIj0iID09PSBuID8gdCA6IC0xOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcyhlLCB0KSB7CiAgICAgIGZvciAoOyB0ID4gMDsgdC0tKSB7CiAgICAgICAgdmFyIG4gPSBlW3RdOwogICAgICAgIGlmICgiICIgIT09IG4pIHJldHVybiAiPSIgPT09IG4gPyB0IDogLTE7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBsKGUpIHsKICAgICAgcmV0dXJuICciJyA9PT0gZVswXSAmJiAnIicgPT09IGVbZS5sZW5ndGggLSAxXSB8fCAiJyIgPT09IGVbMF0gJiYgIiciID09PSBlW2UubGVuZ3RoIC0gMV07CiAgICB9CgogICAgZnVuY3Rpb24gYyhlKSB7CiAgICAgIHJldHVybiBsKGUpID8gZS5zdWJzdHIoMSwgZS5sZW5ndGggLSAyKSA6IGU7CiAgICB9CgogICAgdmFyIGYgPSBuKDExKSwKICAgICAgICBwID0gL1teYS16QS1aMC05XzpcLlwtXS9naW07CiAgICB0LnBhcnNlVGFnID0gbywgdC5wYXJzZUF0dHIgPSBhOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICB2YXIgciwgaSwgbzsKICAgIC8qIQogICAgYXV0b3NpemUgNC4wLjQKICAgIGxpY2Vuc2U6IE1JVAogICAgaHR0cDovL3d3dy5qYWNrbG1vb3JlLmNvbS9hdXRvc2l6ZQogICAgKi8KCiAgICAhZnVuY3Rpb24gKG4sIGEpIHsKICAgICAgaSA9IFtlLCB0XSwgciA9IGEsIHZvaWQgMCAhPT0gKG8gPSAiZnVuY3Rpb24iID09IHR5cGVvZiByID8gci5hcHBseSh0LCBpKSA6IHIpICYmIChlLmV4cG9ydHMgPSBvKTsKICAgIH0oMCwgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgZnVuY3Rpb24gbihlKSB7CiAgICAgICAgZnVuY3Rpb24gdCh0KSB7CiAgICAgICAgICB2YXIgbiA9IGUuc3R5bGUud2lkdGg7CiAgICAgICAgICBlLnN0eWxlLndpZHRoID0gIjBweCIsIGUub2Zmc2V0V2lkdGgsIGUuc3R5bGUud2lkdGggPSBuLCBlLnN0eWxlLm92ZXJmbG93WSA9IHQ7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBuKGUpIHsKICAgICAgICAgIGZvciAodmFyIHQgPSBbXTsgZSAmJiBlLnBhcmVudE5vZGUgJiYgZS5wYXJlbnROb2RlIGluc3RhbmNlb2YgRWxlbWVudDspIGUucGFyZW50Tm9kZS5zY3JvbGxUb3AgJiYgdC5wdXNoKHsKICAgICAgICAgICAgbm9kZTogZS5wYXJlbnROb2RlLAogICAgICAgICAgICBzY3JvbGxUb3A6IGUucGFyZW50Tm9kZS5zY3JvbGxUb3AKICAgICAgICAgIH0pLCBlID0gZS5wYXJlbnROb2RlOwoKICAgICAgICAgIHJldHVybiB0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcigpIHsKICAgICAgICAgIGlmICgwICE9PSBlLnNjcm9sbEhlaWdodCkgewogICAgICAgICAgICB2YXIgdCA9IG4oZSksCiAgICAgICAgICAgICAgICByID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7CiAgICAgICAgICAgIGUuc3R5bGUuaGVpZ2h0ID0gIiIsIGUuc3R5bGUuaGVpZ2h0ID0gZS5zY3JvbGxIZWlnaHQgKyB1ICsgInB4IiwgcyA9IGUuY2xpZW50V2lkdGgsIHQuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGUubm9kZS5zY3JvbGxUb3AgPSBlLnNjcm9sbFRvcDsKICAgICAgICAgICAgfSksIHIgJiYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSByKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGkoKSB7CiAgICAgICAgICByKCk7CiAgICAgICAgICB2YXIgbiA9IE1hdGgucm91bmQocGFyc2VGbG9hdChlLnN0eWxlLmhlaWdodCkpLAogICAgICAgICAgICAgIGkgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlLCBudWxsKSwKICAgICAgICAgICAgICBvID0gImNvbnRlbnQtYm94IiA9PT0gaS5ib3hTaXppbmcgPyBNYXRoLnJvdW5kKHBhcnNlRmxvYXQoaS5oZWlnaHQpKSA6IGUub2Zmc2V0SGVpZ2h0OwoKICAgICAgICAgIGlmIChvIDwgbiA/ICJoaWRkZW4iID09PSBpLm92ZXJmbG93WSAmJiAodCgic2Nyb2xsIiksIHIoKSwgbyA9ICJjb250ZW50LWJveCIgPT09IGkuYm94U2l6aW5nID8gTWF0aC5yb3VuZChwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGUsIG51bGwpLmhlaWdodCkpIDogZS5vZmZzZXRIZWlnaHQpIDogImhpZGRlbiIgIT09IGkub3ZlcmZsb3dZICYmICh0KCJoaWRkZW4iKSwgcigpLCBvID0gImNvbnRlbnQtYm94IiA9PT0gaS5ib3hTaXppbmcgPyBNYXRoLnJvdW5kKHBhcnNlRmxvYXQod2luZG93LmdldENvbXB1dGVkU3R5bGUoZSwgbnVsbCkuaGVpZ2h0KSkgOiBlLm9mZnNldEhlaWdodCksIGwgIT09IG8pIHsKICAgICAgICAgICAgbCA9IG87CiAgICAgICAgICAgIHZhciB1ID0gYSgiYXV0b3NpemU6cmVzaXplZCIpOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBlLmRpc3BhdGNoRXZlbnQodSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZSAmJiBlLm5vZGVOYW1lICYmICJURVhUQVJFQSIgPT09IGUubm9kZU5hbWUgJiYgIW8uaGFzKGUpKSB7CiAgICAgICAgICB2YXIgdSA9IG51bGwsCiAgICAgICAgICAgICAgcyA9IG51bGwsCiAgICAgICAgICAgICAgbCA9IG51bGwsCiAgICAgICAgICAgICAgYyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZS5jbGllbnRXaWR0aCAhPT0gcyAmJiBpKCk7CiAgICAgICAgICB9LAogICAgICAgICAgICAgIGYgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgYywgITEpLCBlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImlucHV0IiwgaSwgITEpLCBlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImtleXVwIiwgaSwgITEpLCBlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImF1dG9zaXplOmRlc3Ryb3kiLCBmLCAhMSksIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYXV0b3NpemU6dXBkYXRlIiwgaSwgITEpLCBPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgZS5zdHlsZVtuXSA9IHRbbl07CiAgICAgICAgICAgIH0pLCBvLmRlbGV0ZShlKTsKICAgICAgICAgIH0uYmluZChlLCB7CiAgICAgICAgICAgIGhlaWdodDogZS5zdHlsZS5oZWlnaHQsCiAgICAgICAgICAgIHJlc2l6ZTogZS5zdHlsZS5yZXNpemUsCiAgICAgICAgICAgIG92ZXJmbG93WTogZS5zdHlsZS5vdmVyZmxvd1ksCiAgICAgICAgICAgIG92ZXJmbG93WDogZS5zdHlsZS5vdmVyZmxvd1gsCiAgICAgICAgICAgIHdvcmRXcmFwOiBlLnN0eWxlLndvcmRXcmFwCiAgICAgICAgICB9KTsKCiAgICAgICAgICBlLmFkZEV2ZW50TGlzdGVuZXIoImF1dG9zaXplOmRlc3Ryb3kiLCBmLCAhMSksICJvbnByb3BlcnR5Y2hhbmdlIiBpbiBlICYmICJvbmlucHV0IiBpbiBlICYmIGUuYWRkRXZlbnRMaXN0ZW5lcigia2V5dXAiLCBpLCAhMSksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCBjLCAhMSksIGUuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLCBpLCAhMSksIGUuYWRkRXZlbnRMaXN0ZW5lcigiYXV0b3NpemU6dXBkYXRlIiwgaSwgITEpLCBlLnN0eWxlLm92ZXJmbG93WCA9ICJoaWRkZW4iLCBlLnN0eWxlLndvcmRXcmFwID0gImJyZWFrLXdvcmQiLCBvLnNldChlLCB7CiAgICAgICAgICAgIGRlc3Ryb3k6IGYsCiAgICAgICAgICAgIHVwZGF0ZTogaQogICAgICAgICAgfSksIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHQgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlLCBudWxsKTsKICAgICAgICAgICAgInZlcnRpY2FsIiA9PT0gdC5yZXNpemUgPyBlLnN0eWxlLnJlc2l6ZSA9ICJub25lIiA6ICJib3RoIiA9PT0gdC5yZXNpemUgJiYgKGUuc3R5bGUucmVzaXplID0gImhvcml6b250YWwiKSwgdSA9ICJjb250ZW50LWJveCIgPT09IHQuYm94U2l6aW5nID8gLShwYXJzZUZsb2F0KHQucGFkZGluZ1RvcCkgKyBwYXJzZUZsb2F0KHQucGFkZGluZ0JvdHRvbSkpIDogcGFyc2VGbG9hdCh0LmJvcmRlclRvcFdpZHRoKSArIHBhcnNlRmxvYXQodC5ib3JkZXJCb3R0b21XaWR0aCksIGlzTmFOKHUpICYmICh1ID0gMCksIGkoKTsKICAgICAgICAgIH0oKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICAgIHZhciB0ID0gby5nZXQoZSk7CiAgICAgICAgdCAmJiB0LmRlc3Ryb3koKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gaShlKSB7CiAgICAgICAgdmFyIHQgPSBvLmdldChlKTsKICAgICAgICB0ICYmIHQudXBkYXRlKCk7CiAgICAgIH0KCiAgICAgIHZhciBvID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgTWFwID8gbmV3IE1hcCgpIDogZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBlID0gW10sCiAgICAgICAgICAgIHQgPSBbXTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgaGFzOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICByZXR1cm4gZS5pbmRleE9mKHQpID4gLTE7CiAgICAgICAgICB9LAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAobikgewogICAgICAgICAgICByZXR1cm4gdFtlLmluZGV4T2YobildOwogICAgICAgICAgfSwKICAgICAgICAgIHNldDogZnVuY3Rpb24gKG4sIHIpIHsKICAgICAgICAgICAgLTEgPT09IGUuaW5kZXhPZihuKSAmJiAoZS5wdXNoKG4pLCB0LnB1c2gocikpOwogICAgICAgICAgfSwKICAgICAgICAgIGRlbGV0ZTogZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgdmFyIHIgPSBlLmluZGV4T2Yobik7CiAgICAgICAgICAgIHIgPiAtMSAmJiAoZS5zcGxpY2UociwgMSksIHQuc3BsaWNlKHIsIDEpKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9KCksCiAgICAgICAgICBhID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gbmV3IEV2ZW50KGUsIHsKICAgICAgICAgIGJ1YmJsZXM6ICEwCiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICB0cnkgewogICAgICAgIG5ldyBFdmVudCgidGVzdCIpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgYSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpOwogICAgICAgICAgcmV0dXJuIHQuaW5pdEV2ZW50KGUsICEwLCAhMSksIHQ7CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIHUgPSBudWxsOwogICAgICAidW5kZWZpbmVkIiA9PSB0eXBlb2Ygd2luZG93IHx8ICJmdW5jdGlvbiIgIT0gdHlwZW9mIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlID8gKHUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlOwogICAgICB9LCB1LmRlc3Ryb3kgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlOwogICAgICB9LCB1LnVwZGF0ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGU7CiAgICAgIH0pIDogKHUgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHJldHVybiBlICYmIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZS5sZW5ndGggPyBlIDogW2VdLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIG4oZSk7CiAgICAgICAgfSksIGU7CiAgICAgIH0sIHUuZGVzdHJveSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUgJiYgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlLmxlbmd0aCA/IGUgOiBbZV0sIHIpLCBlOwogICAgICB9LCB1LnVwZGF0ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUgJiYgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlLmxlbmd0aCA/IGUgOiBbZV0sIGkpLCBlOwogICAgICB9KSwgdC5kZWZhdWx0ID0gdSwgZS5leHBvcnRzID0gdC5kZWZhdWx0OwogICAgfSk7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICBmdW5jdGlvbiByKGUpIHsKICAgICAgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsKICAgICAgICBkZWZhdWx0OiBlCiAgICAgIH07CiAgICB9CgogICAgZnVuY3Rpb24gaShlKSB7CiAgICAgIHJldHVybiAhIWUgJiYgdGhpcy5pbml0KGUpLCB0aGlzOwogICAgfQoKICAgIGZ1bmN0aW9uIG8oZSkgewogICAgICByZXR1cm4gbmV3IGkoZSk7CiAgICB9CgogICAgdmFyIGEgPSBuKDQyKSwKICAgICAgICB1ID0gcihhKSwKICAgICAgICBzID0gbigzMyksCiAgICAgICAgbCA9IHIocyksCiAgICAgICAgYyA9IG4oMzcpLAogICAgICAgIGYgPSByKGMpLAogICAgICAgIHAgPSBuKDEyKSwKICAgICAgICBkID0gcihwKSwKICAgICAgICBoID0gbig2KSwKICAgICAgICB2ID0gbig0MSksCiAgICAgICAgZyA9IHIodiksCiAgICAgICAgbSA9IG4oMzYpLAogICAgICAgIHkgPSByKG0pLAogICAgICAgIGIgPSBuKDQwKSwKICAgICAgICBEID0gbigzOCksCiAgICAgICAgeCA9IHIoRCksCiAgICAgICAgdyA9IG4oMyksCiAgICAgICAgQSA9IHIodyksCiAgICAgICAgayA9IG4oMzkpLAogICAgICAgIEUgPSByKGspLAogICAgICAgIEYgPSBuKDEzKSwKICAgICAgICBDID0gcihGKSwKICAgICAgICBfID0gbigzNSksCiAgICAgICAgUyA9IChyKF8pLCB7CiAgICAgIGNvbW1lbnQ6ICIiLAogICAgICBuaWNrOiAiIiwKICAgICAgbWFpbDogIiIsCiAgICAgIGxpbms6ICIiLAogICAgICB1YTogQS5kZWZhdWx0LnVhLAogICAgICB1cmw6ICIiLAogICAgICBRUUF2YXRhcjogIiIKICAgIH0pLAogICAgICAgIE8gPSAiIiwKICAgICAgICBCID0ge30sCiAgICAgICAgJCA9IHsKICAgICAgY2RuOiAiaHR0cHM6Ly9ncmF2YXRhci5sb2xpLm5ldC9hdmF0YXIvIiwKICAgICAgZHM6IFsibXAiLCAiaWRlbnRpY29uIiwgIm1vbnN0ZXJpZCIsICJ3YXZhdGFyIiwgInJvYm9oYXNoIiwgInJldHJvIiwgIiJdLAogICAgICBwYXJhbXM6ICIiLAogICAgICBoaWRlOiAhMQogICAgfTsKCiAgICBpLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKCJ1bmRlZmluZWQiID09IHR5cGVvZiBkb2N1bWVudCkgdGhyb3cgbmV3IEVycm9yKCJTb3JyeSwgVmFsaW5lIGRvZXMgbm90IHN1cHBvcnQgU2VydmVyLXNpZGUgcmVuZGVyaW5nLiIpOwogICAgICB2YXIgdCA9IHRoaXM7CiAgICAgIHJldHVybiBlICYmIChlID0gQS5kZWZhdWx0LmV4dGVuZChoLkNPTkZJRywgZSksIHQuaTE4biA9ICgwLCBmLmRlZmF1bHQpKGUubGFuZyB8fCBBLmRlZmF1bHQubGFuZywgZS5sYW5nTW9kZSksIHQuY2ZnID0gZSwgZC5kZWZhdWx0Lm1hcHMgPSAhIWUuZW1vamlNYXBzICYmIGUuZW1vamlNYXBzIHx8IGQuZGVmYXVsdC5tYXBzLCBkLmRlZmF1bHQuY2RuID0gISFlLmVtb2ppQ0ROICYmIGUuZW1vamlDRE4gfHwgZC5kZWZhdWx0LmNkbiwgdC5faW5pdCgpKSwgdDsKICAgIH0sIGkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IHRoaXM7CgogICAgICB0cnkgewogICAgICAgIHZhciB0ID0gZS5jZmcsCiAgICAgICAgICAgIG4gPSB0LmF2YXRhciwKICAgICAgICAgICAgciA9IHQuYXZhdGFyRm9yY2UsCiAgICAgICAgICAgIGkgPSB0LmF2YXRhcl9jZG4sCiAgICAgICAgICAgIG8gPSB0LnZpc2l0b3IsCiAgICAgICAgICAgIGEgPSB0LnBhdGgsCiAgICAgICAgICAgIHUgPSB2b2lkIDAgPT09IGEgPyBsb2NhdGlvbi5wYXRobmFtZSA6IGEsCiAgICAgICAgICAgIHMgPSB0LnBhZ2VTaXplLAogICAgICAgICAgICBsID0gdC5yZWNvcmRJUDsKICAgICAgICBlLmNmZy5wYXRoID0gdS5yZXBsYWNlKC9pbmRleFwuaHRtbD8kLywgIiIpOwogICAgICAgIHZhciBjID0gJC5kcywKICAgICAgICAgICAgZiA9IHIgPyAiJnE9IiArICgwLCBoLlJhbmRvbVN0cikoKSA6ICIiOwogICAgICAgICQucGFyYW1zID0gIj9kPSIgKyAoYy5pbmRleE9mKG4pID4gLTEgPyBuIDogIm1wIikgKyAiJnY9IiArIGguVkVSU0lPTiArIGYsICQuaGlkZSA9ICJoaWRlIiA9PT0gbiwgJC5jZG4gPSAvXmh0dHBzP1w6XC9cLy8udGVzdChpKSA/IGkgOiAkLmNkbiwgZS5jZmcucGFnZVNpemUgPSBpc05hTihzKSA/IDEwIDogcyA8IDEgPyAxMCA6IHMsIGwgJiYgKDAsIGIucmVjb3JkSVBGbikoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiBTLmlwID0gZTsKICAgICAgICB9KTsKICAgICAgICB2YXIgcCA9IGUuY2ZnLmVsIHx8IG51bGwsCiAgICAgICAgICAgIGQgPSAoMCwgQS5kZWZhdWx0KShwKTsKCiAgICAgICAgaWYgKHAgPSBwIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgPyBwIDogZFtkLmxlbmd0aCAtIDFdIHx8IG51bGwpIHsKICAgICAgICAgIGUuJGVsID0gKDAsIEEuZGVmYXVsdCkocCksIGUuJGVsLmFkZENsYXNzKCJ2IikuYXR0cigiZGF0YS1jbGFzcyIsICJ2IiksICQuaGlkZSAmJiBlLiRlbC5hZGRDbGFzcygiaGlkZS1hdmF0YXIiKSwgZS5jZmcubWV0YSA9IChlLmNmZy5ndWVzdF9pbmZvIHx8IGUuY2ZnLm1ldGEgfHwgaC5kZWZhdWx0TWV0YSkuZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBoLmRlZmF1bHRNZXRhLmluZGV4T2YoZSkgPiAtMTsKICAgICAgICAgIH0pLCBlLmNmZy5yZXF1aXJlZEZpZWxkcyA9IGUuY2ZnLnJlcXVpcmVkRmllbGRzLmZpbHRlcihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gaC5kZWZhdWx0TWV0YS5pbmRleE9mKGUpID4gLTE7CiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciB2ID0gKDAgPT0gZS5jZmcubWV0YS5sZW5ndGggPyBoLmRlZmF1bHRNZXRhIDogZS5jZmcubWV0YSkubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHZhciBuID0gIm1haWwiID09IHQgPyAiZW1haWwiIDogInRleHQiOwogICAgICAgICAgICByZXR1cm4gaC5kZWZhdWx0TWV0YS5pbmRleE9mKHQpID4gLTEgPyAnPGlucHV0IG5hbWU9IicgKyB0ICsgJyIgcGxhY2Vob2xkZXI9IicgKyBlLmkxOG4udCh0KSArICciIGNsYXNzPSJ2JyArIHQgKyAnIHZpbnB1dCIgdHlwZT0iJyArIG4gKyAnIj4nIDogIiI7CiAgICAgICAgICB9KSwKICAgICAgICAgICAgICBnID0gJzxkaXYgY2xhc3M9InZwYW5lbCI+PGRpdiBjbGFzcz0idndyYXAiPjxwIGNsYXNzPSJjYW5jZWwtcmVwbHkgdGV4dC1yaWdodCIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiIHRpdGxlPSInICsgZS5pMThuLnQoImNhbmNlbFJlcGx5IikgKyAnIj48c3ZnIGNsYXNzPSJ2aWNvbiBjYW5jZWwtcmVwbHktYnRuIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iNDIyMCIgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIj48cGF0aCBkPSJNNzk2LjQ1NCA5ODVIMjI3LjU0NWMtNTAuMTgzIDAtOTcuNDgxLTE5LjY2Mi0xMzMuMTgzLTU1LjM2My0zNS43LTM1LjcwMS01NS4zNjItODMtNTUuMzYyLTEzMy4xODNWMjI3LjU0NWMwLTUwLjE4MyAxOS42NjItOTcuNDgxIDU1LjM2My0xMzMuMTgzIDM1LjcwMS0zNS43IDgzLTU1LjM2MiAxMzMuMTgyLTU1LjM2Mmg1NjguOTA5YzUwLjE4MyAwIDk3LjQ4MSAxOS42NjIgMTMzLjE4MyA1NS4zNjMgMzUuNzAxIDM1LjcwMiA1NS4zNjMgODMgNTUuMzYzIDEzMy4xODN2NTY4LjkwOWMwIDUwLjE4My0xOS42NjIgOTcuNDgxLTU1LjM2MyAxMzMuMTgzUzg0Ni42MzcgOTg1IDc5Ni40NTQgOTg1ek0yMjcuNTQ1IDkxQzE1Mi4yNTQgOTEgOTEgMTUyLjI1NCA5MSAyMjcuNTQ1djU2OC45MDlDOTEgODcxLjc0NiAxNTIuMjU0IDkzMyAyMjcuNTQ1IDkzM2g1NjguOTA5Qzg3MS43NDYgOTMzIDkzMyA4NzEuNzQ2IDkzMyA3OTYuNDU0VjIyNy41NDVDOTMzIDE1Mi4yNTQgODcxLjc0NiA5MSA3OTYuNDU0IDkxSDIyNy41NDV6IiBwLWlkPSI0MjIxIj48L3BhdGg+PHBhdGggZD0iTTU2OC41NjkgNTEybDE3MC4yNjctMTcwLjI2N2MxNS41NTYtMTUuNTU2IDE1LjU1Ni00MS4wMTIgMC01Ni41NjlzLTQxLjAxMi0xNS41NTYtNTYuNTY5IDBMNTEyIDQ1NS40MzEgMzQxLjczMyAyODUuMTY1Yy0xNS41NTYtMTUuNTU2LTQxLjAxMi0xNS41NTYtNTYuNTY5IDBzLTE1LjU1NiA0MS4wMTIgMCA1Ni41NjlMNDU1LjQzMSA1MTIgMjg1LjE2NSA2ODIuMjY3Yy0xNS41NTYgMTUuNTU2LTE1LjU1NiA0MS4wMTIgMCA1Ni41NjkgMTUuNTU2IDE1LjU1NiA0MS4wMTIgMTUuNTU2IDU2LjU2OSAwTDUxMiA1NjguNTY5bDE3MC4yNjcgMTcwLjI2N2MxNS41NTYgMTUuNTU2IDQxLjAxMiAxNS41NTYgNTYuNTY5IDAgMTUuNTU2LTE1LjU1NiAxNS41NTYtNDEuMDEyIDAtNTYuNTY5TDU2OC41NjkgNTEyeiIgcC1pZD0iNDIyMiIgPjwvcGF0aD48L3N2Zz48L3A+PGRpdiBjbGFzcz0idmhlYWRlciBpdGVtJyArIHYubGVuZ3RoICsgJyI+JyArIHYuam9pbigiIikgKyAnPC9kaXY+PGRpdiBjbGFzcz0idmVkaXQiPjx0ZXh0YXJlYSBpZD0idmVkaXRvciIgY2xhc3M9InZlZGl0b3IgdmlucHV0IiBwbGFjZWhvbGRlcj0iJyArIGUuY2ZnLnBsYWNlaG9sZGVyICsgJyI+PC90ZXh0YXJlYT48ZGl2IGNsYXNzPSJ2cm93Ij48ZGl2IGNsYXNzPSJ2Y29sIHZjb2wtNjAgc3RhdHVzLWJhciI+PC9kaXY+PGRpdiBjbGFzcz0idmNvbCB2Y29sLTQwIHZjdHJsIHRleHQtcmlnaHQiPjxzcGFuIHRpdGxlPSInICsgZS5pMThuLnQoImVtb2ppIikgKyAnIiAgY2xhc3M9InZpY29uIHZlbW9qaS1idG4iPjxzdmcgIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwLWlkPSIxNjE3MiIgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiA+PHBhdGggZD0iTTUxMiAxMDI0YTUxMiA1MTIgMCAxIDEgNTEyLTUxMiA1MTIgNTEyIDAgMCAxLTUxMiA1MTJ6TTUxMiA1Ni44ODg4ODlhNDU1LjExMTExMSA0NTUuMTExMTExIDAgMSAwIDQ1NS4xMTExMTEgNDU1LjExMTExMSA0NTUuMTExMTExIDQ1NS4xMTExMTEgMCAwIDAtNDU1LjExMTExMS00NTUuMTExMTExek0zMTIuODg4ODg5IDUxMkE4NS4zMzMzMzMgODUuMzMzMzMzIDAgMSAxIDM5OC4yMjIyMjIgNDI2LjY2NjY2NyA4NS4zMzMzMzMgODUuMzMzMzMzIDAgMCAxIDMxMi44ODg4ODkgNTEyeiIgcC1pZD0iMTYxNzMiPjwvcGF0aD48cGF0aCBkPSJNNTEyIDc2OEExNDIuMjIyMjIyIDE0Mi4yMjIyMjIgMCAwIDEgMzY5Ljc3Nzc3OCA2MjUuNzc3Nzc4YTI4LjQ0NDQ0NCAyOC40NDQ0NDQgMCAwIDEgNTYuODg4ODg5IDAgODUuMzMzMzMzIDg1LjMzMzMzMyAwIDAgMCAxNzAuNjY2NjY2IDAgMjguNDQ0NDQ0IDI4LjQ0NDQ0NCAwIDAgMSA1Ni44ODg4ODkgMEExNDIuMjIyMjIyIDE0Mi4yMjIyMjIgMCAwIDEgNTEyIDc2OHoiIHAtaWQ9IjE2MTc0Ij48L3BhdGg+PHBhdGggZD0iTTc4Mi4yMjIyMjIgMzkxLjk2NDQ0NGwtMTEzLjc3Nzc3OCA1OS43MzMzMzRhMjkuMDEzMzMzIDI5LjAxMzMzMyAwIDAgMS0zOC42ODQ0NDQtMTAuODA4ODg5IDI4LjQ0NDQ0NCAyOC40NDQ0NDQgMCAwIDEgMTAuMjQtMzguNjg0NDQ1bDExMy43Nzc3NzgtNTYuODg4ODg4YTI4LjQ0NDQ0NCAyOC40NDQ0NDQgMCAwIDEgMzguNjg0NDQ0IDEwLjI0IDI4LjQ0NDQ0NCAyOC40NDQ0NDQgMCAwIDEtMTAuMjQgMzYuNDA4ODg4eiIgcC1pZD0iMTYxNzUiPjwvcGF0aD48cGF0aCBkPSJNNjQwLjU2ODg4OSA0NTEuNjk3Nzc4bDExMy43Nzc3NzggNTYuODg4ODg5YTI3Ljg3NTU1NiAyNy44NzU1NTYgMCAwIDAgMzguNjg0NDQ0LTEwLjI0IDI3Ljg3NTU1NiAyNy44NzU1NTYgMCAwIDAtMTAuMjQtMzguNjg0NDQ1bC0xMTMuNzc3Nzc4LTU2Ljg4ODg4OWEyOC40NDQ0NDQgMjguNDQ0NDQ0IDAgMCAwLTM4LjY4NDQ0NCAxMC44MDg4ODkgMjguNDQ0NDQ0IDI4LjQ0NDQ0NCAwIDAgMCAxMC4yNCAzOC4xMTU1NTZ6IiBwLWlkPSIxNjE3NiI+PC9wYXRoPjwvc3ZnPjwvc3Bhbj48c3BhbiB0aXRsZT0iJyArIGUuaTE4bi50KCJwcmV2aWV3IikgKyAnIiBjbGFzcz0idmljb24gdnByZXZpZXctYnRuIj48c3ZnICB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iMTc2ODgiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PHBhdGggZD0iTTUwMi4zOTAxNTQgOTM1LjM4NDYxNWEyOS41Mzg0NjIgMjkuNTM4NDYyIDAgMSAxIDAgNTkuMDc2OTIzSDE0MS40MzAxNTRDNzkuOTExMzg1IDk5NC40NjE1MzggMjkuNTM4NDYyIDk0Ni4yNTQ3NjkgMjkuNTM4NDYyIDg4Ni4xNTM4NDZWMTM3Ljg0NjE1NEMyOS41Mzg0NjIgNzcuNzQ1MjMxIDc5Ljk1MDc2OSAyOS41Mzg0NjIgMTQxLjM5MDc2OSAyOS41Mzg0NjJoNzQxLjIxODQ2MmM2MS40NCAwIDExMS44NTIzMDggNDguMjA2NzY5IDExMS44NTIzMDcgMTA4LjMwNzY5MnYzMDAuMjY4MzA4YTI5LjUzODQ2MiAyOS41Mzg0NjIgMCAxIDEtNTkuMDc2OTIzIDBWMTM3Ljg0NjE1NGMwLTI2Ljg5OTY5Mi0yMy4zNTUwNzctNDkuMjMwNzY5LTUyLjc3NTM4NC00OS4yMzA3NjlIMTQxLjM5MDc2OWMtMjkuNDIwMzA4IDAtNTIuNzc1Mzg1IDIyLjMzMTA3Ny01Mi43NzUzODQgNDkuMjMwNzY5djc0OC4zMDc2OTJjMCAyNi44OTk2OTIgMjMuMzU1MDc3IDQ5LjIzMDc2OSA1Mi43NzUzODQgNDkuMjMwNzY5aDM2MC45OTkzODV6IiBwLWlkPSIxNzY4OSI+PC9wYXRoPjxwYXRoIGQ9Ik0xOTYuOTIzMDc3IDIxNi42MTUzODVtMjkuNTM4NDYxIDBsMzc0LjE1Mzg0NyAwcTI5LjUzODQ2MiAwIDI5LjUzODQ2MSAyOS41Mzg0NjFsMCAwcTAgMjkuNTM4NDYyLTI5LjUzODQ2MSAyOS41Mzg0NjJsLTM3NC4xNTM4NDcgMHEtMjkuNTM4NDYyIDAtMjkuNTM4NDYxLTI5LjUzODQ2MmwwIDBxMC0yOS41Mzg0NjIgMjkuNTM4NDYxLTI5LjUzODQ2MVoiIHAtaWQ9IjE3NjkwIj48L3BhdGg+PHBhdGggZD0iTTY0OS44NDYxNTQgODQ2Ljc2OTIzMWEyMTYuNjE1Mzg1IDIxNi42MTUzODUgMCAxIDAgMC00MzMuMjMwNzY5IDIxNi42MTUzODUgMjE2LjYxNTM4NSAwIDAgMCAwIDQzMy4yMzA3Njl6IG0wIDU5LjA3NjkyM2EyNzUuNjkyMzA4IDI3NS42OTIzMDggMCAxIDEgMC01NTEuMzg0NjE2IDI3NS42OTIzMDggMjc1LjY5MjMwOCAwIDAgMSAwIDU1MS4zODQ2MTZ6IiBwLWlkPSIxNzY5MSI+PC9wYXRoPjxwYXRoIGQ9Ik04MDcuMzk4MzgzIDgyOS40Nzk3NjhtMjAuODg2ODQ3LTIwLjg4Njg0NmwwIDBxMjAuODg2ODQ2LTIwLjg4Njg0NiA0MS43NzM2OTIgMGwxMjUuMzIxMDc5IDEyNS4zMjEwNzlxMjAuODg2ODQ2IDIwLjg4Njg0NiAwIDQxLjc3MzY5M2wwIDBxLTIwLjg4Njg0NiAyMC44ODY4NDYtNDEuNzczNjkzIDBsLTEyNS4zMjEwNzgtMTI1LjMyMTA3OXEtMjAuODg2ODQ2LTIwLjg4Njg0NiAwLTQxLjc3MzY5M1oiIHAtaWQ9IjE3NjkyIj48L3BhdGg+PC9zdmc+PC9zcGFuPjwvZGl2PjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9InZyb3ciPjxkaXYgY2xhc3M9InZjb2wgdmNvbC0zMCIgPjxhIGFsdD0iTWFya2Rvd24gaXMgc3VwcG9ydGVkIiBocmVmPSJodHRwczovL2d1aWRlcy5naXRodWIuY29tL2ZlYXR1cmVzL21hc3RlcmluZy1tYXJrZG93bi8iIGNsYXNzPSJ2aWNvbiIgdGFyZ2V0PSJfYmxhbmsiPjxzdmcgY2xhc3M9Im1hcmtkb3duIiB2aWV3Qm94PSIwIDAgMTYgMTYiIHZlcnNpb249IjEuMSIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuODUgM0gxLjE1Qy41MiAzIDAgMy41MiAwIDQuMTV2Ny42OUMwIDEyLjQ4LjUyIDEzIDEuMTUgMTNoMTMuNjljLjY0IDAgMS4xNS0uNTIgMS4xNS0xLjE1di03LjdDMTYgMy41MiAxNS40OCAzIDE0Ljg1IDN6TTkgMTFIN1Y4TDUuNSA5LjkyIDQgOHYzSDJWNWgybDEuNSAyTDcgNWgydjZ6bTIuOTkuNUw5LjUgOEgxMVY1aDJ2M2gxLjVsLTIuNTEgMy41eiI+PC9wYXRoPjwvc3ZnPjwvYT48L2Rpdj48ZGl2IGNsYXNzPSJ2Y29sIHZjb2wtNzAgdGV4dC1yaWdodCI+PGJ1dHRvbiB0eXBlPSJidXR0b24iICB0aXRsZT0iQ21kfEN0cmwrRW50ZXIiIGNsYXNzPSJ2c3VibWl0IHZidG4iPicgKyBlLmkxOG4udCgic3VibWl0IikgKyAnPC9idXR0b24+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0idmVtb2ppcyIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvZGl2PjxkaXYgY2xhc3M9InZpbnB1dCB2cHJldmlldyIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvZGl2PjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9InZjb3VudCIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjxzcGFuIGNsYXNzPSJ2bnVtIj4wPC9zcGFuPiAnICsgZS5pMThuLnQoImNvbW1lbnRzIikgKyAnPC9kaXY+PGRpdiBjbGFzcz0idmxvYWQtdG9wIHRleHQtY2VudGVyIiBzdHlsZT0iZGlzcGxheTpub25lOyI+PGkgY2xhc3M9InZzcGlubmVyIiBzdHlsZT0id2lkdGg6MzBweDtoZWlnaHQ6MzBweDsiPjwvaT48L2Rpdj48ZGl2IGNsYXNzPSJ2Y2FyZHMiPjwvZGl2PjxkaXYgY2xhc3M9InZsb2FkLWJvdHRvbSB0ZXh0LWNlbnRlciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjxpIGNsYXNzPSJ2c3Bpbm5lciIgc3R5bGU9IndpZHRoOjMwcHg7aGVpZ2h0OjMwcHg7Ij48L2k+PC9kaXY+PGRpdiBjbGFzcz0idmVtcHR5IiBzdHlsZT0iZGlzcGxheTpub25lOyI+PC9kaXY+PGRpdiBjbGFzcz0idnBhZ2UgdHh0LWNlbnRlciIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+PGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJ2bW9yZSB2YnRuIj4nICsgZS5pMThuLnQoIm1vcmUiKSArICc8L2J1dHRvbj48L2Rpdj48ZGl2IGNsYXNzPSJ2cG93ZXIgdHh0LXJpZ2h0Ij5Qb3dlcmVkIEJ5IDxhIGhyZWY9Imh0dHBzOi8vdmFsaW5lLmpzLm9yZyIgdGFyZ2V0PSJfYmxhbmsiPlZhbGluZTwvYT48YnI+dicgKyBoLlZFUlNJT04gKyAiPC9kaXY+IjsKICAgICAgICAgIGUuJGVsLmh0bWwoZyksIGUuJGVsLmZpbmQoIi5jYW5jZWwtcmVwbHkiKS5vbigiY2xpY2siLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICBlLnJlc2V0KCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciBtID0gZS4kZWwuZmluZCgiLnZlbXB0eSIpOwogICAgICAgICAgZS4kbm9kYXRhID0gewogICAgICAgICAgICBzaG93OiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgIHJldHVybiBtLmh0bWwodCB8fCBlLmkxOG4udCgic29mYSIpKS5zaG93KCksIGU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGhpZGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbS5oaWRlKCksIGU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICB2YXIgRCA9IGUuJGVsLmZpbmQoIi52bG9hZC1ib3R0b20iKSwKICAgICAgICAgICAgICB3ID0gZS4kZWwuZmluZCgiLnZsb2FkLXRvcCIpOwogICAgICAgICAgZS4kbG9hZGluZyA9IHsKICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICByZXR1cm4gdCAmJiB3LnNob3coKSB8fCBELnNob3coKSwgZS4kbm9kYXRhLmhpZGUoKSwgZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGlkZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiB3LmhpZGUoKSwgRC5oaWRlKCksIDAgPT09IGUuJGVsLmZpbmQoIi52Y2FyZCIpLmxlbmd0aCAmJiBlLiRub2RhdGEuc2hvdygpLCBlOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgKDAsIHkuZGVmYXVsdCkoZS5jZmcsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB2YXIgbiA9ICgwLCBBLmRlZmF1bHQpKCIudmFsaW5lLWNvbW1lbnQtY291bnQiKSwKICAgICAgICAgICAgICByID0gMDsKICAgICAgICAgICFmdW5jdGlvbiB0KG4pIHsKICAgICAgICAgICAgdmFyIGkgPSBuW3IrK107CgogICAgICAgICAgICBpZiAoaSkgewogICAgICAgICAgICAgIHZhciBvID0gKDAsIEEuZGVmYXVsdCkoaSkuYXR0cigiZGF0YS14aWQiKTsKICAgICAgICAgICAgICAhIW8gJiYgZS5RKG8pLmNvdW50KCkudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgaS5pbm5lclRleHQgPSBlLCB0KG4pOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBpLmlubmVyVGV4dCA9IDA7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0obiksIG8gJiYgVC5hZGQoQVYuT2JqZWN0LmV4dGVuZCgiQ291bnRlciIpLCBlLmNmZy5wYXRoKSwgZS4kZWwgJiYgZS5iaW5kKCk7CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAoMCwgeC5kZWZhdWx0KShlLCB0LCAiaW5pdCIpOwogICAgICB9CiAgICB9OwoKICAgIHZhciBqID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgdmFyIG4gPSBuZXcgZSgpLAogICAgICAgICAgciA9IG5ldyBBVi5BQ0woKTsKICAgICAgci5zZXRQdWJsaWNSZWFkQWNjZXNzKCEwKSwgci5zZXRQdWJsaWNXcml0ZUFjY2VzcyghMCksIG4uc2V0QUNMKHIpLCBuLnNldCgidXJsIiwgdC51cmwpLCBuLnNldCgieGlkIiwgdC54aWQpLCBuLnNldCgidGl0bGUiLCB0LnRpdGxlKSwgbi5zZXQoInRpbWUiLCAxKSwgbi5zYXZlKCkudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICgwLCBBLmRlZmF1bHQpKHQuZWwpLmZpbmQoIi5sZWFuY2xvdWQtdmlzaXRvcnMtY291bnQiKS50ZXh0KDEpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkge30pOwogICAgfSwKICAgICAgICBUID0gewogICAgICBhZGQ6IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgdmFyIG4gPSB0aGlzLAogICAgICAgICAgICByID0gKDAsIEEuZGVmYXVsdCkoIi5sZWFuY2xvdWRfdmlzaXRvcnMsLmxlYW5jbG91ZC12aXNpdG9ycyIpOwoKICAgICAgICBpZiAoMSA9PT0gci5sZW5ndGgpIHsKICAgICAgICAgIHZhciBpID0gclswXSwKICAgICAgICAgICAgICBvID0gZGVjb2RlVVJJKCgwLCBBLmRlZmF1bHQpKGkpLmF0dHIoImlkIikpLAogICAgICAgICAgICAgIGEgPSAoMCwgQS5kZWZhdWx0KShpKS5hdHRyKCJkYXRhLWZsYWctdGl0bGUiKSwKICAgICAgICAgICAgICB1ID0gZW5jb2RlVVJJKG8pLAogICAgICAgICAgICAgIHMgPSB7CiAgICAgICAgICAgIGVsOiBpLAogICAgICAgICAgICB1cmw6IG8sCiAgICAgICAgICAgIHhpZDogdSwKICAgICAgICAgICAgdGl0bGU6IGEKICAgICAgICAgIH07CgogICAgICAgICAgaWYgKGRlY29kZVVSSShvKSA9PT0gZGVjb2RlVVJJKHQpKSB7CiAgICAgICAgICAgIHZhciBsID0gbmV3IEFWLlF1ZXJ5KGUpOwogICAgICAgICAgICBsLmVxdWFsVG8oInVybCIsIG8pLCBsLmZpbmQoKS50aGVuKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgaWYgKHQubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgdmFyIG4gPSB0WzBdOwogICAgICAgICAgICAgICAgbi5pbmNyZW1lbnQoInRpbWUiKSwgbi5zYXZlKCkudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAoMCwgQS5kZWZhdWx0KShpKS5maW5kKCIubGVhbmNsb3VkLXZpc2l0b3JzLWNvdW50IikudGV4dChlLmdldCgidGltZSIpKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7fSk7CiAgICAgICAgICAgICAgfSBlbHNlIGooZSwgcyk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgMTAxID09IHQuY29kZSA/IGooZSwgcykgOiAoMCwgeC5kZWZhdWx0KShuLCB0KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgVC5zaG93KGUsIHIpOwogICAgICAgIH0gZWxzZSBULnNob3coZSwgcik7CiAgICAgIH0sCiAgICAgIHNob3c6IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgdmFyIG4gPSBbXTsKCiAgICAgICAgaWYgKHQuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgdmFyIHQgPSAoMCwgQS5kZWZhdWx0KShlKS5maW5kKCIubGVhbmNsb3VkLXZpc2l0b3JzLWNvdW50Iik7CiAgICAgICAgICB0ICYmIHQudGV4dCgiMCIpLCBuLnB1c2goL1wlLy50ZXN0KCgwLCBBLmRlZmF1bHQpKGUpLmF0dHIoImlkIikpID8gZGVjb2RlVVJJKCgwLCBBLmRlZmF1bHQpKGUpLmF0dHIoImlkIikpIDogKDAsIEEuZGVmYXVsdCkoZSkuYXR0cigiaWQiKSk7CiAgICAgICAgfSksIG4ubGVuZ3RoKSB7CiAgICAgICAgICB2YXIgciA9IG5ldyBBVi5RdWVyeShlKTsKICAgICAgICAgIHIuY29udGFpbmVkSW4oInVybCIsIG4pLCByLmZpbmQoKS50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGUubGVuZ3RoID4gMCAmJiB0LmZvckVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICBlLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gZS5nZXQoInhpZCIpIHx8IGVuY29kZVVSSShlLmdldCgidXJsIikpLAogICAgICAgICAgICAgICAgICAgIHIgPSBlLmdldCgidGltZSIpLAogICAgICAgICAgICAgICAgICAgIGkgPSAoMCwgQS5kZWZhdWx0KSh0KSwKICAgICAgICAgICAgICAgICAgICBvID0gaS5hdHRyKCJpZCIpOwoKICAgICAgICAgICAgICAgIGlmICgoL1wlLy50ZXN0KG8pID8gbyA6IGVuY29kZVVSSShvKSkgPT0gbikgewogICAgICAgICAgICAgICAgICB2YXIgYSA9IGkuZmluZCgiLmxlYW5jbG91ZC12aXNpdG9ycy1jb3VudCIpOwogICAgICAgICAgICAgICAgICBhICYmIGEudGV4dChyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkge30pOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICBpLnByb3RvdHlwZS5RID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSB0aGlzLAogICAgICAgICAgbiA9IGFyZ3VtZW50cy5sZW5ndGgsCiAgICAgICAgICByID0gdC5jZmcuY2xhenpOYW1lOwoKICAgICAgaWYgKDEgPT0gbikgewogICAgICAgIHZhciBpID0gbmV3IEFWLlF1ZXJ5KHIpOwogICAgICAgIGkuZG9lc05vdEV4aXN0KCJyaWQiKTsKICAgICAgICB2YXIgbyA9IG5ldyBBVi5RdWVyeShyKTsKICAgICAgICBvLmVxdWFsVG8oInJpZCIsICIiKTsKICAgICAgICB2YXIgYSA9IEFWLlF1ZXJ5Lm9yKGksIG8pOwogICAgICAgIHJldHVybiAiKiIgPT09IGUgPyBhLmV4aXN0cygidXJsIikgOiBhLmVxdWFsVG8oInVybCIsIGRlY29kZVVSSShlKSksIGEuYWRkRGVzY2VuZGluZygiY3JlYXRlZEF0IiksIGEuYWRkRGVzY2VuZGluZygiaW5zZXJ0ZWRBdCIpLCBhOwogICAgICB9CgogICAgICB2YXIgdSA9IEpTT04uc3RyaW5naWZ5KGFyZ3VtZW50c1sxXSkucmVwbGFjZSgvKFxbfFxdKS9nLCAiIiksCiAgICAgICAgICBzID0gInNlbGVjdCAqIGZyb20gIiArIHIgKyAiIHdoZXJlIHJpZCBpbiAoIiArIHUgKyAiKSBvcmRlciBieSAtY3JlYXRlZEF0LC1jcmVhdGVkQXQiOwogICAgICByZXR1cm4gQVYuUXVlcnkuZG9DbG91ZFF1ZXJ5KHMpOwogICAgfSwgaS5wcm90b3R5cGUuaW5zdGFsbExvY2FsZSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHZhciBuID0gdGhpczsKICAgICAgcmV0dXJuIG4uaTE4bihlLCB0KSwgbjsKICAgIH0sIGkucHJvdG90eXBlLnNldFBhdGggPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gdGhpcy5jb25maWcucGF0aCA9IGUsIHRoaXM7CiAgICB9LCBpLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IHRoaXMsCiAgICAgICAgICB0ID0gZS4kZWwuZmluZCgiLnZlbW9qaXMiKSwKICAgICAgICAgIG4gPSBlLiRlbC5maW5kKCIudnByZXZpZXciKSwKICAgICAgICAgIHIgPSBlLiRlbC5maW5kKCIudmVtb2ppLWJ0biIpLAogICAgICAgICAgaSA9IGUuJGVsLmZpbmQoIi52cHJldmlldy1idG4iKSwKICAgICAgICAgIG8gPSBlLiRlbC5maW5kKCIudmVkaXRvciIpLAogICAgICAgICAgYSA9IGQuZGVmYXVsdC5tYXBzLAogICAgICAgICAgcyA9ICExLAogICAgICAgICAgYyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIG4gPSBbXTsKCiAgICAgICAgZm9yICh2YXIgciBpbiBhKSBhLmhhc093blByb3BlcnR5KHIpICYmICEhZC5kZWZhdWx0LmJ1aWxkKHIpICYmIG4ucHVzaCgnPGkgdGl0bGU9IicgKyByICsgJyIgPicgKyBkLmRlZmF1bHQuYnVpbGQocikgKyAiPC9pPiIpOwoKICAgICAgICB0Lmh0bWwobi5qb2luKCIiKSksIHMgPSAhMCwgdC5maW5kKCJpIikub24oImNsaWNrIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKSwgdyhvWzBdLCAiIDoiICsgKDAsIEEuZGVmYXVsdCkodGhpcykuYXR0cigidGl0bGUiKSArICI6Iik7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBlLiRlbW9qaSA9IHsKICAgICAgICBzaG93OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gIXMgJiYgYygpLCBlLiRwcmV2aWV3LmhpZGUoKSwgdC5zaG93KCksIHIuYWRkQ2xhc3MoImFjdGl2ZWQiKSwgZS4kZW1vamk7CiAgICAgICAgfSwKICAgICAgICBoaWRlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gci5yZW1vdmVDbGFzcygiYWN0aXZlZCIpLCB0LmhpZGUoKSwgZS4kZW1vamk7CiAgICAgICAgfQogICAgICB9LCBlLiRwcmV2aWV3ID0gewogICAgICAgIHNob3c6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBPID8gKGUuJGVtb2ppLmhpZGUoKSwgaS5hZGRDbGFzcygiYWN0aXZlZCIpLCBuLmh0bWwoKDAsIEUuZGVmYXVsdCkoTykpLnNob3coKSwgUigpKSA6IGUuJHByZXZpZXcuaGlkZSgpLCBlLiRwcmV2aWV3OwogICAgICAgIH0sCiAgICAgICAgaGlkZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGkucmVtb3ZlQ2xhc3MoImFjdGl2ZWQiKSwgbi5oaWRlKCkuaHRtbCgiIiksIGUuJHByZXZpZXc7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgdmFyIGYgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHZhciByID0gdC52YWwoKSB8fCAiIjsKICAgICAgICByIHx8IGUuJHByZXZpZXcuaGlkZSgpLCBPICE9IHIgJiYgKE8gPSByLCBpLmhhc0NsYXNzKCJhY3RpdmVkIikgPiAtMSAmJiBPICE9IG4uaHRtbCgpICYmIG4uaHRtbCgoMCwgRS5kZWZhdWx0KShPKSksIFIoKSk7CiAgICAgIH07CgogICAgICByLm9uKCJjbGljayIsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgci5oYXNDbGFzcygiYWN0aXZlZCIpID8gZS4kZW1vamkuaGlkZSgpIDogZS4kZW1vamkuc2hvdygpOwogICAgICB9KSwgaS5vbigiY2xpY2siLCBmdW5jdGlvbiAodCkgewogICAgICAgIGkuaGFzQ2xhc3MoImFjdGl2ZWQiKSA/IGUuJHByZXZpZXcuaGlkZSgpIDogZS4kcHJldmlldy5zaG93KCk7CiAgICAgIH0pOwogICAgICB2YXIgcCA9IGUuY2ZnLm1ldGEsCiAgICAgICAgICB2ID0ge30sCiAgICAgICAgICBtID0gewogICAgICAgIHZlZGl0b3I6ICJjb21tZW50IgogICAgICB9OwogICAgICBwLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBtWyJ2IiArIGVdID0gZTsKICAgICAgfSk7CgogICAgICBmb3IgKHZhciB5IGluIG0pIG0uaGFzT3duUHJvcGVydHkoeSkgJiYgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB0ID0gbVt5XSwKICAgICAgICAgICAgbiA9IGUuJGVsLmZpbmQoIi4iICsgeSk7CiAgICAgICAgdlt0XSA9IG4sIG4ub24oImlucHV0IGNoYW5nZSBibHVyIHByb3BlcnR5Y2hhbmdlIiwgZnVuY3Rpb24gKHIpIHsKICAgICAgICAgIGUuY2ZnLmVuYWJsZVFRICYmICJibHVyIiA9PT0gci50eXBlICYmICJuaWNrIiA9PT0gdCAmJiAobi52YWwoKSAmJiAhaXNOYU4obi52YWwoKSkgPyAoMCwgYi5mZXRjaFFRRm4pKG4udmFsKCksIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciB0ID0gZS5uaWNrIHx8IG4udmFsKCksCiAgICAgICAgICAgICAgICByID0gZS5xcSArICJAcXEuY29tIjsKICAgICAgICAgICAgKDAsIEEuZGVmYXVsdCkoIi52bmljayIpLnZhbCh0KSwgKDAsIEEuZGVmYXVsdCkoIi52bWFpbCIpLnZhbChyKSwgUy5uaWNrID0gdCwgUy5tYWlsID0gciwgUy5RUUF2YXRhciA9IGUucGljOwogICAgICAgICAgfSkgOiBBLmRlZmF1bHQuc3RvcmUuZ2V0KGguUVFDYWNoZUtleSkgJiYgQS5kZWZhdWx0LnN0b3JlLmdldChoLlFRQ2FjaGVLZXkpLm5pY2sgIT0gbi52YWwoKSAmJiAoQS5kZWZhdWx0LnN0b3JlLnJlbW92ZShoLlFRQ2FjaGVLZXkpLCBTLm5pY2sgPSBuLnZhbCgpLCBTLm1haWwgPSAiIiwgUy5RUUF2YXRhciA9ICIiKSksICJjb21tZW50IiA9PT0gdCA/ICgoMCwgbC5kZWZhdWx0KShuWzBdKSwgRChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBmKG4pOwogICAgICAgICAgfSkoKSkgOiBTW3RdID0gKDAsIEMuZGVmYXVsdCkobi52YWwoKS5yZXBsYWNlKC8oXlxzKil8KFxzKiQpL2csICIiKS5zdWJzdHJpbmcoMCwgMzUpKTsKICAgICAgICB9KTsKICAgICAgfSgpOwoKICAgICAgdmFyIEQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMV0gPyBhcmd1bWVudHNbMV0gOiAzMDAsCiAgICAgICAgICAgIG4gPSB2b2lkIDA7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciByID0gdGhpcywKICAgICAgICAgICAgICBpID0gYXJndW1lbnRzOwogICAgICAgICAgbiAmJiBjbGVhclRpbWVvdXQobiksIG4gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZS5hcHBseShyLCBpKTsKICAgICAgICAgIH0sIHQpOwogICAgICAgIH07CiAgICAgIH0sCiAgICAgICAgICB3ID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uKSB7CiAgICAgICAgICBlLmZvY3VzKCk7CiAgICAgICAgICBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKS50ZXh0ID0gdCwgZS5mb2N1cygpOwogICAgICAgIH0gZWxzZSBpZiAoZS5zZWxlY3Rpb25TdGFydCB8fCAiMCIgPT0gZS5zZWxlY3Rpb25TdGFydCkgewogICAgICAgICAgdmFyIG4gPSBlLnNlbGVjdGlvblN0YXJ0LAogICAgICAgICAgICAgIHIgPSBlLnNlbGVjdGlvbkVuZCwKICAgICAgICAgICAgICBpID0gZS5zY3JvbGxUb3A7CiAgICAgICAgICBlLnZhbHVlID0gZS52YWx1ZS5zdWJzdHJpbmcoMCwgbikgKyB0ICsgZS52YWx1ZS5zdWJzdHJpbmcociwgZS52YWx1ZS5sZW5ndGgpLCBlLmZvY3VzKCksIGUuc2VsZWN0aW9uU3RhcnQgPSBuICsgdC5sZW5ndGgsIGUuc2VsZWN0aW9uRW5kID0gbiArIHQubGVuZ3RoLCBlLnNjcm9sbFRvcCA9IGk7CiAgICAgICAgfSBlbHNlIGUuZm9jdXMoKSwgZS52YWx1ZSArPSB0OwoKICAgICAgICBEKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICBmKCgwLCBBLmRlZmF1bHQpKGUpKTsKICAgICAgICB9KSgpOwogICAgICB9LAogICAgICAgICAgayA9IHsKICAgICAgICBubzogMSwKICAgICAgICBzaXplOiBlLmNmZy5wYWdlU2l6ZSwKICAgICAgICBza2lwOiBlLmNmZy5wYWdlU2l6ZQogICAgICB9LAogICAgICAgICAgRiA9IGUuJGVsLmZpbmQoIi52cGFnZSIpOwoKICAgICAgRi5vbigiY2xpY2siLCBmdW5jdGlvbiAoZSkgewogICAgICAgIEYuaGlkZSgpLCBrLm5vKyssIF8oKTsKICAgICAgfSk7CgogICAgICB2YXIgXyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgdCA9IGsuc2l6ZSwKICAgICAgICAgICAgbiA9IGsubm8sCiAgICAgICAgICAgIHIgPSBOdW1iZXIoZS4kZWwuZmluZCgiLnZudW0iKS50ZXh0KCkpOwogICAgICAgIGUuJGxvYWRpbmcuc2hvdygpOwogICAgICAgIHZhciBpID0gZS5RKGUuY2ZnLnBhdGgpOwogICAgICAgIGkubGltaXQodCksIGkuc2tpcCgobiAtIDEpICogdCksIGkuZmluZCgpLnRoZW4oZnVuY3Rpb24gKGkpIHsKICAgICAgICAgIGlmIChrLnNraXAgPSBrLnNpemUsIGkgJiYgaS5sZW5ndGgpIHsKICAgICAgICAgICAgdmFyIG8gPSBbXTsKICAgICAgICAgICAgaS5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgby5wdXNoKHQuaWQpLCBUKHQsIGUuJGVsLmZpbmQoIi52Y2FyZHMiKSwgITApOwogICAgICAgICAgICB9KSwgZS5RKGUuY2ZnLnBhdGgsIG8pLnRoZW4oZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAoZSAmJiBlLnJlc3VsdHMgfHwgW10pLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIFQoZSwgKDAsIEEuZGVmYXVsdCkoJy52cXVvdGVbZGF0YS1zZWxmLWlkPSInICsgZS5nZXQoInJpZCIpICsgJyJdJykpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkge30pLCB0ICogbiA8IHIgPyBGLnNob3coKSA6IEYuaGlkZSgpLCBSKCk7CiAgICAgICAgICB9IGVsc2UgZS4kbm9kYXRhLnNob3coKTsKCiAgICAgICAgICBlLiRsb2FkaW5nLmhpZGUoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgZS4kbG9hZGluZy5oaWRlKCksICgwLCB4LmRlZmF1bHQpKGUsIHQsICJxdWVyeSIpOwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgZS5RKGUuY2ZnLnBhdGgpLmNvdW50KCkudGhlbihmdW5jdGlvbiAodCkgewogICAgICAgIHQgPiAwID8gKGUuJGVsLmZpbmQoIi52Y291bnQiKS5zaG93KCkuZmluZCgiLnZudW0iKS50ZXh0KHQpLCBfKCkpIDogZS4kbG9hZGluZy5oaWRlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgKDAsIHguZGVmYXVsdCkoZSwgdCwgImNvdW50Iik7CiAgICAgIH0pOwoKICAgICAgdmFyIGogPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXSA/IGFyZ3VtZW50c1swXSA6ICIiLAogICAgICAgICAgICB0ID0gLyhodHRwcz98aHR0cCk6XC9cL1stQS1aYS16MC05KyZAIy8lPz1+X3whOiwuO10rWy1BLVphLXowLTkrJkAjLyU9fl98XS9nLAogICAgICAgICAgICBuID0gZS5tYXRjaCh0KSB8fCBbXTsKICAgICAgICByZXR1cm4gbi5sZW5ndGggPiAwID8gblswXSA6ICIiOwogICAgICB9LAogICAgICAgICAgVCA9IGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgICAgdmFyIGkgPSAoMCwgQS5kZWZhdWx0KSgnPGRpdiBjbGFzcz0idmNhcmQiIGlkPSInICsgdC5pZCArICciPjwvZGl2PicpLAogICAgICAgICAgICBvID0gKDAsIEMuZGVmYXVsdCkodC5nZXQoInVhIikpLAogICAgICAgICAgICBhID0gIiI7CiAgICAgICAgbyAmJiAhL2phLy50ZXN0KGUuY2ZnLmxhbmcpICYmIChvID0gQS5kZWZhdWx0LmRldGVjdChvKSwgYSA9IG8udmVyc2lvbiA/IG8ub3MgPyAnPHNwYW4gY2xhc3M9InZzeXMiPicgKyBvLmJyb3dzZXIgKyAiICIgKyBvLnZlcnNpb24gKyAnPC9zcGFuPiA8c3BhbiBjbGFzcz0idnN5cyI+JyArIG8ub3MgKyAiICIgKyBvLm9zVmVyc2lvbiArICI8L3NwYW4+IiA6ICIiIDogJzxzcGFuIGNsYXNzPSJ2c3lzIj4nICsgby5icm93c2VyICsgIjwvc3Bhbj4iKSwgIioiID09PSBlLmNmZy5wYXRoICYmIChhID0gJzxhIGhyZWY9IicgKyB0LmdldCgidXJsIikgKyAnIiBjbGFzcz0idnN5cyI+JyArIHQuZ2V0KCJ1cmwiKSArICI8L2E+Iik7CiAgICAgICAgdmFyIHMgPSB0LmdldCgibGluayIpID8gL15odHRwcz9cOlwvXC8vLnRlc3QodC5nZXQoImxpbmsiKSkgPyB0LmdldCgibGluayIpIDogImh0dHA6Ly8iICsgdC5nZXQoImxpbmsiKSA6ICIiLAogICAgICAgICAgICBsID0gQS5kZWZhdWx0LmVzY2FwZSgoMCwgQy5kZWZhdWx0KSh0LmdldCgibmljayIpLnN1YnN0cmluZygwLCAzMCkpKSwKICAgICAgICAgICAgYyA9IHMgPyAnPGEgY2xhc3M9InZuaWNrIiByZWw9Im5vZm9sbG93IiBocmVmPSInICsgaihzKSArICciIHRhcmdldD0iX2JsYW5rIiA+JyArIGwgKyAiPC9hPiIgOiAnPHNwYW4gY2xhc3M9InZuaWNrIj4nICsgbCArICI8L3NwYW4+IiwKICAgICAgICAgICAgZiA9ICQuaGlkZSA/ICIiIDogZS5jZmcuZW5hYmxlUVEgJiYgdC5nZXQoIlFRQXZhdGFyIikgPyAoMCwgQy5kZWZhdWx0KSgnPGltZyBjbGFzcz0idmltZyIgc3JjPSInICsgaih0LmdldCgiUVFBdmF0YXIiKSkgKyAnIiByZWZlcnJlclBvbGljeT0ibm8tcmVmZXJyZXIiLz4nKSA6ICc8aW1nIGNsYXNzPSJ2aW1nIiBzcmM9IicgKyAoJC5jZG4gKyAoMCwgdS5kZWZhdWx0KSh0LmdldCgibWFpbCIpKSArICQucGFyYW1zKSArICciPicsCiAgICAgICAgICAgIHAgPSBmICsgJzxkaXYgY2xhc3M9InZoIj48ZGl2IGNsYXNzPSJ2aGVhZCI+JyArIGMgKyAiICIgKyBhICsgJzwvZGl2PjxkaXYgY2xhc3M9InZtZXRhIj48c3BhbiBjbGFzcz0idnRpbWUiID4nICsgKDAsIGcuZGVmYXVsdCkodC5nZXQoImluc2VydGVkQXQiKSwgZS5pMThuKSArICc8L3NwYW4+PHNwYW4gY2xhc3M9InZhdCIgZGF0YS12bS1pZD0iJyArICh0LmdldCgicmlkIikgfHwgdC5pZCkgKyAnIiBkYXRhLXNlbGYtaWQ9IicgKyB0LmlkICsgJyI+JyArIGUuaTE4bi50KCJyZXBseSIpICsgJzwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPSJ2Y29udGVudCIgZGF0YS1leHBhbmQ9IicgKyBlLmkxOG4udCgiZXhwYW5kIikgKyAnIj4nICsgKDAsIEUuZGVmYXVsdCkodC5nZXQoImNvbW1lbnQiKSkgKyAnPC9kaXY+PGRpdiBjbGFzcz0idnJlcGx5LXdyYXBwZXIiIGRhdGEtc2VsZi1pZD0iJyArIHQuaWQgKyAnIj48L2Rpdj48ZGl2IGNsYXNzPSJ2cXVvdGUiIGRhdGEtc2VsZi1pZD0iJyArIHQuaWQgKyAnIj48L2Rpdj48L2Rpdj4nOwogICAgICAgIGkuaHRtbChwKTsKICAgICAgICB2YXIgZCA9IGkuZmluZCgiLnZhdCIpOwogICAgICAgIGkuZmluZCgiYTpub3QoLmF0KSIpLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICgwLCBBLmRlZmF1bHQpKGUpLmF0dHIoewogICAgICAgICAgICB0YXJnZXQ6ICJfYmxhbmsiLAogICAgICAgICAgICByZWw6ICJub29wZW5lciIKICAgICAgICAgIH0pOwogICAgICAgIH0pLCByID8gbi5hcHBlbmQoaSkgOiBuLnByZXBlbmQoaSk7CiAgICAgICAgdmFyIGggPSBpLmZpbmQoIi52Y29udGVudCIpOwogICAgICAgIGggJiYgUChoKSwgZCAmJiB6KGQsIHQpOwogICAgICB9LAogICAgICAgICAgSSA9IHt9LAogICAgICAgICAgeiA9IGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgdC5vbigiY2xpY2siLCBmdW5jdGlvbiAocikgewogICAgICAgICAgdmFyIGkgPSB0LmF0dHIoImRhdGEtdm0taWQiKSwKICAgICAgICAgICAgICBvID0gdC5hdHRyKCJkYXRhLXNlbGYtaWQiKSwKICAgICAgICAgICAgICBhID0gZS4kZWwuZmluZCgiLnZ3cmFwIiksCiAgICAgICAgICAgICAgdSA9ICJAIiArIEEuZGVmYXVsdC5lc2NhcGUobi5nZXQoIm5pY2siKSk7CiAgICAgICAgICAoMCwgQS5kZWZhdWx0KSgnLnZyZXBseS13cmFwcGVyW2RhdGEtc2VsZi1pZD0iJyArIG8gKyAnIl0nKS5hcHBlbmQoYSkuZmluZCgiLmNhbmNlbC1yZXBseSIpLnNob3coKSwgSSA9IHsKICAgICAgICAgICAgYXQ6IEEuZGVmYXVsdC5lc2NhcGUodSkgKyAiICIsCiAgICAgICAgICAgIHJpZDogaSwKICAgICAgICAgICAgcGlkOiBvLAogICAgICAgICAgICBybWFpbDogbi5nZXQoIm1haWwiKQogICAgICAgICAgfSwgdi5jb21tZW50LmF0dHIoewogICAgICAgICAgICBwbGFjZWhvbGRlcjogdQogICAgICAgICAgfSlbMF0uZm9jdXMoKTsKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgICAgIFIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBlLmNmZy5tYXRoamF4ICYmICJNYXRoSmF4IiBpbiB3aW5kb3cgJiYgInZlcnNpb24iIGluIHdpbmRvdy5NYXRoSmF4ICYmICgvXjMuKi8udGVzdCh3aW5kb3cuTWF0aEpheC52ZXJzaW9uKSAmJiBNYXRoSmF4LnR5cGVzZXQoKSB8fCBNYXRoSmF4Lkh1Yi5RdWV1ZShbIlR5cGVzZXQiLCBNYXRoSmF4Lkh1YiwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnYiKV0pKSwgInJlbmRlck1hdGhJbkVsZW1lbnQiIGluIHdpbmRvdyAmJiByZW5kZXJNYXRoSW5FbGVtZW50KCgwLCBBLmRlZmF1bHQpKCIudiIpWzBdLCB7CiAgICAgICAgICAgICAgZGVsaW1pdGVyczogW3sKICAgICAgICAgICAgICAgIGxlZnQ6ICIkJCIsCiAgICAgICAgICAgICAgICByaWdodDogIiQkIiwKICAgICAgICAgICAgICAgIGRpc3BsYXk6ICEwCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgbGVmdDogIiQiLAogICAgICAgICAgICAgICAgcmlnaHQ6ICIkIiwKICAgICAgICAgICAgICAgIGRpc3BsYXk6ICExCiAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgIH0sIDEwMCk7CiAgICAgIH0sCiAgICAgICAgICBQID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGVbMF0ub2Zmc2V0SGVpZ2h0ID4gMjAwICYmIChlLmFkZENsYXNzKCJleHBhbmQiKSwgZS5vbigiY2xpY2siLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICBlLnJlbW92ZUNsYXNzKCJleHBhbmQiKTsKICAgICAgICAgIH0pKTsKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgICFmdW5jdGlvbiAodCkgewogICAgICAgIGlmICh0ID0gQS5kZWZhdWx0LnN0b3JlLmdldChoLk1ldGFDYWNoZUtleSkgfHwgdCkgZm9yICh2YXIgbiBpbiBwKSBpZiAocC5oYXNPd25Qcm9wZXJ0eShuKSkgewogICAgICAgICAgdmFyIHIgPSBwW25dOwogICAgICAgICAgZS4kZWwuZmluZCgiLnYiICsgcikudmFsKEEuZGVmYXVsdC51bmVzY2FwZSh0W3JdKSksIFNbcl0gPSB0W3JdOwogICAgICAgIH0KICAgICAgICB2YXIgaSA9IEEuZGVmYXVsdC5zdG9yZS5nZXQoaC5RUUNhY2hlS2V5KTsKICAgICAgICBTLlFRQXZhdGFyID0gZS5jZmcuZW5hYmxlUVEgJiYgISFpICYmIGkucGljIHx8ICIiOwogICAgICB9KCksIGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgUy5jb21tZW50ID0gIiIsIHYuY29tbWVudC52YWwoIiIpLCBmKHYuY29tbWVudCksIHYuY29tbWVudC5hdHRyKCJwbGFjZWhvbGRlciIsIGUuY2ZnLnBsYWNlaG9sZGVyKSwgSSA9IHt9LCBlLiRwcmV2aWV3LmhpZGUoKSwgZS4kZWwuZmluZCgiLnZwYW5lbCIpLmFwcGVuZChlLiRlbC5maW5kKCIudndyYXAiKSksIGUuJGVsLmZpbmQoIi5jYW5jZWwtcmVwbHkiKS5oaWRlKCksIE8gPSAiIiwgbC5kZWZhdWx0LnVwZGF0ZSh2LmNvbW1lbnRbMF0pOwogICAgICB9OwoKICAgICAgdmFyIE0gPSBlLiRlbC5maW5kKCIudnN1Ym1pdCIpLAogICAgICAgICAgTCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgaWYgKGUuY2ZnLnJlcXVpcmVkRmllbGRzLmluZGV4T2YoIm5pY2siKSA+IC0xICYmIFMubmljay5sZW5ndGggPCAzKSByZXR1cm4gdi5uaWNrWzBdLmZvY3VzKCksIHZvaWQgZS4kZWwuZmluZCgiLnN0YXR1cy1iYXIiKS50ZXh0KCIiICsgZS5pMThuLnQoIm5pY2tGYWlsIikpLmVtcHR5KDNlMyk7CiAgICAgICAgaWYgKGUuY2ZnLnJlcXVpcmVkRmllbGRzLmluZGV4T2YoIm1haWwiKSA+IC0xICYmICEvW1x3LVwuXStAKFtcdy1dK1wuKStbYS16XXsyLDN9Ly50ZXN0KFMubWFpbCkpIHJldHVybiB2Lm1haWxbMF0uZm9jdXMoKSwgdm9pZCBlLiRlbC5maW5kKCIuc3RhdHVzLWJhciIpLnRleHQoIiIgKyBlLmkxOG4udCgibWFpbEZhaWwiKSkuZW1wdHkoM2UzKTsKICAgICAgICBpZiAoIiIgPT0gTykgcmV0dXJuIHZvaWQgdi5jb21tZW50WzBdLmZvY3VzKCk7CgogICAgICAgIGZvciAodmFyIG4gaW4gQikgaWYgKEIuaGFzT3duUHJvcGVydHkobikpIHsKICAgICAgICAgIHZhciByID0gQltuXTsKICAgICAgICAgIE8gPSBPLnJlcGxhY2UobiwgciksIFVSTC5yZXZva2VPYmplY3RVUkwobik7CiAgICAgICAgfQoKICAgICAgICBCID0ge30sIFMuY29tbWVudCA9ICgwLCBDLmRlZmF1bHQpKE8pLCBTLm5pY2sgPSBTLm5pY2sgfHwgIkFub255bW91cyI7CiAgICAgICAgdmFyIGkgPSBBLmRlZmF1bHQuc3RvcmUuZ2V0KCJ2bHgiKTsKCiAgICAgICAgaWYgKGkpIHsKICAgICAgICAgIGlmIChEYXRlLm5vdygpIC8gMWUzIC0gaSAvIDFlMyA8IDIwKSByZXR1cm4gdm9pZCBlLiRlbC5maW5kKCIuc3RhdHVzLWJhciIpLnRleHQoZS5pMThuLnQoImJ1c3kiKSkuZW1wdHkoM2UzKTsKICAgICAgICB9CgogICAgICAgIFUoKTsKICAgICAgfSwKICAgICAgICAgIE4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGUgPSBuZXcgQVYuQUNMKCk7CiAgICAgICAgcmV0dXJuIGUuc2V0UHVibGljUmVhZEFjY2VzcyghMCksIGUuc2V0UHVibGljV3JpdGVBY2Nlc3MoITEpLCBlOwogICAgICB9LAogICAgICAgICAgVSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBBLmRlZmF1bHQuc3RvcmUuc2V0KCJ2bHgiLCBEYXRlLm5vdygpKSwgTS5hdHRyKHsKICAgICAgICAgIGRpc2FibGVkOiAhMAogICAgICAgIH0pLCBlLiRsb2FkaW5nLnNob3coITApOwogICAgICAgIHZhciB0ID0gQVYuT2JqZWN0LmV4dGVuZChlLmNmZy5jbGF6ek5hbWUgfHwgIkNvbW1lbnQiKSwKICAgICAgICAgICAgbiA9IG5ldyB0KCk7CgogICAgICAgIGlmIChTLnVybCA9IGRlY29kZVVSSShlLmNmZy5wYXRoKSwgUy5pbnNlcnRlZEF0ID0gbmV3IERhdGUoKSwgSS5yaWQpIHsKICAgICAgICAgIHZhciByID0gSS5waWQgfHwgSS5yaWQ7CiAgICAgICAgICBuLnNldCgicmlkIiwgSS5yaWQpLCBuLnNldCgicGlkIiwgciksIFMuY29tbWVudCA9IE8ucmVwbGFjZSgiPHA+IiwgJzxwPjxhIGNsYXNzPSJhdCIgaHJlZj0iIycgKyByICsgJyI+JyArIEkuYXQgKyAiPC9hPiAsICIpOwogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgaSBpbiBTKSBpZiAoUy5oYXNPd25Qcm9wZXJ0eShpKSkgewogICAgICAgICAgdmFyIG8gPSBTW2ldOwogICAgICAgICAgbi5zZXQoaSwgbyk7CiAgICAgICAgfQoKICAgICAgICBuLnNldEFDTChOKCkpLCBuLnNhdmUoKS50aGVuKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAiQW5vbnltb3VzIiAhPSBTLm5pY2sgJiYgQS5kZWZhdWx0LnN0b3JlLnNldChoLk1ldGFDYWNoZUtleSwgewogICAgICAgICAgICBuaWNrOiBTLm5pY2ssCiAgICAgICAgICAgIGxpbms6IFMubGluaywKICAgICAgICAgICAgbWFpbDogUy5tYWlsCiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciBuID0gZS4kZWwuZmluZCgiLnZudW0iKTsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBJLnJpZCA/IFQodCwgKDAsIEEuZGVmYXVsdCkoJy52cXVvdGVbZGF0YS1zZWxmLWlkPSInICsgSS5yaWQgKyAnIl0nKSwgITApIDogKE51bWJlcihuLnRleHQoKSkgPyBuLnRleHQoTnVtYmVyKG4udGV4dCgpKSArIDEpIDogZS4kZWwuZmluZCgiLnZjb3VudCIpLnNob3coKS5maW5kKCIudm51bSIpLnRleHQoTnVtYmVyKG4udGV4dCgpKSArIDEpLCBUKHQsIGUuJGVsLmZpbmQoIi52Y2FyZHMiKSksIGsuc2tpcCsrKSwgTS5yZW1vdmVBdHRyKCJkaXNhYmxlZCIpLCBlLiRsb2FkaW5nLmhpZGUoKSwgZS5yZXNldCgpOwogICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAoMCwgeC5kZWZhdWx0KShlLCB0LCAic2F2ZSIpOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAoMCwgeC5kZWZhdWx0KShlLCB0LCAiY29tbWl0RXZ0Iik7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBNLm9uKCJjbGljayIsIEwpLCAoMCwgQS5kZWZhdWx0KShkb2N1bWVudCkub24oImtleWRvd24iLCBmdW5jdGlvbiAoZSkgewogICAgICAgIGUgPSB3aW5kb3cuZXZlbnQgfHwgZTsKICAgICAgICB2YXIgdCA9IGUua2V5Q29kZSB8fCBlLndoaWNoIHx8IGUuY2hhckNvZGU7CiAgICAgICAgKChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSAmJiAxMyA9PT0gdCAmJiBMKCksIDkgPT09IHQpICYmICJ2ZWRpdG9yIiA9PSAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5pZCB8fCAiIikgJiYgKGUucHJldmVudERlZmF1bHQoKSwgdyhvWzBdLCAiICAgICIpKTsKICAgICAgfSkub24oInBhc3RlIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdCA9ICJjbGlwYm9hcmREYXRhIiBpbiBlID8gZS5jbGlwYm9hcmREYXRhIDogZS5vcmlnaW5hbEV2ZW50ICYmIGUub3JpZ2luYWxFdmVudC5jbGlwYm9hcmREYXRhIHx8IHdpbmRvdy5jbGlwYm9hcmREYXRhOwogICAgICAgIHQgJiYgUSh0Lml0ZW1zLCAhMCk7CiAgICAgIH0pLCBvLm9uKCJkcmFnZW50ZXIgZHJhZ2xlYXZlIGRyYWdvdmVyIGRyb3AiLCBmdW5jdGlvbiAoZSkgewogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCksIGUucHJldmVudERlZmF1bHQoKSwgImRyb3AiID09PSBlLnR5cGUgJiYgUShlLmRhdGFUcmFuc2Zlci5pdGVtcyk7CiAgICAgIH0pOwoKICAgICAgdmFyIFEgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIGZvciAodmFyIG4gPSAwLCByID0gZS5sZW5ndGg7IG4gPCByOyBuKyspIHsKICAgICAgICAgIHZhciBpID0gZVtuXTsKICAgICAgICAgIGlmICgic3RyaW5nIiA9PT0gaS5raW5kICYmIGkudHlwZS5tYXRjaCgiXnRleHQvaHRtbCIpKSAhdCAmJiBpLmdldEFzU3RyaW5nKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGUgJiYgdyhvWzBdLCBlLnJlcGxhY2UoLzxbXj5dKz4vZywgIiIpKTsKICAgICAgICAgIH0pO2Vsc2UgaWYgKGkudHlwZS5pbmRleE9mKCJpbWFnZSIpID4gLTEpIHsKICAgICAgICAgICAgcShpLmdldEFzRmlsZSgpKTsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICAgICAgcSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciB0ID0gVVJMLmNyZWF0ZU9iamVjdFVSTChlKSwKICAgICAgICAgICAgICBuID0gIiFbaW1hZ2VdKCIgKyB0ICsgIikgIiwKICAgICAgICAgICAgICByID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgIHcob1swXSwgbiksIHIub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBCW3RdID0gci5yZXN1bHQ7CiAgICAgICAgICB9LCByLnJlYWRBc0RhdGFVUkwoZSk7CiAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgfTsKICAgIH0sIGUuZXhwb3J0cyA9IG8sIGUuZXhwb3J0cy5kZWZhdWx0ID0gbzsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHQuX19lc01vZHVsZSA9ICEwOwoKICAgIHZhciByID0gbigzKSwKICAgICAgICBpID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsKICAgICAgICBkZWZhdWx0OiBlCiAgICAgIH07CiAgICB9KHIpLAogICAgICAgIG8gPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICBpLmRlZmF1bHQuYWpheCh7CiAgICAgICAgdXJsOiAiaHR0cHM6Ly9hcHAtcm91dGVyLmNvbS8yL3JvdXRlIiwKICAgICAgICBib2R5OiB7CiAgICAgICAgICBhcHBJZDogZQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgIGUuanNvbigpLnRoZW4oZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiB0ICYmIHQoIi8vIiArIGUuYXBpX3NlcnZlcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfTsKCiAgICB0LmRlZmF1bHQgPSB7CiAgICAgIGdldEFwaTogbwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHQuX19lc01vZHVsZSA9ICEwOwoKICAgIHZhciByID0gbigzKSwKICAgICAgICBpID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsKICAgICAgICBkZWZhdWx0OiBlCiAgICAgIH07CiAgICB9KHIpLAogICAgICAgIG8gPSAhMTsKCiAgICB0LmRlZmF1bHQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICBpZiAoIkFWIiBpbiB3aW5kb3cpIHsKICAgICAgICB2YXIgbiA9IHdpbmRvdy5BVi52ZXJzaW9uIHx8IHdpbmRvdy5BVi5WRVJTSU9OOwogICAgICAgIHBhcnNlSW50KG4uc3BsaXQoIi4iKVswXSkgPiAyID8gbyA9ICEhQVYuYXBwbGljYXRpb25JZCAmJiAhIUFWLmFwcGxpY2F0aW9uS2V5IDogaS5kZWZhdWx0LmRlbGV0ZUluV2luKCJBViIsIDApOwogICAgICB9CgogICAgICBvID8gdCAmJiB0KCkgOiBpLmRlZmF1bHQuc2RrTG9hZGVyKCIvL3VucGtnLmNvbS9sZWFuY2xvdWQtc3RvcmFnZUAzL2Rpc3QvYXYtbWluLmpzIiwgIkFWIiwgZnVuY3Rpb24gKG4pIHsKICAgICAgICB2YXIgciA9ICJodHRwczovLyIsCiAgICAgICAgICAgIGkgPSAiIiwKICAgICAgICAgICAgYSA9IGUuYXBwX2lkIHx8IGUuYXBwSWQsCiAgICAgICAgICAgIHUgPSBlLmFwcF9rZXkgfHwgZS5hcHBLZXk7CiAgICAgICAgaWYgKCFlLnNlcnZlclVSTHMpIHN3aXRjaCAoYS5zbGljZSgtOSkpIHsKICAgICAgICAgIGNhc2UgIi05Tmg5ajBWYSI6CiAgICAgICAgICAgIHIgKz0gInRhYi4iOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICItTWRZWGJNTUkiOgogICAgICAgICAgICByICs9ICJ1cy4iOwogICAgICAgIH0KICAgICAgICBpID0gZS5zZXJ2ZXJVUkxzIHx8IHIgKyAibGVhbmNsb3VkLmNuIiwgQVYuaW5pdCh7CiAgICAgICAgICBhcHBJZDogYSwKICAgICAgICAgIGFwcEtleTogdSwKICAgICAgICAgIHNlcnZlclVSTHM6IGkKICAgICAgICB9KSwgbyA9ICEwLCB0ICYmIHQoKTsKICAgICAgfSk7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgZnVuY3Rpb24gcihlKSB7CiAgICAgIHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7CiAgICAgICAgZGVmYXVsdDogZQogICAgICB9OwogICAgfQoKICAgIHQuX19lc01vZHVsZSA9ICEwOwogICAgdmFyIGkgPSBuKDg0KSwKICAgICAgICBvID0gcihpKSwKICAgICAgICBhID0gbigxMDApLAogICAgICAgIHUgPSByKGEpLAogICAgICAgIHMgPSBuKDEwMSksCiAgICAgICAgbCA9IHIocyksCiAgICAgICAgYyA9IG4oOTgpLAogICAgICAgIGYgPSByKGMpLAogICAgICAgIHAgPSBuKDk5KSwKICAgICAgICBkID0gcihwKSwKICAgICAgICBoID0gewogICAgICB6aDogdS5kZWZhdWx0LAogICAgICAiemgtY24iOiB1LmRlZmF1bHQsCiAgICAgICJ6aC1DTiI6IHUuZGVmYXVsdCwKICAgICAgInpoLVRXIjogbC5kZWZhdWx0LAogICAgICBlbjogZi5kZWZhdWx0LAogICAgICAiZW4tVVMiOiBmLmRlZmF1bHQsCiAgICAgIGphOiBkLmRlZmF1bHQsCiAgICAgICJqYS1KUCI6IGQuZGVmYXVsdAogICAgfTsKCiAgICB0LmRlZmF1bHQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICByZXR1cm4gIWhbZV0gJiYgZSAmJiB0ICYmIChoW2VdID0gdCksIG5ldyBvLmRlZmF1bHQoewogICAgICAgIHBocmFzZXM6IGhbZSB8fCAiemgiXSwKICAgICAgICBsb2NhbGU6IGUKICAgICAgfSk7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdC5fX2VzTW9kdWxlID0gITAsIHQuZGVmYXVsdCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIGlmIChlLiRlbCAmJiBlLiRsb2FkaW5nLmhpZGUoKS4kbm9kYXRhLmhpZGUoKSwgIltvYmplY3QgRXJyb3JdIiA9PT0ge30udG9TdHJpbmcuY2FsbCh0KSkgewogICAgICAgIHZhciBuID0gdC5jb2RlIHx8IHQubWVzc2FnZSB8fCB0LmVycm9yIHx8ICIiOwogICAgICAgIGlmIChpc05hTihuKSkgZS4kZWwgJiYgZS4kbm9kYXRhLnNob3coJzxwcmUgc3R5bGU9InRleHQtYWxpZ246bGVmdDsiPiAnICsgSlNPTi5zdHJpbmdpZnkodCkgKyAiPC9wcmU+Iik7ZWxzZSB7CiAgICAgICAgICB2YXIgciA9IGUuaTE4bi50KCJjb2RlLSIgKyBuKSwKICAgICAgICAgICAgICBpID0gKHIgPT0gImNvZGUtIiArIG4gPyB2b2lkIDAgOiByKSB8fCB0Lm1lc3NhZ2UgfHwgdC5lcnJvciB8fCAiIjsKICAgICAgICAgIDEwMSA9PSBuIHx8IC0xID09IG4gPyBlLiRub2RhdGEuc2hvdygpIDogZS4kZWwgJiYgZS4kbm9kYXRhLnNob3coJzxwcmUgc3R5bGU9InRleHQtYWxpZ246bGVmdDsiPkNvZGUgJyArIG4gKyAiOiAiICsgaSArICI8L3ByZT4iKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBlLiRlbCAmJiBlLiRub2RhdGEuc2hvdygnPHByZSBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyI+JyArIEpTT04uc3RyaW5naWZ5KHQpICsgIjwvcHJlPiIpOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogewogICAgICAgIGRlZmF1bHQ6IGUKICAgICAgfTsKICAgIH0KCiAgICB0Ll9fZXNNb2R1bGUgPSAhMDsKICAgIHZhciBpID0gbig4MyksCiAgICAgICAgbyA9IG4oNzkpLAogICAgICAgIGEgPSByKG8pLAogICAgICAgIHUgPSBuKDMpLAogICAgICAgIHMgPSByKHUpLAogICAgICAgIGwgPSBuKDEyKSwKICAgICAgICBjID0gcihsKSwKICAgICAgICBmID0gbigxMyksCiAgICAgICAgcCA9IHIoZiksCiAgICAgICAgZCA9IG5ldyBpLm1hcmtlZC5SZW5kZXJlcigpOwogICAgZC5jb2RlID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgcmV0dXJuICc8cHJlPjxjb2RlIGNsYXNzPSJobGpzIGxhbmd1YWdlLScgKyB0ICsgJyI+JyArICh0ICYmIGhsanMuZ2V0TGFuZ3VhZ2UodCkgPyBobGpzLmhpZ2hsaWdodCh0LCBlKS52YWx1ZSA6IHMuZGVmYXVsdC5lc2NhcGUoZSkpICsgIjwvY29kZT48L3ByZT4iOwogICAgfSwgaS5tYXJrZWQuc2V0T3B0aW9ucyh7CiAgICAgIHJlbmRlcmVyOiAiaGxqcyIgaW4gd2luZG93ID8gZCA6IG5ldyBpLm1hcmtlZC5SZW5kZXJlcigpLAogICAgICBoaWdobGlnaHQ6IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgcmV0dXJuICJobGpzIiBpbiB3aW5kb3cgPyB0ICYmIGhsanMuZ2V0TGFuZ3VhZ2UodCkgJiYgaGxqcy5oaWdobGlnaHQodCwgZSwgITApLnZhbHVlIHx8IGhsanMuaGlnaGxpZ2h0QXV0byhlKS52YWx1ZSA6ICgwLCBhLmRlZmF1bHQpKGUpOwogICAgICB9LAogICAgICBnZm06ICEwLAogICAgICB0YWJsZXM6ICEwLAogICAgICBicmVha3M6ICEwLAogICAgICBwZWRhbnRpYzogITEsCiAgICAgIHNhbml0aXplOiAhMSwKICAgICAgc21hcnRMaXN0czogITAsCiAgICAgIHNtYXJ0eXBhbnRzOiAhMCwKICAgICAgaGVhZGVyUHJlZml4OiAidi0iCiAgICB9KSwgdC5kZWZhdWx0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuICgwLCBwLmRlZmF1bHQpKCgwLCBpLm1hcmtlZCkoYy5kZWZhdWx0LnBhcnNlKGUsICEwKSkpOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHQuX19lc01vZHVsZSA9ICEwLCB0LnJlY29yZElQRm4gPSB0LmZldGNoUVFGbiA9IHZvaWQgMDsKCiAgICB2YXIgciA9IG4oMyksCiAgICAgICAgaSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7CiAgICAgICAgZGVmYXVsdDogZQogICAgICB9OwogICAgfShyKSwKICAgICAgICBvID0gbig2KSwKICAgICAgICBhID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgdmFyIG4gPSBpLmRlZmF1bHQuc3RvcmUuZ2V0KG8uUVFDYWNoZUtleSk7CiAgICAgIG4gJiYgbi5xcSA9PSBlID8gdCAmJiB0KG4pIDogaS5kZWZhdWx0LmFqYXgoewogICAgICAgIHVybDogIi8vdmFsaW5lLmFwaS5pb2xpdS5jbi9nZXRxcWluZm8iLAogICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgIGJvZHk6IHsKICAgICAgICAgIHFxOiBlCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgZS5qc29uKCkudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICAgZS5lcnJtc2cgfHwgKGkuZGVmYXVsdC5zdG9yZS5zZXQoby5RUUNhY2hlS2V5LCBlKSwgdCAmJiB0KGUpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgICAgIHUgPSBmdW5jdGlvbiAoZSkgewogICAgICBpLmRlZmF1bHQuYWpheCh7CiAgICAgICAgdXJsOiAiaHR0cHM6Ly9mb3JnZS5zcGVlZHRlc3QuY24vYXBpL2xvY2F0aW9uL2luZm8iLAogICAgICAgIG1ldGhvZDogImdldCIKICAgICAgfSkudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLmpzb24oKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAodCkgewogICAgICAgIGUgJiYgZSh0LmlwKTsKICAgICAgfSk7CiAgICB9OwoKICAgIHQuZmV0Y2hRUUZuID0gYSwgdC5yZWNvcmRJUEZuID0gdTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHQuX19lc01vZHVsZSA9ICEwLCB0LmRlZmF1bHQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICBpZiAoIWUpIHJldHVybiAiSW52YWxpZCBEYXRlLiI7CgogICAgICB0cnkgewogICAgICAgIHZhciBuID0gaShlKS5nZXRUaW1lKCk7CiAgICAgICAgaWYgKGlzTmFOKG4pKSByZXR1cm4gIkludmFsaWQgRGF0ZS4iOwogICAgICAgIHZhciBvID0gbmV3IERhdGUoKS5nZXRUaW1lKCksCiAgICAgICAgICAgIGEgPSBvIC0gbiwKICAgICAgICAgICAgdSA9IE1hdGguZmxvb3IoYSAvIDg2NGU1KTsKCiAgICAgICAgaWYgKDAgPT09IHUpIHsKICAgICAgICAgIHZhciBzID0gYSAlIDg2NGU1LAogICAgICAgICAgICAgIGwgPSBNYXRoLmZsb29yKHMgLyAzNmU1KTsKCiAgICAgICAgICBpZiAoMCA9PT0gbCkgewogICAgICAgICAgICB2YXIgYyA9IHMgJSAzNmU1LAogICAgICAgICAgICAgICAgZiA9IE1hdGguZmxvb3IoYyAvIDZlNCk7CgogICAgICAgICAgICBpZiAoMCA9PT0gZikgewogICAgICAgICAgICAgIHZhciBwID0gYyAlIDZlNDsKICAgICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChwIC8gMWUzKSArICIgIiArIHQudCgic2Vjb25kcyIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZiArICIgIiArIHQudCgibWludXRlcyIpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBsICsgIiAiICsgdC50KCJob3VycyIpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHUgPCAwID8gdC50KCJub3ciKSA6IHUgPCA4ID8gdSArICIgIiArIHQudCgiZGF5cyIpIDogcihlKTsKICAgICAgfSBjYXRjaCAoZSkge30KICAgIH07CgogICAgdmFyIHIgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IG8oZS5nZXREYXRlKCksIDIpLAogICAgICAgICAgbiA9IG8oZS5nZXRNb250aCgpICsgMSwgMik7CiAgICAgIHJldHVybiBvKGUuZ2V0RnVsbFllYXIoKSwgMikgKyAiLSIgKyBuICsgIi0iICsgdDsKICAgIH0sCiAgICAgICAgaSA9IGZ1bmN0aW9uIGUodCkgewogICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIERhdGUgPyB0IDogIWlzTmFOKHQpIHx8IC9eXGQrJC8udGVzdCh0KSA/IG5ldyBEYXRlKHBhcnNlSW50KHQpKSA6IC9HTVQvLnRlc3QodCB8fCAiIikgPyBlKG5ldyBEYXRlKHQpLmdldFRpbWUoKSkgOiAodCA9ICh0IHx8ICIiKS5yZXBsYWNlKC8oXlxzKil8KFxzKiQpL2csICIiKS5yZXBsYWNlKC9cLlxkKy8sICIiKS5yZXBsYWNlKC8tLywgIi8iKS5yZXBsYWNlKC8tLywgIi8iKS5yZXBsYWNlKC8oXGQpVChcZCkvLCAiJDEgJDIiKS5yZXBsYWNlKC9aLywgIiBVVEMiKS5yZXBsYWNlKC8oWystXVxkXGQpOj8oXGRcZCkvLCAiICQxJDIiKSwgbmV3IERhdGUodCkpOwogICAgfSwKICAgICAgICBvID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgZm9yICh2YXIgbiA9IGUudG9TdHJpbmcoKTsgbi5sZW5ndGggPCB0OykgbiA9ICIwIiArIG47CgogICAgICByZXR1cm4gbjsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgIHZhciByOwogICAgIWZ1bmN0aW9uIChpKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIGZ1bmN0aW9uIG8oZSwgdCkgewogICAgICAgIHZhciBuID0gKDY1NTM1ICYgZSkgKyAoNjU1MzUgJiB0KTsKICAgICAgICByZXR1cm4gKGUgPj4gMTYpICsgKHQgPj4gMTYpICsgKG4gPj4gMTYpIDw8IDE2IHwgNjU1MzUgJiBuOwogICAgICB9CgogICAgICBmdW5jdGlvbiBhKGUsIHQpIHsKICAgICAgICByZXR1cm4gZSA8PCB0IHwgZSA+Pj4gMzIgLSB0OwogICAgICB9CgogICAgICBmdW5jdGlvbiB1KGUsIHQsIG4sIHIsIGksIHUpIHsKICAgICAgICByZXR1cm4gbyhhKG8obyh0LCBlKSwgbyhyLCB1KSksIGkpLCBuKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gcyhlLCB0LCBuLCByLCBpLCBvLCBhKSB7CiAgICAgICAgcmV0dXJuIHUodCAmIG4gfCB+dCAmIHIsIGUsIHQsIGksIG8sIGEpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBsKGUsIHQsIG4sIHIsIGksIG8sIGEpIHsKICAgICAgICByZXR1cm4gdSh0ICYgciB8IG4gJiB+ciwgZSwgdCwgaSwgbywgYSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGMoZSwgdCwgbiwgciwgaSwgbywgYSkgewogICAgICAgIHJldHVybiB1KHQgXiBuIF4gciwgZSwgdCwgaSwgbywgYSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGYoZSwgdCwgbiwgciwgaSwgbywgYSkgewogICAgICAgIHJldHVybiB1KG4gXiAodCB8IH5yKSwgZSwgdCwgaSwgbywgYSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHAoZSwgdCkgewogICAgICAgIGVbdCA+PiA1XSB8PSAxMjggPDwgdCAlIDMyLCBlWzE0ICsgKHQgKyA2NCA+Pj4gOSA8PCA0KV0gPSB0OwogICAgICAgIHZhciBuLAogICAgICAgICAgICByLAogICAgICAgICAgICBpLAogICAgICAgICAgICBhLAogICAgICAgICAgICB1LAogICAgICAgICAgICBwID0gMTczMjU4NDE5MywKICAgICAgICAgICAgZCA9IC0yNzE3MzM4NzksCiAgICAgICAgICAgIGggPSAtMTczMjU4NDE5NCwKICAgICAgICAgICAgdiA9IDI3MTczMzg3ODsKCiAgICAgICAgZm9yIChuID0gMDsgbiA8IGUubGVuZ3RoOyBuICs9IDE2KSByID0gcCwgaSA9IGQsIGEgPSBoLCB1ID0gdiwgcCA9IHMocCwgZCwgaCwgdiwgZVtuXSwgNywgLTY4MDg3NjkzNiksIHYgPSBzKHYsIHAsIGQsIGgsIGVbbiArIDFdLCAxMiwgLTM4OTU2NDU4NiksIGggPSBzKGgsIHYsIHAsIGQsIGVbbiArIDJdLCAxNywgNjA2MTA1ODE5KSwgZCA9IHMoZCwgaCwgdiwgcCwgZVtuICsgM10sIDIyLCAtMTA0NDUyNTMzMCksIHAgPSBzKHAsIGQsIGgsIHYsIGVbbiArIDRdLCA3LCAtMTc2NDE4ODk3KSwgdiA9IHModiwgcCwgZCwgaCwgZVtuICsgNV0sIDEyLCAxMjAwMDgwNDI2KSwgaCA9IHMoaCwgdiwgcCwgZCwgZVtuICsgNl0sIDE3LCAtMTQ3MzIzMTM0MSksIGQgPSBzKGQsIGgsIHYsIHAsIGVbbiArIDddLCAyMiwgLTQ1NzA1OTgzKSwgcCA9IHMocCwgZCwgaCwgdiwgZVtuICsgOF0sIDcsIDE3NzAwMzU0MTYpLCB2ID0gcyh2LCBwLCBkLCBoLCBlW24gKyA5XSwgMTIsIC0xOTU4NDE0NDE3KSwgaCA9IHMoaCwgdiwgcCwgZCwgZVtuICsgMTBdLCAxNywgLTQyMDYzKSwgZCA9IHMoZCwgaCwgdiwgcCwgZVtuICsgMTFdLCAyMiwgLTE5OTA0MDQxNjIpLCBwID0gcyhwLCBkLCBoLCB2LCBlW24gKyAxMl0sIDcsIDE4MDQ2MDM2ODIpLCB2ID0gcyh2LCBwLCBkLCBoLCBlW24gKyAxM10sIDEyLCAtNDAzNDExMDEpLCBoID0gcyhoLCB2LCBwLCBkLCBlW24gKyAxNF0sIDE3LCAtMTUwMjAwMjI5MCksIGQgPSBzKGQsIGgsIHYsIHAsIGVbbiArIDE1XSwgMjIsIDEyMzY1MzUzMjkpLCBwID0gbChwLCBkLCBoLCB2LCBlW24gKyAxXSwgNSwgLTE2NTc5NjUxMCksIHYgPSBsKHYsIHAsIGQsIGgsIGVbbiArIDZdLCA5LCAtMTA2OTUwMTYzMiksIGggPSBsKGgsIHYsIHAsIGQsIGVbbiArIDExXSwgMTQsIDY0MzcxNzcxMyksIGQgPSBsKGQsIGgsIHYsIHAsIGVbbl0sIDIwLCAtMzczODk3MzAyKSwgcCA9IGwocCwgZCwgaCwgdiwgZVtuICsgNV0sIDUsIC03MDE1NTg2OTEpLCB2ID0gbCh2LCBwLCBkLCBoLCBlW24gKyAxMF0sIDksIDM4MDE2MDgzKSwgaCA9IGwoaCwgdiwgcCwgZCwgZVtuICsgMTVdLCAxNCwgLTY2MDQ3ODMzNSksIGQgPSBsKGQsIGgsIHYsIHAsIGVbbiArIDRdLCAyMCwgLTQwNTUzNzg0OCksIHAgPSBsKHAsIGQsIGgsIHYsIGVbbiArIDldLCA1LCA1Njg0NDY0MzgpLCB2ID0gbCh2LCBwLCBkLCBoLCBlW24gKyAxNF0sIDksIC0xMDE5ODAzNjkwKSwgaCA9IGwoaCwgdiwgcCwgZCwgZVtuICsgM10sIDE0LCAtMTg3MzYzOTYxKSwgZCA9IGwoZCwgaCwgdiwgcCwgZVtuICsgOF0sIDIwLCAxMTYzNTMxNTAxKSwgcCA9IGwocCwgZCwgaCwgdiwgZVtuICsgMTNdLCA1LCAtMTQ0NDY4MTQ2NyksIHYgPSBsKHYsIHAsIGQsIGgsIGVbbiArIDJdLCA5LCAtNTE0MDM3ODQpLCBoID0gbChoLCB2LCBwLCBkLCBlW24gKyA3XSwgMTQsIDE3MzUzMjg0NzMpLCBkID0gbChkLCBoLCB2LCBwLCBlW24gKyAxMl0sIDIwLCAtMTkyNjYwNzczNCksIHAgPSBjKHAsIGQsIGgsIHYsIGVbbiArIDVdLCA0LCAtMzc4NTU4KSwgdiA9IGModiwgcCwgZCwgaCwgZVtuICsgOF0sIDExLCAtMjAyMjU3NDQ2MyksIGggPSBjKGgsIHYsIHAsIGQsIGVbbiArIDExXSwgMTYsIDE4MzkwMzA1NjIpLCBkID0gYyhkLCBoLCB2LCBwLCBlW24gKyAxNF0sIDIzLCAtMzUzMDk1NTYpLCBwID0gYyhwLCBkLCBoLCB2LCBlW24gKyAxXSwgNCwgLTE1MzA5OTIwNjApLCB2ID0gYyh2LCBwLCBkLCBoLCBlW24gKyA0XSwgMTEsIDEyNzI4OTMzNTMpLCBoID0gYyhoLCB2LCBwLCBkLCBlW24gKyA3XSwgMTYsIC0xNTU0OTc2MzIpLCBkID0gYyhkLCBoLCB2LCBwLCBlW24gKyAxMF0sIDIzLCAtMTA5NDczMDY0MCksIHAgPSBjKHAsIGQsIGgsIHYsIGVbbiArIDEzXSwgNCwgNjgxMjc5MTc0KSwgdiA9IGModiwgcCwgZCwgaCwgZVtuXSwgMTEsIC0zNTg1MzcyMjIpLCBoID0gYyhoLCB2LCBwLCBkLCBlW24gKyAzXSwgMTYsIC03MjI1MjE5NzkpLCBkID0gYyhkLCBoLCB2LCBwLCBlW24gKyA2XSwgMjMsIDc2MDI5MTg5KSwgcCA9IGMocCwgZCwgaCwgdiwgZVtuICsgOV0sIDQsIC02NDAzNjQ0ODcpLCB2ID0gYyh2LCBwLCBkLCBoLCBlW24gKyAxMl0sIDExLCAtNDIxODE1ODM1KSwgaCA9IGMoaCwgdiwgcCwgZCwgZVtuICsgMTVdLCAxNiwgNTMwNzQyNTIwKSwgZCA9IGMoZCwgaCwgdiwgcCwgZVtuICsgMl0sIDIzLCAtOTk1MzM4NjUxKSwgcCA9IGYocCwgZCwgaCwgdiwgZVtuXSwgNiwgLTE5ODYzMDg0NCksIHYgPSBmKHYsIHAsIGQsIGgsIGVbbiArIDddLCAxMCwgMTEyNjg5MTQxNSksIGggPSBmKGgsIHYsIHAsIGQsIGVbbiArIDE0XSwgMTUsIC0xNDE2MzU0OTA1KSwgZCA9IGYoZCwgaCwgdiwgcCwgZVtuICsgNV0sIDIxLCAtNTc0MzQwNTUpLCBwID0gZihwLCBkLCBoLCB2LCBlW24gKyAxMl0sIDYsIDE3MDA0ODU1NzEpLCB2ID0gZih2LCBwLCBkLCBoLCBlW24gKyAzXSwgMTAsIC0xODk0OTg2NjA2KSwgaCA9IGYoaCwgdiwgcCwgZCwgZVtuICsgMTBdLCAxNSwgLTEwNTE1MjMpLCBkID0gZihkLCBoLCB2LCBwLCBlW24gKyAxXSwgMjEsIC0yMDU0OTIyNzk5KSwgcCA9IGYocCwgZCwgaCwgdiwgZVtuICsgOF0sIDYsIDE4NzMzMTMzNTkpLCB2ID0gZih2LCBwLCBkLCBoLCBlW24gKyAxNV0sIDEwLCAtMzA2MTE3NDQpLCBoID0gZihoLCB2LCBwLCBkLCBlW24gKyA2XSwgMTUsIC0xNTYwMTk4MzgwKSwgZCA9IGYoZCwgaCwgdiwgcCwgZVtuICsgMTNdLCAyMSwgMTMwOTE1MTY0OSksIHAgPSBmKHAsIGQsIGgsIHYsIGVbbiArIDRdLCA2LCAtMTQ1NTIzMDcwKSwgdiA9IGYodiwgcCwgZCwgaCwgZVtuICsgMTFdLCAxMCwgLTExMjAyMTAzNzkpLCBoID0gZihoLCB2LCBwLCBkLCBlW24gKyAyXSwgMTUsIDcxODc4NzI1OSksIGQgPSBmKGQsIGgsIHYsIHAsIGVbbiArIDldLCAyMSwgLTM0MzQ4NTU1MSksIHAgPSBvKHAsIHIpLCBkID0gbyhkLCBpKSwgaCA9IG8oaCwgYSksIHYgPSBvKHYsIHUpOwoKICAgICAgICByZXR1cm4gW3AsIGQsIGgsIHZdOwogICAgICB9CgogICAgICBmdW5jdGlvbiBkKGUpIHsKICAgICAgICB2YXIgdCwKICAgICAgICAgICAgbiA9ICIiLAogICAgICAgICAgICByID0gMzIgKiBlLmxlbmd0aDsKCiAgICAgICAgZm9yICh0ID0gMDsgdCA8IHI7IHQgKz0gOCkgbiArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGVbdCA+PiA1XSA+Pj4gdCAlIDMyICYgMjU1KTsKCiAgICAgICAgcmV0dXJuIG47CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGgoZSkgewogICAgICAgIHZhciB0LAogICAgICAgICAgICBuID0gW107CgogICAgICAgIGZvciAoblsoZS5sZW5ndGggPj4gMikgLSAxXSA9IHZvaWQgMCwgdCA9IDA7IHQgPCBuLmxlbmd0aDsgdCArPSAxKSBuW3RdID0gMDsKCiAgICAgICAgdmFyIHIgPSA4ICogZS5sZW5ndGg7CgogICAgICAgIGZvciAodCA9IDA7IHQgPCByOyB0ICs9IDgpIG5bdCA+PiA1XSB8PSAoMjU1ICYgZS5jaGFyQ29kZUF0KHQgLyA4KSkgPDwgdCAlIDMyOwoKICAgICAgICByZXR1cm4gbjsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gdihlKSB7CiAgICAgICAgcmV0dXJuIGQocChoKGUpLCA4ICogZS5sZW5ndGgpKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZyhlLCB0KSB7CiAgICAgICAgdmFyIG4sCiAgICAgICAgICAgIHIsCiAgICAgICAgICAgIGkgPSBoKGUpLAogICAgICAgICAgICBvID0gW10sCiAgICAgICAgICAgIGEgPSBbXTsKCiAgICAgICAgZm9yIChvWzE1XSA9IGFbMTVdID0gdm9pZCAwLCBpLmxlbmd0aCA+IDE2ICYmIChpID0gcChpLCA4ICogZS5sZW5ndGgpKSwgbiA9IDA7IG4gPCAxNjsgbiArPSAxKSBvW25dID0gOTA5NTIyNDg2IF4gaVtuXSwgYVtuXSA9IDE1NDk1NTY4MjggXiBpW25dOwoKICAgICAgICByZXR1cm4gciA9IHAoby5jb25jYXQoaCh0KSksIDUxMiArIDggKiB0Lmxlbmd0aCksIGQocChhLmNvbmNhdChyKSwgNjQwKSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG0oZSkgewogICAgICAgIHZhciB0LAogICAgICAgICAgICBuLAogICAgICAgICAgICByID0gIjAxMjM0NTY3ODlhYmNkZWYiLAogICAgICAgICAgICBpID0gIiI7CgogICAgICAgIGZvciAobiA9IDA7IG4gPCBlLmxlbmd0aDsgbiArPSAxKSB0ID0gZS5jaGFyQ29kZUF0KG4pLCBpICs9IHIuY2hhckF0KHQgPj4+IDQgJiAxNSkgKyByLmNoYXJBdCgxNSAmIHQpOwoKICAgICAgICByZXR1cm4gaTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24geShlKSB7CiAgICAgICAgcmV0dXJuIHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChlKSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGIoZSkgewogICAgICAgIHJldHVybiB2KHkoZSkpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBEKGUpIHsKICAgICAgICByZXR1cm4gbShiKGUpKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24geChlLCB0KSB7CiAgICAgICAgcmV0dXJuIGcoeShlKSwgeSh0KSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHcoZSwgdCkgewogICAgICAgIHJldHVybiBtKHgoZSwgdCkpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBBKGUsIHQsIG4pIHsKICAgICAgICByZXR1cm4gdCA/IG4gPyB4KHQsIGUpIDogdyh0LCBlKSA6IG4gPyBiKGUpIDogRChlKTsKICAgICAgfQoKICAgICAgdm9pZCAwICE9PSAociA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gQTsKICAgICAgfS5jYWxsKHQsIG4sIHQsIGUpKSAmJiAoZS5leHBvcnRzID0gcik7CiAgICB9KCk7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oMiksCiAgICAgICAgaSA9IG4oNCksCiAgICAgICAgbyA9IG4oMSksCiAgICAgICAgYSA9IG4oNSksCiAgICAgICAgdSA9IG4oMTQpLAogICAgICAgIHMgPSBuKDE1KSwKICAgICAgICBsID0gcygpLAogICAgICAgIGMgPSBuKDQ0KSwKICAgICAgICBmID0gbygiQXJyYXkucHJvdG90eXBlLnNsaWNlIiksCiAgICAgICAgcCA9IGkuYXBwbHkobCksCiAgICAgICAgZCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHJldHVybiBhKGUpLCBwKGUsIGYoYXJndW1lbnRzLCAxKSk7CiAgICB9OwoKICAgIHIoZCwgewogICAgICBnZXRQb2x5ZmlsbDogcywKICAgICAgaW1wbGVtZW50YXRpb246IHUsCiAgICAgIHNoaW06IGMKICAgIH0pLCBlLmV4cG9ydHMgPSBkOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBuKDIpLAogICAgICAgIGkgPSBuKDE1KTsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0gaSgpOwogICAgICByZXR1cm4gcihBcnJheS5wcm90b3R5cGUsIHsKICAgICAgICBmb3JFYWNoOiBlCiAgICAgIH0sIHsKICAgICAgICBmb3JFYWNoOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmZvckVhY2ggIT09IGU7CiAgICAgICAgfQogICAgICB9KSwgZTsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB0Ll9fZXNNb2R1bGUgPSAhMDsKCiAgICB2YXIgciA9IG4oNDcpLAogICAgICAgIGkgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogewogICAgICAgIGRlZmF1bHQ6IGUKICAgICAgfTsKICAgIH0ocik7CgogICAgdC5kZWZhdWx0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUgPSAoMCwgaS5kZWZhdWx0KSh7CiAgICAgICAgdXJsOiAiIiwKICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgIGJvZHk6IHt9CiAgICAgIH0sIGUpLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAodCwgbikgewogICAgICAgIGlmICgianNvbnAiID09IGUubWV0aG9kKSB7CiAgICAgICAgICB2YXIgciA9ICJjYl8iICsgKERhdGUubm93KCkgKyBNYXRoLnJvdW5kKDFlMyAqIE1hdGgucmFuZG9tKCkpKS50b1N0cmluZygzMiksCiAgICAgICAgICAgICAgaSA9IGRvY3VtZW50LAogICAgICAgICAgICAgIG8gPSBpLmJvZHksCiAgICAgICAgICAgICAgdSA9IGkuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7CiAgICAgICAgICByZXR1cm4gdS5hc3luYyA9ICEwLCB1LmRlZmVyID0gITAsIGUudXJsLmluZGV4T2YoIj8iKSA+IC0xID8gZS51cmwgKz0gIiYiICsgYSh7CiAgICAgICAgICAgIGNhbGxiYWNrOiByLAogICAgICAgICAgICB0OiBEYXRlLm5vdygpCiAgICAgICAgICB9KSA6IGUudXJsICs9ICI/IiArIGEoewogICAgICAgICAgICBjYWxsYmFjazogciwKICAgICAgICAgICAgdDogRGF0ZS5ub3coKQogICAgICAgICAgfSksIHUuc3JjID0gZS51cmwsIHdpbmRvd1tyXSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHdpbmRvd1tyXSA9IG51bGwsIG8ucmVtb3ZlQ2hpbGQodSksIHQoZSk7CiAgICAgICAgICB9LCB2b2lkIG8uYXBwZW5kQ2hpbGQodSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgcyA9ICJYTUxIdHRwUmVxdWVzdCIgaW4gd2luZG93ID8gbmV3IFhNTEh0dHBSZXF1ZXN0KCkgOiBuZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKSwKICAgICAgICAgICAgbCA9IFtdLAogICAgICAgICAgICBjID0gW10sCiAgICAgICAgICAgIGYgPSB7fSwKICAgICAgICAgICAgcCA9IGZ1bmN0aW9uIGUoKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBvazogMiA9PSAocy5zdGF0dXMgLyAxMDAgfCAwKSwKICAgICAgICAgICAgc3RhdHVzVGV4dDogcy5zdGF0dXNUZXh0LAogICAgICAgICAgICBzdGF0dXM6IHMuc3RhdHVzLAogICAgICAgICAgICB1cmw6IHMucmVzcG9uc2VVUkwsCiAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHMucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAganNvbjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocy5yZXNwb25zZVRleHQpLnRoZW4oSlNPTi5wYXJzZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJsb2I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFtzLnJlc3BvbnNlXSkpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjbG9uZTogZSwKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIGtleXM6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBsOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW50cmllczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGM7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZltlLnRvTG93ZXJDYXNlKCldOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgaGFzOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGUudG9Mb3dlckNhc2UoKSBpbiBmOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9OwoKICAgICAgICBhKGUuYm9keSkgJiYgKGUudXJsID0gZS51cmwgKyAiPyIgKyAoImdldCIgPT0gZS5tZXRob2QgPyBhKGUuYm9keSkgOiAiIikpLCBzLm9wZW4oZS5tZXRob2QgfHwgImdldCIsIGUudXJsKSwgImJsb2IiID09IGUuZGF0YVR5cGUgJiYgKHMucmVzcG9uc2VUeXBlID0gImJsb2IiKSwgcy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBzLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLnJlcGxhY2UoL14oLio/KTpbXlxTXG5dKihbXHNcU10qPykkL2dtLCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgICBsLnB1c2godCA9IHQudG9Mb3dlckNhc2UoKSksIGMucHVzaChbdCwgbl0pLCBmW3RdID0gZlt0XSA/IGZbdF0gKyAiLCIgKyBuIDogbjsKICAgICAgICAgIH0pLCB0KHAoKSk7CiAgICAgICAgfSwgcy5vbmVycm9yID0gbiwgcy53aXRoQ3JlZGVudGlhbHMgPSAiaW5jbHVkZSIgPT0gZS5jcmVkZW50aWFsczsKCiAgICAgICAgZm9yICh2YXIgZCBpbiBlLmhlYWRlcnMpIHMuc2V0UmVxdWVzdEhlYWRlcihkLCBlLmhlYWRlcnNbZF0pOwoKICAgICAgICBzLnNlbmQoInBvc3QiID09IGUubWV0aG9kID8gZS5ib2R5IDogImdldCIgPT0gZS5tZXRob2QgPyAiIiA6IGEoZS5ib2R5KSk7CiAgICAgIH0pOwogICAgfTsKCiAgICB2YXIgbyA9IGVuY29kZVVSSUNvbXBvbmVudCwKICAgICAgICBhID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSBbXTsKCiAgICAgIGZvciAodmFyIG4gaW4gZSkgZS5oYXNPd25Qcm9wZXJ0eShuKSAmJiB0LnB1c2gobyhuKSArICI9IiArIG8oZVtuXSkpOwoKICAgICAgcmV0dXJuICh0ID0gdC5qb2luKCImIikucmVwbGFjZSgvJTIwL2csICIrIikpIHx8ICIiOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHQuX19lc01vZHVsZSA9ICEwOwoKICAgIHZhciByID0gZnVuY3Rpb24gKGUpIHsKICAgICAgZSA9IGUgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudDsKICAgICAgdmFyIHQgPSB7fSwKICAgICAgICAgIG4gPSB7CiAgICAgICAgVHJpZGVudDogZS5pbmRleE9mKCJUcmlkZW50IikgPiAtMSB8fCBlLmluZGV4T2YoIk5FVCBDTFIiKSA+IC0xLAogICAgICAgIFByZXN0bzogZS5pbmRleE9mKCJQcmVzdG8iKSA+IC0xLAogICAgICAgIFdlYktpdDogZS5pbmRleE9mKCJBcHBsZVdlYktpdCIpID4gLTEsCiAgICAgICAgR2Vja286IGUuaW5kZXhPZigiR2Vja28vIikgPiAtMSwKICAgICAgICBTYWZhcmk6IGUuaW5kZXhPZigiU2FmYXJpIikgPiAtMSwKICAgICAgICBFZGdlOiBlLmluZGV4T2YoIkVkZ2UiKSA+IC0xIHx8IGUuaW5kZXhPZigiRWRnIikgPiAtMSwKICAgICAgICBDaHJvbWU6IGUuaW5kZXhPZigiQ2hyb21lIikgPiAtMSB8fCBlLmluZGV4T2YoIkNyaU9TIikgPiAtMSwKICAgICAgICBJRTogZS5pbmRleE9mKCJNU0lFIikgPiAtMSB8fCBlLmluZGV4T2YoIlRyaWRlbnQiKSA+IC0xLAogICAgICAgIEZpcmVmb3g6IGUuaW5kZXhPZigiRmlyZWZveCIpID4gLTEgfHwgZS5pbmRleE9mKCJGeGlPUyIpID4gLTEsCiAgICAgICAgIkZpcmVmb3ggRm9jdXMiOiBlLmluZGV4T2YoIkZvY3VzIikgPiAtMSwKICAgICAgICBDaHJvbWl1bTogZS5pbmRleE9mKCJDaHJvbWl1bSIpID4gLTEsCiAgICAgICAgT3BlcmE6IGUuaW5kZXhPZigiT3BlcmEiKSA+IC0xIHx8IGUuaW5kZXhPZigiT1BSIikgPiAtMSwKICAgICAgICBWaXZhbGRpOiBlLmluZGV4T2YoIlZpdmFsZGkiKSA+IC0xLAogICAgICAgIFlhbmRleDogZS5pbmRleE9mKCJZYUJyb3dzZXIiKSA+IC0xLAogICAgICAgIEtpbmRsZTogZS5pbmRleE9mKCJLaW5kbGUiKSA+IC0xIHx8IGUuaW5kZXhPZigiU2lsay8iKSA+IC0xLAogICAgICAgIDM2MDogZS5pbmRleE9mKCIzNjBFRSIpID4gLTEgfHwgZS5pbmRleE9mKCIzNjBTRSIpID4gLTEsCiAgICAgICAgVUM6IGUuaW5kZXhPZigiVUMiKSA+IC0xIHx8IGUuaW5kZXhPZigiIFVCcm93c2VyIikgPiAtMSwKICAgICAgICBRUUJyb3dzZXI6IGUuaW5kZXhPZigiUVFCcm93c2VyIikgPiAtMSwKICAgICAgICBRUTogZS5pbmRleE9mKCJRUS8iKSA+IC0xLAogICAgICAgIEJhaWR1OiBlLmluZGV4T2YoIkJhaWR1IikgPiAtMSB8fCBlLmluZGV4T2YoIkJJRFVCcm93c2VyIikgPiAtMSwKICAgICAgICBNYXh0aG9uOiBlLmluZGV4T2YoIk1heHRob24iKSA+IC0xLAogICAgICAgIFNvZ291OiBlLmluZGV4T2YoIk1ldGFTciIpID4gLTEgfHwgZS5pbmRleE9mKCJTb2dvdSIpID4gLTEsCiAgICAgICAgTEJCUk9XU0VSOiBlLmluZGV4T2YoIkxCQlJPV1NFUiIpID4gLTEsCiAgICAgICAgIjIzNDVFeHBsb3JlciI6IGUuaW5kZXhPZigiMjM0NUV4cGxvcmVyIikgPiAtMSwKICAgICAgICBUaGVXb3JsZDogZS5pbmRleE9mKCJUaGVXb3JsZCIpID4gLTEsCiAgICAgICAgWGlhb01pOiBlLmluZGV4T2YoIk1pdWlCcm93c2VyIikgPiAtMSwKICAgICAgICBRdWFyazogZS5pbmRleE9mKCJRdWFyayIpID4gLTEsCiAgICAgICAgUWl5dTogZS5pbmRleE9mKCJRaXl1IikgPiAtMSwKICAgICAgICBXZWNoYXQ6IGUuaW5kZXhPZigiTWljcm9NZXNzZW5nZXIiKSA+IC0xLAogICAgICAgIFRhb2JhbzogZS5pbmRleE9mKCJBbGlBcHAoVEIiKSA+IC0xLAogICAgICAgIEFsaXBheTogZS5pbmRleE9mKCJBbGlBcHAoQVAiKSA+IC0xLAogICAgICAgIFdlaWJvOiBlLmluZGV4T2YoIldlaWJvIikgPiAtMSwKICAgICAgICBEb3ViYW46IGUuaW5kZXhPZigiY29tLmRvdWJhbi5mcm9kbyIpID4gLTEsCiAgICAgICAgU3VuaW5nOiBlLmluZGV4T2YoIlNORUJVWS1BUFAiKSA+IC0xLAogICAgICAgIGlRaVlpOiBlLmluZGV4T2YoIklxaXlpQXBwIikgPiAtMSwKICAgICAgICBXaW5kb3dzOiBlLmluZGV4T2YoIldpbmRvd3MiKSA+IC0xLAogICAgICAgIExpbnV4OiBlLmluZGV4T2YoIkxpbnV4IikgPiAtMSB8fCBlLmluZGV4T2YoIlgxMSIpID4gLTEsCiAgICAgICAgbWFjT1M6IGUuaW5kZXhPZigiTWFjaW50b3NoIikgPiAtMSwKICAgICAgICBBbmRyb2lkOiBlLmluZGV4T2YoIkFuZHJvaWQiKSA+IC0xIHx8IGUuaW5kZXhPZigiQWRyIikgPiAtMSwKICAgICAgICBVYnVudHU6IGUuaW5kZXhPZigiVWJ1bnR1IikgPiAtMSwKICAgICAgICBGcmVlQlNEOiBlLmluZGV4T2YoIkZyZWVCU0QiKSA+IC0xLAogICAgICAgIERlYmlhbjogZS5pbmRleE9mKCJEZWJpYW4iKSA+IC0xLAogICAgICAgICJXaW5kb3dzIFBob25lIjogZS5pbmRleE9mKCJJRU1vYmlsZSIpID4gLTEgfHwgZS5pbmRleE9mKCJXaW5kb3dzIFBob25lIikgPiAtMSwKICAgICAgICBCbGFja0JlcnJ5OiBlLmluZGV4T2YoIkJsYWNrQmVycnkiKSA+IC0xIHx8IGUuaW5kZXhPZigiUklNIikgPiAtMSB8fCBlLmluZGV4T2YoIkJCMTAiKSA+IC0xLAogICAgICAgIE1lZUdvOiBlLmluZGV4T2YoIk1lZUdvIikgPiAtMSwKICAgICAgICBTeW1iaWFuOiBlLmluZGV4T2YoIlN5bWJpYW4iKSA+IC0xLAogICAgICAgIGlPUzogZS5pbmRleE9mKCJsaWtlIE1hYyBPUyBYIikgPiAtMSwKICAgICAgICAiQ2hyb21lIE9TIjogZS5pbmRleE9mKCJDck9TIikgPiAtMSwKICAgICAgICBXZWJPUzogZS5pbmRleE9mKCJocHdPUyIpID4gLTEsCiAgICAgICAgTW9iaWxlOiBlLmluZGV4T2YoIk1vYmkiKSA+IC0xIHx8IGUuaW5kZXhPZigiaVBoIikgPiAtMSB8fCBlLmluZGV4T2YoIjQ4MCIpID4gLTEsCiAgICAgICAgVGFibGV0OiBlLmluZGV4T2YoIlRhYmxldCIpID4gLTEgfHwgZS5pbmRleE9mKCJQYWQiKSA+IC0xIHx8IGUuaW5kZXhPZigiTmV4dXMgNyIpID4gLTEKICAgICAgfTsKICAgICAgbi5Nb2JpbGUgJiYgKG4uTW9iaWxlID0gIShlLmluZGV4T2YoImlQYWQiKSA+IC0xKSk7CiAgICAgIHZhciByID0gewogICAgICAgIGJyb3dzZXI6IFsiU2FmYXJpIiwgIkNocm9tZSIsICJFZGdlIiwgIklFIiwgIkZpcmVmb3giLCAiRmlyZWZveCBGb2N1cyIsICJDaHJvbWl1bSIsICJPcGVyYSIsICJWaXZhbGRpIiwgIllhbmRleCIsICJLaW5kbGUiLCAiMzYwIiwgIlVDIiwgIlFRQnJvd3NlciIsICJRUSIsICJCYWlkdSIsICJNYXh0aG9uIiwgIlNvZ291IiwgIkxCQlJPV1NFUiIsICIyMzQ1RXhwbG9yZXIiLCAiVGhlV29ybGQiLCAiWGlhb01pIiwgIlF1YXJrIiwgIlFpeXUiLCAiV2VjaGF0IiwgIlRhb2JhbyIsICJBbGlwYXkiLCAiV2VpYm8iLCAiRG91YmFuIiwgIlN1bmluZyIsICJpUWlZaSJdLAogICAgICAgIG9zOiBbIldpbmRvd3MiLCAiTGludXgiLCAiTWFjIE9TIiwgIm1hY09TIiwgIkFuZHJvaWQiLCAiVWJ1bnR1IiwgIkZyZWVCU0QiLCAiRGViaWFuIiwgImlPUyIsICJXaW5kb3dzIFBob25lIiwgIkJsYWNrQmVycnkiLCAiTWVlR28iLCAiU3ltYmlhbiIsICJDaHJvbWUgT1MiLCAiV2ViT1MiXQogICAgICB9OwoKICAgICAgZm9yICh2YXIgaSBpbiByKSBpZiAoci5oYXNPd25Qcm9wZXJ0eShpKSkgZm9yICh2YXIgbyA9IDAsIGEgPSByW2ldLmxlbmd0aDsgbyA8IGE7IG8rKykgewogICAgICAgIHZhciB1ID0gcltpXVtvXTsKICAgICAgICBuW3VdICYmICh0W2ldID0gdSk7CiAgICAgIH0KCiAgICAgIHZhciBzID0gewogICAgICAgIFdpbmRvd3M6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICIxMC4wIjogIjExIiwKICAgICAgICAgICAgNi40OiAiMTAiLAogICAgICAgICAgICA2LjM6ICI4LjEiLAogICAgICAgICAgICA2LjI6ICI4IiwKICAgICAgICAgICAgNi4xOiAiNyIsCiAgICAgICAgICAgICI2LjAiOiAiVmlzdGEiLAogICAgICAgICAgICA1LjI6ICJYUCIsCiAgICAgICAgICAgIDUuMTogIlhQIiwKICAgICAgICAgICAgIjUuMCI6ICIyMDAwIgogICAgICAgICAgfVtlLnJlcGxhY2UoL14uKldpbmRvd3MgTlQgKFtcZC5dKykuKiQvLCAiJDEiKV07CiAgICAgICAgfSwKICAgICAgICBBbmRyb2lkOiBlLnJlcGxhY2UoL14uKkFuZHJvaWQgKFtcZC5dKyk7LiokLywgIiQxIiksCiAgICAgICAgaU9TOiBlLnJlcGxhY2UoL14uKk9TIChbXGRfXSspIGxpa2UuKiQvLCAiJDEiKS5yZXBsYWNlKC9fL2csICIuIiksCiAgICAgICAgRGViaWFuOiBlLnJlcGxhY2UoL14uKkRlYmlhblwvKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICAiV2luZG93cyBQaG9uZSI6IGUucmVwbGFjZSgvXi4qV2luZG93cyBQaG9uZSggT1MpPyAoW1xkLl0rKTsuKiQvLCAiJDIiKSwKICAgICAgICBtYWNPUzogZS5yZXBsYWNlKC9eLipNYWMgT1MgWCAoW1xkX10rKS4qJC8sICIkMSIpLnJlcGxhY2UoL18vZywgIi4iKSwKICAgICAgICBXZWJPUzogZS5yZXBsYWNlKC9eLipocHdPU1wvKFtcZC5dKyk7LiokLywgIiQxIiksCiAgICAgICAgQmxhY2tCZXJyeTogZS5yZXBsYWNlKC9eLipCQihbXGQuXSspOyokLywgIiQxIikKICAgICAgfTsKICAgICAgdC5vc1ZlcnNpb24gPSAiIjsKICAgICAgdmFyIGwgPSBzW3Qub3NdOwogICAgICBsICYmICh0Lm9zVmVyc2lvbiA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGwgPyBsKCkgOiBsID09IGUgPyAiIiA6IGwpOwogICAgICB2YXIgYyA9IHsKICAgICAgICBTYWZhcmk6IGUucmVwbGFjZSgvXi4qVmVyc2lvblwvKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBDaHJvbWU6IGUucmVwbGFjZSgvXi4qQ2hyb21lXC8oW1xkLl0rKS4qJC8sICIkMSIpLnJlcGxhY2UoL14uKkNyaU9TXC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIElFOiBlLnJlcGxhY2UoL14uKk1TSUUgKFtcZC5dKykuKiQvLCAiJDEiKS5yZXBsYWNlKC9eLipydjooW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIEVkZ2U6IGUucmVwbGFjZSgvXi4qRWRnZT9cLyhbXGQuXSspLiokLywgIiQxIiksCiAgICAgICAgRmlyZWZveDogZS5yZXBsYWNlKC9eLipGaXJlZm94XC8oW1xkLl0rKS4qJC8sICIkMSIpLnJlcGxhY2UoL14uKkZ4aU9TXC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgICJGaXJlZm94IEZvY3VzIjogZS5yZXBsYWNlKC9eLipGb2N1c1wvKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBDaHJvbWl1bTogZS5yZXBsYWNlKC9eLipDaHJvbWl1bVwvKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBPcGVyYTogZS5yZXBsYWNlKC9eLipPcGVyYVwvKFtcZC5dKykuKiQvLCAiJDEiKS5yZXBsYWNlKC9eLipPUFJcLyhbXGQuXSspLiokLywgIiQxIiksCiAgICAgICAgVml2YWxkaTogZS5yZXBsYWNlKC9eLipWaXZhbGRpXC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIFlhbmRleDogZS5yZXBsYWNlKC9eLipZYUJyb3dzZXJcLyhbXGQuXSspLiokLywgIiQxIiksCiAgICAgICAgS2luZGxlOiBlLnJlcGxhY2UoL14uKlZlcnNpb25cLyhbXGQuXSspLiokLywgIiQxIiksCiAgICAgICAgTWF4dGhvbjogZS5yZXBsYWNlKC9eLipNYXh0aG9uXC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIFFRQnJvd3NlcjogZS5yZXBsYWNlKC9eLipRUUJyb3dzZXJcLyhbXGQuXSspLiokLywgIiQxIiksCiAgICAgICAgUVE6IGUucmVwbGFjZSgvXi4qUVFcLyhbXGQuXSspLiokLywgIiQxIiksCiAgICAgICAgQmFpZHU6IGUucmVwbGFjZSgvXi4qQklEVUJyb3dzZXJbXHNcL10oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIFVDOiBlLnJlcGxhY2UoL14uKlVDP0Jyb3dzZXJcLyhbXGQuXSspLiokLywgIiQxIiksCiAgICAgICAgU29nb3U6IGUucmVwbGFjZSgvXi4qU0UgKFtcZC5YXSspLiokLywgIiQxIikucmVwbGFjZSgvXi4qU29nb3VNb2JpbGVCcm93c2VyXC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgICIyMzQ1RXhwbG9yZXIiOiBlLnJlcGxhY2UoL14uKjIzNDVFeHBsb3JlclwvKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBUaGVXb3JsZDogZS5yZXBsYWNlKC9eLipUaGVXb3JsZCAoW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIFhpYW9NaTogZS5yZXBsYWNlKC9eLipNaXVpQnJvd3NlclwvKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBRdWFyazogZS5yZXBsYWNlKC9eLipRdWFya1wvKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBRaXl1OiBlLnJlcGxhY2UoL14uKlFpeXVcLyhbXGQuXSspLiokLywgIiQxIiksCiAgICAgICAgV2VjaGF0OiBlLnJlcGxhY2UoL14uKk1pY3JvTWVzc2VuZ2VyXC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIFRhb2JhbzogZS5yZXBsYWNlKC9eLipBbGlBcHBcKFRCXC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIEFsaXBheTogZS5yZXBsYWNlKC9eLipBbGlBcHBcKEFQXC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIFdlaWJvOiBlLnJlcGxhY2UoL14uKndlaWJvX18oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIERvdWJhbjogZS5yZXBsYWNlKC9eLipjb20uZG91YmFuLmZyb2RvXC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIFN1bmluZzogZS5yZXBsYWNlKC9eLipTTkVCVVktQVBQKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBpUWlZaTogZS5yZXBsYWNlKC9eLipJcWl5aVZlcnNpb25cLyhbXGQuXSspLiokLywgIiQxIikKICAgICAgfTsKICAgICAgdC52ZXJzaW9uID0gIiI7CiAgICAgIHZhciBmID0gY1t0LmJyb3dzZXJdOwogICAgICByZXR1cm4gZiAmJiAodC52ZXJzaW9uID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZiA/IGYoKSA6IGYgPT0gZSA/ICIiIDogZiksIHZvaWQgMCA9PSB0LmJyb3dzZXIgJiYgKHQuYnJvd3NlciA9ICJVbmtub3cgQXBwIiksIHQ7CiAgICB9OwoKICAgIHQuZGVmYXVsdCA9IHI7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB0Ll9fZXNNb2R1bGUgPSAhMCwgdC5kZWZhdWx0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgZSA9IE9iamVjdChlKTsKCiAgICAgIGZvciAodmFyIHQgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgdCA8IG47IHQrKykgewogICAgICAgIHZhciByID0gYXJndW1lbnRzW3RdOwogICAgICAgIGlmIChyKSBmb3IgKHZhciBpIGluIHIpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLCBpKSAmJiAoZVtpXSA9IHJbaV0pOwogICAgICB9CgogICAgICByZXR1cm4gZTsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICBmdW5jdGlvbiByKGUpIHsKICAgICAgcmV0dXJuIC9eXHtbXHNcU10qXH0kLy50ZXN0KEpTT04uc3RyaW5naWZ5KGUpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpKGUpIHsKICAgICAgcmV0dXJuICJbb2JqZWN0IEZ1bmN0aW9uXSIgPT09IHt9LnRvU3RyaW5nLmNhbGwoZSk7CiAgICB9CgogICAgZnVuY3Rpb24gbyhlKSB7CiAgICAgIHJldHVybiAiW29iamVjdCBBcnJheV0iID09PSB7fS50b1N0cmluZy5jYWxsKGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGEoZSkgewogICAgICByZXR1cm4gdm9pZCAwID09PSBlIHx8ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgPyBlICsgIiIgOiBKU09OLnN0cmluZ2lmeShlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1KGUpIHsKICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBlKSB0cnkgewogICAgICAgIHJldHVybiBKU09OLnBhcnNlKGUpOwogICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgcmV0dXJuIGU7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzKCkgewogICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgcykpIHJldHVybiBuZXcgcygpOwogICAgfQoKICAgIGZ1bmN0aW9uIGwoZSwgdCkgewogICAgICB2YXIgbiA9IGFyZ3VtZW50cywKICAgICAgICAgIGEgPSBudWxsOwogICAgICBpZiAoZiB8fCAoZiA9IHMoKSksIDAgPT09IG4ubGVuZ3RoKSByZXR1cm4gZi5nZXQoKTsKCiAgICAgIGlmICgxID09PSBuLmxlbmd0aCkgewogICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgZSkgcmV0dXJuIGYuZ2V0KGUpOwogICAgICAgIGlmIChyKGUpKSByZXR1cm4gZi5zZXQoZSk7CiAgICAgIH0KCiAgICAgIGlmICgyID09PSBuLmxlbmd0aCAmJiAic3RyaW5nIiA9PSB0eXBlb2YgZSkgewogICAgICAgIGlmICghdCkgcmV0dXJuIGYucmVtb3ZlKGUpOwogICAgICAgIGlmICh0ICYmICJzdHJpbmciID09IHR5cGVvZiB0KSByZXR1cm4gZi5zZXQoZSwgdCk7CiAgICAgICAgdCAmJiBpKHQpICYmIChhID0gbnVsbCwgYSA9IHQoZSwgZi5nZXQoZSkpLCBsLnNldChlLCBhKSk7CiAgICAgIH0KCiAgICAgIGlmICgyID09PSBuLmxlbmd0aCAmJiBvKGUpICYmIGkodCkpIGZvciAodmFyIHUgPSAwLCBjID0gZS5sZW5ndGg7IHUgPCBjOyB1KyspIGEgPSB0KGVbdV0sIGYuZ2V0KGVbdV0pKSwgbC5zZXQoZVt1XSwgYSk7CiAgICAgIHJldHVybiBsOwogICAgfQoKICAgIHQuX19lc01vZHVsZSA9ICEwOwogICAgdmFyIGMgPSB3aW5kb3cubG9jYWxTdG9yYWdlOwogICAgYyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gIl9Jc19JbmNvZ25pdCI7CgogICAgICB0cnkgewogICAgICAgIGUuc2V0SXRlbSh0LCAieWVzIik7CiAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICBpZiAoWyJRdW90YUV4Y2VlZGVkRXJyb3IiLCAiTlNfRVJST1JfRE9NX1FVT1RBX1JFQUNIRUQiXS5pbmRleE9mKHQubmFtZSkgPiAtMSkgewogICAgICAgICAgdmFyIG4gPSBmdW5jdGlvbiAoKSB7fTsKCiAgICAgICAgICBlLl9fcHJvdG9fXyA9IHsKICAgICAgICAgICAgc2V0SXRlbTogbiwKICAgICAgICAgICAgZ2V0SXRlbTogbiwKICAgICAgICAgICAgcmVtb3ZlSXRlbTogbiwKICAgICAgICAgICAgY2xlYXI6IG4KICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9IGZpbmFsbHkgewogICAgICAgICJ5ZXMiID09PSBlLmdldEl0ZW0odCkgJiYgZS5yZW1vdmVJdGVtKHQpOwogICAgICB9CgogICAgICByZXR1cm4gZTsKICAgIH0oYyksIHMucHJvdG90eXBlID0gewogICAgICBzZXQ6IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgaWYgKGUgJiYgIXIoZSkpIGMuc2V0SXRlbShlLCBhKHQpKTtlbHNlIGlmIChyKGUpKSBmb3IgKHZhciBuIGluIGUpIHRoaXMuc2V0KG4sIGVbbl0pOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9LAogICAgICBnZXQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKCFlKSB7CiAgICAgICAgICB2YXIgdCA9IHt9OwogICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoZSwgbikgewogICAgICAgICAgICByZXR1cm4gdFtlXSA9IG47CiAgICAgICAgICB9KSwgdDsKICAgICAgICB9CgogICAgICAgIGlmICgiPyIgPT09IGUuY2hhckF0KDApKSByZXR1cm4gdGhpcy5oYXMoZS5zdWJzdHIoMSkpOwogICAgICAgIHZhciBuID0gYXJndW1lbnRzOwoKICAgICAgICBpZiAobi5sZW5ndGggPiAxKSB7CiAgICAgICAgICBmb3IgKHZhciByID0ge30sIGkgPSAwLCBvID0gbi5sZW5ndGg7IGkgPCBvOyBpKyspIHsKICAgICAgICAgICAgdmFyIGEgPSB1KGMuZ2V0SXRlbShuW2ldKSk7CiAgICAgICAgICAgIGEgJiYgKHJbbltpXV0gPSBhKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcjsKICAgICAgICB9CgogICAgICAgIHJldHVybiB1KGMuZ2V0SXRlbShlKSk7CiAgICAgIH0sCiAgICAgIGNsZWFyOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGMuY2xlYXIoKSwgdGhpczsKICAgICAgfSwKICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0ID0gdGhpcy5nZXQoZSk7CiAgICAgICAgcmV0dXJuIGMucmVtb3ZlSXRlbShlKSwgdDsKICAgICAgfSwKICAgICAgaGFzOiBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiB7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuZ2V0KCksIGUpOwogICAgICB9LAogICAgICBrZXlzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGUgPSBbXTsKICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICBlLnB1c2godCk7CiAgICAgICAgfSksIGU7CiAgICAgIH0sCiAgICAgIGVhY2g6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgZm9yICh2YXIgdCA9IDAsIG4gPSBjLmxlbmd0aDsgdCA8IG47IHQrKykgewogICAgICAgICAgdmFyIHIgPSBjLmtleSh0KTsKICAgICAgICAgIGUociwgdGhpcy5nZXQocikpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0sCiAgICAgIHNlYXJjaDogZnVuY3Rpb24gKGUpIHsKICAgICAgICBmb3IgKHZhciB0ID0gdGhpcy5rZXlzKCksIG4gPSB7fSwgciA9IDAsIGkgPSB0Lmxlbmd0aDsgciA8IGk7IHIrKykgdFtyXS5pbmRleE9mKGUpID4gLTEgJiYgKG5bdFtyXV0gPSB0aGlzLmdldCh0W3JdKSk7CgogICAgICAgIHJldHVybiBuOwogICAgICB9CiAgICB9OwogICAgdmFyIGYgPSBudWxsOwoKICAgIGZvciAodmFyIHAgaW4gcy5wcm90b3R5cGUpIGxbcF0gPSBzLnByb3RvdHlwZVtwXTsKCiAgICB0LmRlZmF1bHQgPSBsOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICB2YXIgciwgaTsKICAgICFmdW5jdGlvbiAobiwgbykgewogICAgICB2YXIgbyA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgZnVuY3Rpb24gcihpLCBvLCBhKSB7CiAgICAgICAgICByZXR1cm4gYSA9IE9iamVjdC5jcmVhdGUoci5mbiksIGkgJiYgYS5wdXNoLmFwcGx5KGEsIGlbdF0gPyBbaV0gOiAiIiArIGkgPT09IGkgPyAvPC8udGVzdChpKSA/ICgobyA9IGUuY3JlYXRlRWxlbWVudChvKSkuaW5uZXJIVE1MID0gaSwgby5jaGlsZHJlbikgOiBvID8gKG8gPSByKG8pWzBdKSA/IG9bbl0oaSkgOiBhIDogZVtuXShpKSA6IGkpLCBhOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHIuZm4gPSBbXSwgci5vbmUgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgcmV0dXJuIHIoZSwgdClbMF0gfHwgbnVsbDsKICAgICAgICB9LCByOwogICAgICB9KGRvY3VtZW50LCAiYWRkRXZlbnRMaXN0ZW5lciIsICJxdWVyeVNlbGVjdG9yQWxsIik7CgogICAgICByID0gW10sIHZvaWQgMCAhPT0gKGkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG87CiAgICAgIH0uYXBwbHkodCwgcikpICYmIChlLmV4cG9ydHMgPSBpKTsKICAgIH0oKTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgZnVuY3Rpb24gcihlKSB7CiAgICAgIHJldHVybiB2b2lkIDAgPT09IGUgfHwgbnVsbCA9PT0gZTsKICAgIH0KCiAgICBmdW5jdGlvbiBpKGUpIHsKICAgICAgdmFyIHQgPSB7fTsKCiAgICAgIGZvciAodmFyIG4gaW4gZSkgdFtuXSA9IGVbbl07CgogICAgICByZXR1cm4gdDsKICAgIH0KCiAgICBmdW5jdGlvbiBvKGUpIHsKICAgICAgZSA9IGkoZSB8fCB7fSksIGUud2hpdGVMaXN0ID0gZS53aGl0ZUxpc3QgfHwgYS53aGl0ZUxpc3QsIGUub25BdHRyID0gZS5vbkF0dHIgfHwgYS5vbkF0dHIsIGUub25JZ25vcmVBdHRyID0gZS5vbklnbm9yZUF0dHIgfHwgYS5vbklnbm9yZUF0dHIsIGUuc2FmZUF0dHJWYWx1ZSA9IGUuc2FmZUF0dHJWYWx1ZSB8fCBhLnNhZmVBdHRyVmFsdWUsIHRoaXMub3B0aW9ucyA9IGU7CiAgICB9CgogICAgdmFyIGEgPSBuKDE2KSwKICAgICAgICB1ID0gbig1MSk7CiAgICBuKDE3KTsKICAgIG8ucHJvdG90eXBlLnByb2Nlc3MgPSBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZSA9IGUgfHwgIiIsICEoZSA9IGUudG9TdHJpbmcoKSkpIHJldHVybiAiIjsKICAgICAgdmFyIHQgPSB0aGlzLAogICAgICAgICAgbiA9IHQub3B0aW9ucywKICAgICAgICAgIGkgPSBuLndoaXRlTGlzdCwKICAgICAgICAgIG8gPSBuLm9uQXR0ciwKICAgICAgICAgIGEgPSBuLm9uSWdub3JlQXR0ciwKICAgICAgICAgIHMgPSBuLnNhZmVBdHRyVmFsdWU7CiAgICAgIHJldHVybiB1KGUsIGZ1bmN0aW9uIChlLCB0LCBuLCB1LCBsKSB7CiAgICAgICAgdmFyIGMgPSBpW25dLAogICAgICAgICAgICBmID0gITE7CgogICAgICAgIGlmICghMCA9PT0gYyA/IGYgPSBjIDogImZ1bmN0aW9uIiA9PSB0eXBlb2YgYyA/IGYgPSBjKHUpIDogYyBpbnN0YW5jZW9mIFJlZ0V4cCAmJiAoZiA9IGMudGVzdCh1KSksICEwICE9PSBmICYmIChmID0gITEpLCB1ID0gcyhuLCB1KSkgewogICAgICAgICAgdmFyIHAgPSB7CiAgICAgICAgICAgIHBvc2l0aW9uOiB0LAogICAgICAgICAgICBzb3VyY2VQb3NpdGlvbjogZSwKICAgICAgICAgICAgc291cmNlOiBsLAogICAgICAgICAgICBpc1doaXRlOiBmCiAgICAgICAgICB9OwoKICAgICAgICAgIGlmIChmKSB7CiAgICAgICAgICAgIHZhciBkID0gbyhuLCB1LCBwKTsKICAgICAgICAgICAgcmV0dXJuIHIoZCkgPyBuICsgIjoiICsgdSA6IGQ7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGQgPSBhKG4sIHUsIHApOwogICAgICAgICAgcmV0dXJuIHIoZCkgPyB2b2lkIDAgOiBkOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCBlLmV4cG9ydHMgPSBvOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICBmdW5jdGlvbiByKGUsIHQpIHsKICAgICAgZnVuY3Rpb24gbigpIHsKICAgICAgICBpZiAoIW8pIHsKICAgICAgICAgIHZhciBuID0gaS50cmltKGUuc2xpY2UoYSwgdSkpLAogICAgICAgICAgICAgIHIgPSBuLmluZGV4T2YoIjoiKTsKCiAgICAgICAgICBpZiAoLTEgIT09IHIpIHsKICAgICAgICAgICAgdmFyIGwgPSBpLnRyaW0obi5zbGljZSgwLCByKSksCiAgICAgICAgICAgICAgICBjID0gaS50cmltKG4uc2xpY2UociArIDEpKTsKCiAgICAgICAgICAgIGlmIChsKSB7CiAgICAgICAgICAgICAgdmFyIGYgPSB0KGEsIHMubGVuZ3RoLCBsLCBjLCBuKTsKICAgICAgICAgICAgICBmICYmIChzICs9IGYgKyAiOyAiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgYSA9IHUgKyAxOwogICAgICB9CgogICAgICBlID0gaS50cmltUmlnaHQoZSksICI7IiAhPT0gZVtlLmxlbmd0aCAtIDFdICYmIChlICs9ICI7Iik7CgogICAgICBmb3IgKHZhciByID0gZS5sZW5ndGgsIG8gPSAhMSwgYSA9IDAsIHUgPSAwLCBzID0gIiI7IHUgPCByOyB1KyspIHsKICAgICAgICB2YXIgbCA9IGVbdV07CgogICAgICAgIGlmICgiLyIgPT09IGwgJiYgIioiID09PSBlW3UgKyAxXSkgewogICAgICAgICAgdmFyIGMgPSBlLmluZGV4T2YoIiovIiwgdSArIDIpOwogICAgICAgICAgaWYgKC0xID09PSBjKSBicmVhazsKICAgICAgICAgIHUgPSBjICsgMSwgYSA9IHUgKyAxLCBvID0gITE7CiAgICAgICAgfSBlbHNlICIoIiA9PT0gbCA/IG8gPSAhMCA6ICIpIiA9PT0gbCA/IG8gPSAhMSA6ICI7IiA9PT0gbCA/IG8gfHwgbigpIDogIlxuIiA9PT0gbCAmJiBuKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBpLnRyaW0ocyk7CiAgICB9CgogICAgdmFyIGkgPSBuKDE3KTsKICAgIGUuZXhwb3J0cyA9IHI7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oMCksCiAgICAgICAgaSA9IG4oMSksCiAgICAgICAgbyA9IHIoIiVUeXBlRXJyb3IlIiksCiAgICAgICAgYSA9IG4oNTQpLAogICAgICAgIHUgPSByKCIlUmVmbGVjdC5hcHBseSUiLCAhMCkgfHwgaSgiJUZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseSUiKTsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogW107CiAgICAgIGlmICghYShuKSkgdGhyb3cgbmV3IG8oIkFzc2VydGlvbiBmYWlsZWQ6IG9wdGlvbmFsIGBhcmd1bWVudHNMaXN0YCwgaWYgcHJvdmlkZWQsIG11c3QgYmUgYSBMaXN0Iik7CiAgICAgIHJldHVybiB1KGUsIHQsIG4pOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gbigwKSwKICAgICAgICBpID0gcigiJVR5cGVFcnJvciUiKSwKICAgICAgICBvID0gbigxOSksCiAgICAgICAgYSA9IG4oOCk7CgogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgaWYgKCJPYmplY3QiICE9PSBhKGUpKSB0aHJvdyBuZXcgaSgiQXNzZXJ0aW9uIGZhaWxlZDogYE9gIG11c3QgYmUgYW4gT2JqZWN0Iik7CiAgICAgIGlmICghbyh0KSkgdGhyb3cgbmV3IGkoIkFzc2VydGlvbiBmYWlsZWQ6IGBQYCBtdXN0IGJlIGEgUHJvcGVydHkgS2V5Iik7CiAgICAgIHJldHVybiB0IGluIGU7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBuKDApLAogICAgICAgIGkgPSByKCIlQXJyYXklIiksCiAgICAgICAgbyA9ICFpLmlzQXJyYXkgJiYgbigxKSgiT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyIpOwoKICAgIGUuZXhwb3J0cyA9IGkuaXNBcnJheSB8fCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gIltvYmplY3QgQXJyYXldIiA9PT0gbyhlKTsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICBlLmV4cG9ydHMgPSBuKDEwKTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gbigwKSwKICAgICAgICBpID0gcigiJVR5cGVFcnJvciUiKSwKICAgICAgICBvID0gbigxOCksCiAgICAgICAgYSA9IG4oNTgpLAogICAgICAgIHUgPSBuKDgpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmICgiT2JqZWN0IiAhPT0gdShlKSkgdGhyb3cgbmV3IGkoIkFzc2VydGlvbiBmYWlsZWQ6IGBvYmpgIG11c3QgYmUgYW4gT2JqZWN0Iik7CiAgICAgIHJldHVybiBhKG8oZSwgImxlbmd0aCIpKTsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oNjMpLAogICAgICAgIGkgPSBuKDU5KTsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IGkoZSk7CiAgICAgIHJldHVybiAwICE9PSB0ICYmICh0ID0gcih0KSksIDAgPT09IHQgPyAwIDogdDsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oNzIpLAogICAgICAgIGkgPSBuKDU3KTsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IGkoZSk7CiAgICAgIHJldHVybiB0IDw9IDAgPyAwIDogdCA+IHIgPyByIDogdDsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oMCksCiAgICAgICAgaSA9IHIoIiVUeXBlRXJyb3IlIiksCiAgICAgICAgbyA9IHIoIiVOdW1iZXIlIiksCiAgICAgICAgYSA9IHIoIiVSZWdFeHAlIiksCiAgICAgICAgdSA9IHIoIiVwYXJzZUludCUiKSwKICAgICAgICBzID0gbigxKSwKICAgICAgICBsID0gbig3MyksCiAgICAgICAgYyA9IG4oNzEpLAogICAgICAgIGYgPSBzKCJTdHJpbmcucHJvdG90eXBlLnNsaWNlIiksCiAgICAgICAgcCA9IGwoL14wYlswMV0rJC9pKSwKICAgICAgICBkID0gbCgvXjBvWzAtN10rJC9pKSwKICAgICAgICBoID0gbCgvXlstK10weFswLTlhLWZdKyQvaSksCiAgICAgICAgdiA9IFsiwoUiLCAi4oCLIiwgIu+/viJdLmpvaW4oIiIpLAogICAgICAgIGcgPSBuZXcgYSgiWyIgKyB2ICsgIl0iLCAiZyIpLAogICAgICAgIG0gPSBsKGcpLAogICAgICAgIHkgPSBbIlx0XG5cdlxmXHIgwqDhmoDhoI7igIDigIHigILigIMiLCAi4oCE4oCF4oCG4oCH4oCI4oCJ4oCK4oCv4oGf44CAXHUyMDI4IiwgIlx1MjAyOVx1ZmVmZiJdLmpvaW4oIiIpLAogICAgICAgIGIgPSBuZXcgUmVnRXhwKCIoXlsiICsgeSArICJdKyl8KFsiICsgeSArICJdKyQpIiwgImciKSwKICAgICAgICBEID0gcygiU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlIiksCiAgICAgICAgeCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBEKGUsIGIsICIiKTsKICAgIH0sCiAgICAgICAgdyA9IG4oNjEpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGUodCkgewogICAgICB2YXIgbiA9IGModCkgPyB0IDogdyh0LCBvKTsKICAgICAgaWYgKCJzeW1ib2wiID09IHR5cGVvZiBuKSB0aHJvdyBuZXcgaSgiQ2Fubm90IGNvbnZlcnQgYSBTeW1ib2wgdmFsdWUgdG8gYSBudW1iZXIiKTsKICAgICAgaWYgKCJiaWdpbnQiID09IHR5cGVvZiBuKSB0aHJvdyBuZXcgaSgiQ29udmVyc2lvbiBmcm9tICdCaWdJbnQnIHRvICdudW1iZXInIGlzIG5vdCBhbGxvd2VkLiIpOwoKICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBuKSB7CiAgICAgICAgaWYgKHAobikpIHJldHVybiBlKHUoZihuLCAyKSwgMikpOwogICAgICAgIGlmIChkKG4pKSByZXR1cm4gZSh1KGYobiwgMiksIDgpKTsKICAgICAgICBpZiAobShuKSB8fCBoKG4pKSByZXR1cm4gTmFOOwogICAgICAgIHZhciByID0geChuKTsKICAgICAgICBpZiAociAhPT0gbikgcmV0dXJuIGUocik7CiAgICAgIH0KCiAgICAgIHJldHVybiBvKG4pOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gbigwKSwKICAgICAgICBpID0gcigiJU9iamVjdCUiKSwKICAgICAgICBvID0gbig1KTsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gbyhlKSwgaShlKTsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oNzYpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMSA/IHIoZSwgYXJndW1lbnRzWzFdKSA6IHIoZSk7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBuKDApLAogICAgICAgIGkgPSByKCIlVHlwZUVycm9yJSIpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIGlmIChudWxsID09IGUpIHRocm93IG5ldyBpKHQgfHwgIkNhbm5vdCBjYWxsIG1ldGhvZCBvbiAiICsgZSk7CiAgICAgIHJldHVybiBlOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gbig2NyksCiAgICAgICAgaSA9IG4oNjgpLAogICAgICAgIG8gPSBuKDY0KSwKICAgICAgICBhID0gbig3MCksCiAgICAgICAgdSA9IG4oNjkpLAogICAgICAgIHMgPSBuKDc0KTsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IG8oZSk7CiAgICAgIHJldHVybiBhKHQpID8gMCA6IDAgIT09IHQgJiYgdSh0KSA/IHModCkgKiBpKHIodCkpIDogdDsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oNjUpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gcihlLCBOdW1iZXIpOwogICAgICBpZiAoInN0cmluZyIgIT0gdHlwZW9mIHQpIHJldHVybiArdDsKICAgICAgdmFyIG4gPSB0LnJlcGxhY2UoL15bIFx0XHgwYlxmXHhhMFx1ZmVmZlxuXHJcdTIwMjhcdTIwMjlcdTE2ODBcdTE4MGVcdTIwMDBcdTIwMDFcdTIwMDJcdTIwMDNcdTIwMDRcdTIwMDVcdTIwMDZcdTIwMDdcdTIwMDhcdTIwMDlcdTIwMGFcdTIwMmZcdTIwNWZcdTMwMDBcdTAwODVdK3xbIFx0XHgwYlxmXHhhMFx1ZmVmZlxuXHJcdTIwMjhcdTIwMjlcdTE2ODBcdTE4MGVcdTIwMDBcdTIwMDFcdTIwMDJcdTIwMDNcdTIwMDRcdTIwMDVcdTIwMDZcdTIwMDdcdTIwMDhcdTIwMDlcdTIwMGFcdTIwMmZcdTIwNWZcdTMwMDBcdTAwODVdKyQvZywgIiIpOwogICAgICByZXR1cm4gL14wW29iXXxeWystXTB4Ly50ZXN0KG4pID8gTmFOIDogK247CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgZS5leHBvcnRzID0gbig3Nyk7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gbnVsbCA9PT0gZSA/ICJOdWxsIiA6IHZvaWQgMCA9PT0gZSA/ICJVbmRlZmluZWQiIDogImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSB8fCAib2JqZWN0IiA9PSB0eXBlb2YgZSA/ICJPYmplY3QiIDogIm51bWJlciIgPT0gdHlwZW9mIGUgPyAiTnVtYmVyIiA6ICJib29sZWFuIiA9PSB0eXBlb2YgZSA/ICJCb29sZWFuIiA6ICJzdHJpbmciID09IHR5cGVvZiBlID8gIlN0cmluZyIgOiB2b2lkIDA7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBuKDApLAogICAgICAgIGkgPSByKCIlTWF0aC5hYnMlIik7CgogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGkoZSk7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBNYXRoLmZsb29yOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiByKGUpOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlICE9PSBlOwogICAgfTsKCiAgICBlLmV4cG9ydHMgPSBOdW1iZXIuaXNGaW5pdGUgfHwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuICJudW1iZXIiID09IHR5cGVvZiBlICYmICFyKGUpICYmIGUgIT09IDEgLyAwICYmIGUgIT09IC0xIC8gMDsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICBlLmV4cG9ydHMgPSBOdW1iZXIuaXNOYU4gfHwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUgIT09IGU7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIG51bGwgPT09IGUgfHwgImZ1bmN0aW9uIiAhPSB0eXBlb2YgZSAmJiAib2JqZWN0IiAhPSB0eXBlb2YgZTsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oMCksCiAgICAgICAgaSA9IHIoIiVNYXRoJSIpLAogICAgICAgIG8gPSByKCIlTnVtYmVyJSIpOwogICAgZS5leHBvcnRzID0gby5NQVhfU0FGRV9JTlRFR0VSIHx8IGkucG93KDIsIDUzKSAtIDE7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oMCksCiAgICAgICAgaSA9IHIoIlJlZ0V4cC5wcm90b3R5cGUudGVzdCIpLAogICAgICAgIG8gPSBuKDQpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBvKGksIGUpOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlID49IDAgPyAxIDogLTE7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0KSB7CiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9ICEwLAogICAgICAgICAgbiA9ICEwLAogICAgICAgICAgciA9ICExOwoKICAgICAgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgZS5jYWxsKCJmIiwgZnVuY3Rpb24gKGUsIG4sIHIpIHsKICAgICAgICAgICAgIm9iamVjdCIgIT0gdHlwZW9mIHIgJiYgKHQgPSAhMSk7CiAgICAgICAgICB9KSwgZS5jYWxsKFtudWxsXSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAidXNlIHN0cmljdCI7CgogICAgICAgICAgICBuID0gInN0cmluZyIgPT0gdHlwZW9mIHRoaXM7CiAgICAgICAgICB9LCAieCIpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHIgPSAhMDsKICAgICAgICB9CgogICAgICAgIHJldHVybiAhciAmJiB0ICYmIG47CiAgICAgIH0KCiAgICAgIHJldHVybiAhMTsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAic3ltYm9sIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yLAogICAgICAgIGkgPSBuKDIxKSwKICAgICAgICBvID0gbigxMCksCiAgICAgICAgYSA9IG4oODApLAogICAgICAgIHUgPSBuKDgyKSwKICAgICAgICBzID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgaWYgKHZvaWQgMCA9PT0gZSB8fCBudWxsID09PSBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBtZXRob2Qgb24gIiArIGUpOwogICAgICBpZiAoInN0cmluZyIgIT0gdHlwZW9mIHQgfHwgIm51bWJlciIgIT09IHQgJiYgInN0cmluZyIgIT09IHQpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2hpbnQgbXVzdCBiZSAic3RyaW5nIiBvciAibnVtYmVyIicpOwogICAgICB2YXIgbiwKICAgICAgICAgIHIsCiAgICAgICAgICBhLAogICAgICAgICAgdSA9ICJzdHJpbmciID09PSB0ID8gWyJ0b1N0cmluZyIsICJ2YWx1ZU9mIl0gOiBbInZhbHVlT2YiLCAidG9TdHJpbmciXTsKCiAgICAgIGZvciAoYSA9IDA7IGEgPCB1Lmxlbmd0aDsgKythKSBpZiAobiA9IGVbdVthXV0sIG8obikgJiYgKHIgPSBuLmNhbGwoZSksIGkocikpKSByZXR1cm4gcjsKCiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIk5vIGRlZmF1bHQgdmFsdWUiKTsKICAgIH0sCiAgICAgICAgbCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHZhciBuID0gZVt0XTsKCiAgICAgIGlmIChudWxsICE9PSBuICYmIHZvaWQgMCAhPT0gbikgewogICAgICAgIGlmICghbyhuKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihuICsgIiByZXR1cm5lZCBmb3IgcHJvcGVydHkgIiArIHQgKyAiIG9mIG9iamVjdCAiICsgZSArICIgaXMgbm90IGEgZnVuY3Rpb24iKTsKICAgICAgICByZXR1cm4gbjsKICAgICAgfQogICAgfTsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoaShlKSkgcmV0dXJuIGU7CiAgICAgIHZhciB0ID0gImRlZmF1bHQiOwogICAgICBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiAoYXJndW1lbnRzWzFdID09PSBTdHJpbmcgPyB0ID0gInN0cmluZyIgOiBhcmd1bWVudHNbMV0gPT09IE51bWJlciAmJiAodCA9ICJudW1iZXIiKSk7CiAgICAgIHZhciBuOwoKICAgICAgaWYgKHIgJiYgKFN5bWJvbC50b1ByaW1pdGl2ZSA/IG4gPSBsKGUsIFN5bWJvbC50b1ByaW1pdGl2ZSkgOiB1KGUpICYmIChuID0gU3ltYm9sLnByb3RvdHlwZS52YWx1ZU9mKSksIHZvaWQgMCAhPT0gbikgewogICAgICAgIHZhciBvID0gbi5jYWxsKGUsIHQpOwogICAgICAgIGlmIChpKG8pKSByZXR1cm4gbzsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJ1bmFibGUgdG8gY29udmVydCBleG90aWMgb2JqZWN0IHRvIHByaW1pdGl2ZSIpOwogICAgICB9CgogICAgICByZXR1cm4gImRlZmF1bHQiID09PSB0ICYmIChhKGUpIHx8IHUoZSkpICYmICh0ID0gInN0cmluZyIpLCBzKGUsICJkZWZhdWx0IiA9PT0gdCA/ICJudW1iZXIiIDogdCk7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLAogICAgICAgIGkgPSBuKDIxKSwKICAgICAgICBvID0gbigxMCksCiAgICAgICAgYSA9IHsKICAgICAgIltbRGVmYXVsdFZhbHVlXV0iOiBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0OwoKICAgICAgICBpZiAoKHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6ICJbb2JqZWN0IERhdGVdIiA9PT0gci5jYWxsKGUpID8gU3RyaW5nIDogTnVtYmVyKSA9PT0gU3RyaW5nIHx8IHQgPT09IE51bWJlcikgewogICAgICAgICAgdmFyIG4sCiAgICAgICAgICAgICAgYSwKICAgICAgICAgICAgICB1ID0gdCA9PT0gU3RyaW5nID8gWyJ0b1N0cmluZyIsICJ2YWx1ZU9mIl0gOiBbInZhbHVlT2YiLCAidG9TdHJpbmciXTsKCiAgICAgICAgICBmb3IgKGEgPSAwOyBhIDwgdS5sZW5ndGg7ICsrYSkgaWYgKG8oZVt1W2FdXSkgJiYgKG4gPSBlW3VbYV1dKCksIGkobikpKSByZXR1cm4gbjsKCiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJObyBkZWZhdWx0IHZhbHVlIik7CiAgICAgICAgfQoKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJpbnZhbGlkIFtbRGVmYXVsdFZhbHVlXV0gaGludCBzdXBwbGllZCIpOwogICAgICB9CiAgICB9OwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBpKGUpID8gZSA6IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYVsiW1tEZWZhdWx0VmFsdWVdXSJdKGUsIGFyZ3VtZW50c1sxXSkgOiBhWyJbW0RlZmF1bHRWYWx1ZV1dIl0oZSk7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UsCiAgICAgICAgaSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CgogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSB0aGlzOwogICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgdCB8fCAiW29iamVjdCBGdW5jdGlvbl0iICE9PSBpLmNhbGwodCkpIHRocm93IG5ldyBUeXBlRXJyb3IoIkZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIGNhbGxlZCBvbiBpbmNvbXBhdGlibGUgIiArIHQpOwoKICAgICAgZm9yICh2YXIgbiwgbyA9IHIuY2FsbChhcmd1bWVudHMsIDEpLCBhID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgbikgewogICAgICAgICAgdmFyIGkgPSB0LmFwcGx5KHRoaXMsIG8uY29uY2F0KHIuY2FsbChhcmd1bWVudHMpKSk7CiAgICAgICAgICByZXR1cm4gT2JqZWN0KGkpID09PSBpID8gaSA6IHRoaXM7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdC5hcHBseShlLCBvLmNvbmNhdChyLmNhbGwoYXJndW1lbnRzKSkpOwogICAgICB9LCB1ID0gTWF0aC5tYXgoMCwgdC5sZW5ndGggLSBvLmxlbmd0aCksIHMgPSBbXSwgbCA9IDA7IGwgPCB1OyBsKyspIHMucHVzaCgiJCIgKyBsKTsKCiAgICAgIGlmIChuID0gRnVuY3Rpb24oImJpbmRlciIsICJyZXR1cm4gZnVuY3Rpb24gKCIgKyBzLmpvaW4oIiwiKSArICIpeyByZXR1cm4gYmluZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTsgfSIpKGEpLCB0LnByb3RvdHlwZSkgewogICAgICAgIHZhciBjID0gZnVuY3Rpb24gKCkge307CgogICAgICAgIGMucHJvdG90eXBlID0gdC5wcm90b3R5cGUsIG4ucHJvdG90eXBlID0gbmV3IGMoKSwgYy5wcm90b3R5cGUgPSBudWxsOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICFmdW5jdGlvbiAodCwgbikgewogICAgICBlLmV4cG9ydHMgPSBuKCk7CiAgICB9KDAsIGZ1bmN0aW9uICgpIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgZnVuY3Rpb24gZShlKSB7CiAgICAgICAgcmV0dXJuICc8c3BhbiBzdHlsZT0iY29sb3I6IHNsYXRlZ3JheSI+JyArIGUgKyAiPC9zcGFuPiI7CiAgICAgIH0KCiAgICAgIHZhciB0ID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICByZXR1cm4gdCA9IHsKICAgICAgICAgIGV4cG9ydHM6IHt9CiAgICAgICAgfSwgZSh0LCB0LmV4cG9ydHMpLCB0LmV4cG9ydHM7CiAgICAgIH0oZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdCA9IGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKCIoPzoiICsgdC5saW5lKCkuc291cmNlICsgIil8KD86IiArIHQuYmxvY2soKS5zb3VyY2UgKyAiKSIsICJnbSIpOwogICAgICAgIH07CgogICAgICAgIHQubGluZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiAvKD86XnxccylcL1wvKC4rPykkL2dtOwogICAgICAgIH0sIHQuYmxvY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gL1wvXCooW1xTXHNdKj8pXCpcLy9nbTsKICAgICAgICB9OwogICAgICB9KSwKICAgICAgICAgIG4gPSBbIjIzQUM2OSIsICI5MUMxMzIiLCAiRjE5NzI2IiwgIkU4NTUyRCIsICIxQUFCOEUiLCAiRTExNDdGIiwgIjI5ODBDMSIsICIxQkExRTYiLCAiOUZBMEEwIiwgIkYxOTcyNiIsICJFMzBCMjAiLCAiRTMwQjIwIiwgIkEzMzM4QiJdOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyLCBpKSB7CiAgICAgICAgdm9pZCAwID09PSBpICYmIChpID0ge30pOwogICAgICAgIHZhciBvID0gaS5jb2xvcnM7CiAgICAgICAgdm9pZCAwID09PSBvICYmIChvID0gbik7CiAgICAgICAgdmFyIGEgPSAwLAogICAgICAgICAgICB1ID0ge30sCiAgICAgICAgICAgIHMgPSAvW1x1NEUwMC1cdTlGRkZcdTM0MDAtXHU0ZGJmXHVmOTAwLVx1ZmFmZlx1MzA0MC1cdTMwOWZcdWFjMDAtXHVkN2FmXHUwNDAwLVx1MDRGRl0rfFx3Ky8sCiAgICAgICAgICAgIGwgPSAvPC8sCiAgICAgICAgICAgIGMgPSBuZXcgUmVnRXhwKCIoIiArIHMuc291cmNlICsgInwiICsgbC5zb3VyY2UgKyAiKXwoIiArIHQoKS5zb3VyY2UgKyAiKSIsICJnbWkiKTsKICAgICAgICByZXR1cm4gci5yZXBsYWNlKGMsIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgICAgICBpZiAocikgcmV0dXJuIGUocik7CiAgICAgICAgICBpZiAoIjwiID09PSBuKSByZXR1cm4gIiZsdDsiOwogICAgICAgICAgdmFyIGk7CiAgICAgICAgICB1W25dID8gaSA9IHVbbl0gOiAoaSA9IG9bYV0sIHVbbl0gPSBpKTsKICAgICAgICAgIHZhciBzID0gJzxzcGFuIHN0eWxlPSJjb2xvcjogIycgKyBpICsgJyI+JyArIG4gKyAiPC9zcGFuPiI7CiAgICAgICAgICByZXR1cm4gYSA9ICsrYSAlIG8ubGVuZ3RoLCBzOwogICAgICAgIH0pOwogICAgICB9OwogICAgfSk7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IERhdGUucHJvdG90eXBlLmdldERheSwKICAgICAgICBpID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gci5jYWxsKGUpLCAhMDsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiAhMTsKICAgICAgfQogICAgfSwKICAgICAgICBvID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZywKICAgICAgICBhID0gbigyNCkoKTsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgbnVsbCAhPT0gZSAmJiAoYSA/IGkoZSkgOiAiW29iamVjdCBEYXRlXSIgPT09IG8uY2FsbChlKSk7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBTdHJpbmcucHJvdG90eXBlLnZhbHVlT2YsCiAgICAgICAgaSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIHIuY2FsbChlKSwgITA7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gITE7CiAgICAgIH0KICAgIH0sCiAgICAgICAgbyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsCiAgICAgICAgYSA9IG4oMjQpKCk7CgogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuICJzdHJpbmciID09IHR5cGVvZiBlIHx8ICJvYmplY3QiID09IHR5cGVvZiBlICYmIChhID8gaShlKSA6ICJbb2JqZWN0IFN0cmluZ10iID09PSBvLmNhbGwoZSkpOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzsKCiAgICBpZiAobigyMikoKSkgewogICAgICB2YXIgaSA9IFN5bWJvbC5wcm90b3R5cGUudG9TdHJpbmcsCiAgICAgICAgICBvID0gL15TeW1ib2xcKC4qXCkkLywKICAgICAgICAgIGEgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiAic3ltYm9sIiA9PSB0eXBlb2YgZS52YWx1ZU9mKCkgJiYgby50ZXN0KGkuY2FsbChlKSk7CiAgICAgIH07CgogICAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIGlmICgic3ltYm9sIiA9PSB0eXBlb2YgZSkgcmV0dXJuICEwOwogICAgICAgIGlmICgiW29iamVjdCBTeW1ib2xdIiAhPT0gci5jYWxsKGUpKSByZXR1cm4gITE7CgogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gYShlKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgfQogICAgICB9OwogICAgfSBlbHNlIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiAhMTsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICFmdW5jdGlvbiAoZSwgbikgewogICAgICBuKHQpOwogICAgfSgwLCBmdW5jdGlvbiAoZSkgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBmdW5jdGlvbiB0KGUsIHQpIHsKICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspIHsKICAgICAgICAgIHZhciByID0gdFtuXTsKICAgICAgICAgIHIuZW51bWVyYWJsZSA9IHIuZW51bWVyYWJsZSB8fCAhMSwgci5jb25maWd1cmFibGUgPSAhMCwgInZhbHVlIiBpbiByICYmIChyLndyaXRhYmxlID0gITApLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgci5rZXksIHIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gbihlLCBuLCByKSB7CiAgICAgICAgcmV0dXJuIG4gJiYgdChlLnByb3RvdHlwZSwgbiksIHIgJiYgdChlLCByKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsICJwcm90b3R5cGUiLCB7CiAgICAgICAgICB3cml0YWJsZTogITEKICAgICAgICB9KSwgZTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gcihlLCB0KSB7CiAgICAgICAgaWYgKGUpIHsKICAgICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgZSkgcmV0dXJuIGkoZSwgdCk7CiAgICAgICAgICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LCAtMSk7CiAgICAgICAgICByZXR1cm4gIk9iamVjdCIgPT09IG4gJiYgZS5jb25zdHJ1Y3RvciAmJiAobiA9IGUuY29uc3RydWN0b3IubmFtZSksICJNYXAiID09PSBuIHx8ICJTZXQiID09PSBuID8gQXJyYXkuZnJvbShlKSA6ICJBcmd1bWVudHMiID09PSBuIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pID8gaShlLCB0KSA6IHZvaWQgMDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGkoZSwgdCkgewogICAgICAgIChudWxsID09IHQgfHwgdCA+IGUubGVuZ3RoKSAmJiAodCA9IGUubGVuZ3RoKTsKCiAgICAgICAgZm9yICh2YXIgbiA9IDAsIHIgPSBuZXcgQXJyYXkodCk7IG4gPCB0OyBuKyspIHJbbl0gPSBlW25dOwoKICAgICAgICByZXR1cm4gcjsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gbyhlLCB0KSB7CiAgICAgICAgdmFyIG4gPSAidW5kZWZpbmVkIiAhPSB0eXBlb2YgU3ltYm9sICYmIGVbU3ltYm9sLml0ZXJhdG9yXSB8fCBlWyJAQGl0ZXJhdG9yIl07CiAgICAgICAgaWYgKG4pIHJldHVybiAobiA9IG4uY2FsbChlKSkubmV4dC5iaW5kKG4pOwoKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSB8fCAobiA9IHIoZSkpIHx8IHQgJiYgZSAmJiAibnVtYmVyIiA9PSB0eXBlb2YgZS5sZW5ndGgpIHsKICAgICAgICAgIG4gJiYgKGUgPSBuKTsKICAgICAgICAgIHZhciBpID0gMDsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBpID49IGUubGVuZ3RoID8gewogICAgICAgICAgICAgIGRvbmU6ICEwCiAgICAgICAgICAgIH0gOiB7CiAgICAgICAgICAgICAgZG9uZTogITEsCiAgICAgICAgICAgICAgdmFsdWU6IGVbaSsrXQogICAgICAgICAgICB9OwogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gYSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgYmFzZVVybDogbnVsbCwKICAgICAgICAgIGJyZWFrczogITEsCiAgICAgICAgICBleHRlbnNpb25zOiBudWxsLAogICAgICAgICAgZ2ZtOiAhMCwKICAgICAgICAgIGhlYWRlcklkczogITAsCiAgICAgICAgICBoZWFkZXJQcmVmaXg6ICIiLAogICAgICAgICAgaGlnaGxpZ2h0OiBudWxsLAogICAgICAgICAgbGFuZ1ByZWZpeDogImxhbmd1YWdlLSIsCiAgICAgICAgICBtYW5nbGU6ICEwLAogICAgICAgICAgcGVkYW50aWM6ICExLAogICAgICAgICAgcmVuZGVyZXI6IG51bGwsCiAgICAgICAgICBzYW5pdGl6ZTogITEsCiAgICAgICAgICBzYW5pdGl6ZXI6IG51bGwsCiAgICAgICAgICBzaWxlbnQ6ICExLAogICAgICAgICAgc21hcnRMaXN0czogITEsCiAgICAgICAgICBzbWFydHlwYW50czogITEsCiAgICAgICAgICB0b2tlbml6ZXI6IG51bGwsCiAgICAgICAgICB3YWxrVG9rZW5zOiBudWxsLAogICAgICAgICAgeGh0bWw6ICExCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gdSh0KSB7CiAgICAgICAgZS5kZWZhdWx0cyA9IHQ7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHMoZSwgdCkgewogICAgICAgIGlmICh0KSB7CiAgICAgICAgICBpZiAoay50ZXN0KGUpKSByZXR1cm4gZS5yZXBsYWNlKEUsIFMpOwogICAgICAgIH0gZWxzZSBpZiAoRi50ZXN0KGUpKSByZXR1cm4gZS5yZXBsYWNlKEMsIFMpOwoKICAgICAgICByZXR1cm4gZTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gbChlKSB7CiAgICAgICAgcmV0dXJuIGUucmVwbGFjZShPLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgcmV0dXJuIHQgPSB0LnRvTG93ZXJDYXNlKCksICJjb2xvbiIgPT09IHQgPyAiOiIgOiAiIyIgPT09IHQuY2hhckF0KDApID8gIngiID09PSB0LmNoYXJBdCgxKSA/IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQodC5zdWJzdHJpbmcoMiksIDE2KSkgOiBTdHJpbmcuZnJvbUNoYXJDb2RlKCt0LnN1YnN0cmluZygxKSkgOiAiIjsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gYyhlLCB0KSB7CiAgICAgICAgZSA9IGUuc291cmNlIHx8IGUsIHQgPSB0IHx8ICIiOwogICAgICAgIHZhciBuID0gewogICAgICAgICAgcmVwbGFjZTogZnVuY3Rpb24gKHQsIHIpIHsKICAgICAgICAgICAgcmV0dXJuIHIgPSByLnNvdXJjZSB8fCByLCByID0gci5yZXBsYWNlKEIsICIkMSIpLCBlID0gZS5yZXBsYWNlKHQsIHIpLCBuOwogICAgICAgICAgfSwKICAgICAgICAgIGdldFJlZ2V4OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKGUsIHQpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgcmV0dXJuIG47CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGYoZSwgdCwgbikgewogICAgICAgIGlmIChlKSB7CiAgICAgICAgICB2YXIgcjsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICByID0gZGVjb2RlVVJJQ29tcG9uZW50KGwobikpLnJlcGxhY2UoJCwgIiIpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICgwID09PSByLmluZGV4T2YoImphdmFzY3JpcHQ6IikgfHwgMCA9PT0gci5pbmRleE9mKCJ2YnNjcmlwdDoiKSB8fCAwID09PSByLmluZGV4T2YoImRhdGE6IikpIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgdCAmJiAhai50ZXN0KG4pICYmIChuID0gcCh0LCBuKSk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBuID0gZW5jb2RlVVJJKG4pLnJlcGxhY2UoLyUyNS9nLCAiJSIpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG47CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHAoZSwgdCkgewogICAgICAgIFRbIiAiICsgZV0gfHwgKEkudGVzdChlKSA/IFRbIiAiICsgZV0gPSBlICsgIi8iIDogVFsiICIgKyBlXSA9IHYoZSwgIi8iLCAhMCkpLCBlID0gVFsiICIgKyBlXTsKICAgICAgICB2YXIgbiA9IC0xID09PSBlLmluZGV4T2YoIjoiKTsKICAgICAgICByZXR1cm4gIi8vIiA9PT0gdC5zdWJzdHJpbmcoMCwgMikgPyBuID8gdCA6IGUucmVwbGFjZSh6LCAiJDEiKSArIHQgOiAiLyIgPT09IHQuY2hhckF0KDApID8gbiA/IHQgOiBlLnJlcGxhY2UoUiwgIiQxIikgKyB0IDogZSArIHQ7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGQoZSkgewogICAgICAgIGZvciAodmFyIHQsIG4sIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7CiAgICAgICAgICB0ID0gYXJndW1lbnRzW3JdOwoKICAgICAgICAgIGZvciAobiBpbiB0KSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgbikgJiYgKGVbbl0gPSB0W25dKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBlOwogICAgICB9CgogICAgICBmdW5jdGlvbiBoKGUsIHQpIHsKICAgICAgICB2YXIgbiA9IGUucmVwbGFjZSgvXHwvZywgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICAgIGZvciAodmFyIHIgPSAhMSwgaSA9IHQ7IC0taSA+PSAwICYmICJcXCIgPT09IG5baV07KSByID0gIXI7CgogICAgICAgICAgcmV0dXJuIHIgPyAifCIgOiAiIHwiOwogICAgICAgIH0pLAogICAgICAgICAgICByID0gbi5zcGxpdCgvIFx8LyksCiAgICAgICAgICAgIGkgPSAwOwogICAgICAgIGlmIChyWzBdLnRyaW0oKSB8fCByLnNoaWZ0KCksIHIubGVuZ3RoID4gMCAmJiAhcltyLmxlbmd0aCAtIDFdLnRyaW0oKSAmJiByLnBvcCgpLCByLmxlbmd0aCA+IHQpIHIuc3BsaWNlKHQpO2Vsc2UgZm9yICg7IHIubGVuZ3RoIDwgdDspIHIucHVzaCgiIik7CgogICAgICAgIGZvciAoOyBpIDwgci5sZW5ndGg7IGkrKykgcltpXSA9IHJbaV0udHJpbSgpLnJlcGxhY2UoL1xcXHwvZywgInwiKTsKCiAgICAgICAgcmV0dXJuIHI7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHYoZSwgdCwgbikgewogICAgICAgIHZhciByID0gZS5sZW5ndGg7CiAgICAgICAgaWYgKDAgPT09IHIpIHJldHVybiAiIjsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByOykgewogICAgICAgICAgdmFyIG8gPSBlLmNoYXJBdChyIC0gaSAtIDEpOwoKICAgICAgICAgIGlmIChvICE9PSB0IHx8IG4pIHsKICAgICAgICAgICAgaWYgKG8gPT09IHQgfHwgIW4pIGJyZWFrOwogICAgICAgICAgICBpKys7CiAgICAgICAgICB9IGVsc2UgaSsrOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGUuc3Vic3RyKDAsIHIgLSBpKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZyhlLCB0KSB7CiAgICAgICAgaWYgKC0xID09PSBlLmluZGV4T2YodFsxXSkpIHJldHVybiAtMTsKCiAgICAgICAgZm9yICh2YXIgbiA9IGUubGVuZ3RoLCByID0gMCwgaSA9IDA7IGkgPCBuOyBpKyspIGlmICgiXFwiID09PSBlW2ldKSBpKys7ZWxzZSBpZiAoZVtpXSA9PT0gdFswXSkgcisrO2Vsc2UgaWYgKGVbaV0gPT09IHRbMV0gJiYgLS1yIDwgMCkgcmV0dXJuIGk7CgogICAgICAgIHJldHVybiAtMTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gbShlKSB7CiAgICAgICAgZSAmJiBlLnNhbml0aXplICYmIGUuc2lsZW50OwogICAgICB9CgogICAgICBmdW5jdGlvbiB5KGUsIHQpIHsKICAgICAgICBpZiAodCA8IDEpIHJldHVybiAiIjsKCiAgICAgICAgZm9yICh2YXIgbiA9ICIiOyB0ID4gMTspIDEgJiB0ICYmIChuICs9IGUpLCB0ID4+PSAxLCBlICs9IGU7CgogICAgICAgIHJldHVybiBuICsgZTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gYihlLCB0LCBuLCByKSB7CiAgICAgICAgdmFyIGkgPSB0LmhyZWYsCiAgICAgICAgICAgIG8gPSB0LnRpdGxlID8gcyh0LnRpdGxlKSA6IG51bGwsCiAgICAgICAgICAgIGEgPSBlWzFdLnJlcGxhY2UoL1xcKFtcW1xdXSkvZywgIiQxIik7CgogICAgICAgIGlmICgiISIgIT09IGVbMF0uY2hhckF0KDApKSB7CiAgICAgICAgICByLnN0YXRlLmluTGluayA9ICEwOwogICAgICAgICAgdmFyIHUgPSB7CiAgICAgICAgICAgIHR5cGU6ICJsaW5rIiwKICAgICAgICAgICAgcmF3OiBuLAogICAgICAgICAgICBocmVmOiBpLAogICAgICAgICAgICB0aXRsZTogbywKICAgICAgICAgICAgdGV4dDogYSwKICAgICAgICAgICAgdG9rZW5zOiByLmlubGluZVRva2VucyhhLCBbXSkKICAgICAgICAgIH07CiAgICAgICAgICByZXR1cm4gci5zdGF0ZS5pbkxpbmsgPSAhMSwgdTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0eXBlOiAiaW1hZ2UiLAogICAgICAgICAgcmF3OiBuLAogICAgICAgICAgaHJlZjogaSwKICAgICAgICAgIHRpdGxlOiBvLAogICAgICAgICAgdGV4dDogcyhhKQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIEQoZSwgdCkgewogICAgICAgIHZhciBuID0gZS5tYXRjaCgvXihccyspKD86YGBgKS8pOwogICAgICAgIGlmIChudWxsID09PSBuKSByZXR1cm4gdDsKICAgICAgICB2YXIgciA9IG5bMV07CiAgICAgICAgcmV0dXJuIHQuc3BsaXQoIlxuIikubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCA9IGUubWF0Y2goL15ccysvKTsKICAgICAgICAgIHJldHVybiBudWxsID09PSB0ID8gZSA6IHRbMF0ubGVuZ3RoID49IHIubGVuZ3RoID8gZS5zbGljZShyLmxlbmd0aCkgOiBlOwogICAgICAgIH0pLmpvaW4oIlxuIik7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHgoZSkgewogICAgICAgIHJldHVybiBlLnJlcGxhY2UoLy0tLS9nLCAi4oCUIikucmVwbGFjZSgvLS0vZywgIuKAkyIpLnJlcGxhY2UoLyhefFstXHUyMDE0LyhcW3siXHNdKScvZywgIiQx4oCYIikucmVwbGFjZSgvJy9nLCAi4oCZIikucmVwbGFjZSgvKF58Wy1cdTIwMTQvKFxbe1x1MjAxOFxzXSkiL2csICIkMeKAnCIpLnJlcGxhY2UoLyIvZywgIuKAnSIpLnJlcGxhY2UoL1wuezN9L2csICLigKYiKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gdyhlKSB7CiAgICAgICAgdmFyIHQsCiAgICAgICAgICAgIG4sCiAgICAgICAgICAgIHIgPSAiIiwKICAgICAgICAgICAgaSA9IGUubGVuZ3RoOwoKICAgICAgICBmb3IgKHQgPSAwOyB0IDwgaTsgdCsrKSBuID0gZS5jaGFyQ29kZUF0KHQpLCBNYXRoLnJhbmRvbSgpID4gLjUgJiYgKG4gPSAieCIgKyBuLnRvU3RyaW5nKDE2KSksIHIgKz0gIiYjIiArIG4gKyAiOyI7CgogICAgICAgIHJldHVybiByOwogICAgICB9CgogICAgICBmdW5jdGlvbiBBKGUsIHQsIG4pIHsKICAgICAgICBpZiAodm9pZCAwID09PSBlIHx8IG51bGwgPT09IGUpIHRocm93IG5ldyBFcnJvcigibWFya2VkKCk6IGlucHV0IHBhcmFtZXRlciBpcyB1bmRlZmluZWQgb3IgbnVsbCIpOwogICAgICAgIGlmICgic3RyaW5nIiAhPSB0eXBlb2YgZSkgdGhyb3cgbmV3IEVycm9yKCJtYXJrZWQoKTogaW5wdXQgcGFyYW1ldGVyIGlzIG9mIHR5cGUgIiArIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSArICIsIHN0cmluZyBleHBlY3RlZCIpOwoKICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgdCAmJiAobiA9IHQsIHQgPSBudWxsKSwgdCA9IGQoe30sIEEuZGVmYXVsdHMsIHQgfHwge30pLCBtKHQpLCBuKSB7CiAgICAgICAgICB2YXIgciwKICAgICAgICAgICAgICBpID0gdC5oaWdobGlnaHQ7CgogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgciA9IFUubGV4KGUsIHQpOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICByZXR1cm4gbihlKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgbyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBvOwogICAgICAgICAgICBpZiAoIWUpIHRyeSB7CiAgICAgICAgICAgICAgdC53YWxrVG9rZW5zICYmIEEud2Fsa1Rva2VucyhyLCB0LndhbGtUb2tlbnMpLCBvID0gVi5wYXJzZShyLCB0KTsKICAgICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAgIGUgPSB0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0LmhpZ2hsaWdodCA9IGksIGUgPyBuKGUpIDogbihudWxsLCBvKTsKICAgICAgICAgIH07CgogICAgICAgICAgaWYgKCFpIHx8IGkubGVuZ3RoIDwgMykgcmV0dXJuIG8oKTsKICAgICAgICAgIGlmIChkZWxldGUgdC5oaWdobGlnaHQsICFyLmxlbmd0aCkgcmV0dXJuIG8oKTsKICAgICAgICAgIHZhciBhID0gMDsKICAgICAgICAgIHJldHVybiBBLndhbGtUb2tlbnMociwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgImNvZGUiID09PSBlLnR5cGUgJiYgKGErKywgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgaShlLnRleHQsIGUubGFuZywgZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gbyh0KTsKICAgICAgICAgICAgICAgIG51bGwgIT0gbiAmJiBuICE9PSBlLnRleHQgJiYgKGUudGV4dCA9IG4sIGUuZXNjYXBlZCA9ICEwKSwgMCA9PT0gLS1hICYmIG8oKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwgMCkpOwogICAgICAgICAgfSksIHZvaWQgKDAgPT09IGEgJiYgbygpKTsKICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgdSA9IFUubGV4KGUsIHQpOwogICAgICAgICAgcmV0dXJuIHQud2Fsa1Rva2VucyAmJiBBLndhbGtUb2tlbnModSwgdC53YWxrVG9rZW5zKSwgVi5wYXJzZSh1LCB0KTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBpZiAoZS5tZXNzYWdlICs9ICJcblBsZWFzZSByZXBvcnQgdGhpcyB0byBodHRwczovL2dpdGh1Yi5jb20vbWFya2VkanMvbWFya2VkLiIsIHQuc2lsZW50KSByZXR1cm4gIjxwPkFuIGVycm9yIG9jY3VycmVkOjwvcD48cHJlPiIgKyBzKGUubWVzc2FnZSArICIiLCAhMCkgKyAiPC9wcmU+IjsKICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgICB9CgogICAgICBlLmRlZmF1bHRzID0gYSgpOwoKICAgICAgdmFyIGsgPSAvWyY8PiInXS8sCiAgICAgICAgICBFID0gL1smPD4iJ10vZywKICAgICAgICAgIEYgPSAvWzw+IiddfCYoPyEjP1x3KzspLywKICAgICAgICAgIEMgPSAvWzw+IiddfCYoPyEjP1x3KzspL2csCiAgICAgICAgICBfID0gewogICAgICAgICImIjogIiZhbXA7IiwKICAgICAgICAiPCI6ICImbHQ7IiwKICAgICAgICAiPiI6ICImZ3Q7IiwKICAgICAgICAnIic6ICImcXVvdDsiLAogICAgICAgICInIjogIiYjMzk7IgogICAgICB9LAogICAgICAgICAgUyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIF9bZV07CiAgICAgIH0sCiAgICAgICAgICBPID0gLyYoIyg/OlxkKyl8KD86I3hbMC05QS1GYS1mXSspfCg/Olx3KykpOz8vZ2ksCiAgICAgICAgICBCID0gLyhefFteXFtdKVxeL2csCiAgICAgICAgICAkID0gL1teXHc6XS9nLAogICAgICAgICAgaiA9IC9eJHxeW2Etel1bYS16MC05Ky4tXSo6fF5bPyNdL2ksCiAgICAgICAgICBUID0ge30sCiAgICAgICAgICBJID0gL15bXjpdKzpcLypbXi9dKiQvLAogICAgICAgICAgeiA9IC9eKFteOl0rOilbXHNcU10qJC8sCiAgICAgICAgICBSID0gL14oW146XSs6XC8qW14vXSopW1xzXFNdKiQvLAogICAgICAgICAgUCA9IHsKICAgICAgICBleGVjOiBmdW5jdGlvbiAoKSB7fQogICAgICB9LAogICAgICAgICAgTSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiB0KHQpIHsKICAgICAgICAgIHRoaXMub3B0aW9ucyA9IHQgfHwgZS5kZWZhdWx0czsKICAgICAgICB9CgogICAgICAgIHZhciBuID0gdC5wcm90b3R5cGU7CiAgICAgICAgcmV0dXJuIG4uc3BhY2UgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgdmFyIHQgPSB0aGlzLnJ1bGVzLmJsb2NrLm5ld2xpbmUuZXhlYyhlKTsKICAgICAgICAgIGlmICh0ICYmIHRbMF0ubGVuZ3RoID4gMCkgcmV0dXJuIHsKICAgICAgICAgICAgdHlwZTogInNwYWNlIiwKICAgICAgICAgICAgcmF3OiB0WzBdCiAgICAgICAgICB9OwogICAgICAgIH0sIG4uY29kZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCA9IHRoaXMucnVsZXMuYmxvY2suY29kZS5leGVjKGUpOwoKICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgIHZhciBuID0gdFswXS5yZXBsYWNlKC9eIHsxLDR9L2dtLCAiIik7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgdHlwZTogImNvZGUiLAogICAgICAgICAgICAgIHJhdzogdFswXSwKICAgICAgICAgICAgICBjb2RlQmxvY2tTdHlsZTogImluZGVudGVkIiwKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLm9wdGlvbnMucGVkYW50aWMgPyBuIDogdihuLCAiXG4iKQogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0sIG4uZmVuY2VzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0ID0gdGhpcy5ydWxlcy5ibG9jay5mZW5jZXMuZXhlYyhlKTsKCiAgICAgICAgICBpZiAodCkgewogICAgICAgICAgICB2YXIgbiA9IHRbMF0sCiAgICAgICAgICAgICAgICByID0gRChuLCB0WzNdIHx8ICIiKTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICB0eXBlOiAiY29kZSIsCiAgICAgICAgICAgICAgcmF3OiBuLAogICAgICAgICAgICAgIGxhbmc6IHRbMl0gPyB0WzJdLnRyaW0oKSA6IHRbMl0sCiAgICAgICAgICAgICAgdGV4dDogcgogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0sIG4uaGVhZGluZyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCA9IHRoaXMucnVsZXMuYmxvY2suaGVhZGluZy5leGVjKGUpOwoKICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgIHZhciBuID0gdFsyXS50cmltKCk7CgogICAgICAgICAgICBpZiAoLyMkLy50ZXN0KG4pKSB7CiAgICAgICAgICAgICAgdmFyIHIgPSB2KG4sICIjIik7CiAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnBlZGFudGljID8gbiA9IHIudHJpbSgpIDogciAmJiAhLyAkLy50ZXN0KHIpIHx8IChuID0gci50cmltKCkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgaSA9IHsKICAgICAgICAgICAgICB0eXBlOiAiaGVhZGluZyIsCiAgICAgICAgICAgICAgcmF3OiB0WzBdLAogICAgICAgICAgICAgIGRlcHRoOiB0WzFdLmxlbmd0aCwKICAgICAgICAgICAgICB0ZXh0OiBuLAogICAgICAgICAgICAgIHRva2VuczogW10KICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMubGV4ZXIuaW5saW5lKGkudGV4dCwgaS50b2tlbnMpLCBpOwogICAgICAgICAgfQogICAgICAgIH0sIG4uaHIgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgdmFyIHQgPSB0aGlzLnJ1bGVzLmJsb2NrLmhyLmV4ZWMoZSk7CiAgICAgICAgICBpZiAodCkgcmV0dXJuIHsKICAgICAgICAgICAgdHlwZTogImhyIiwKICAgICAgICAgICAgcmF3OiB0WzBdCiAgICAgICAgICB9OwogICAgICAgIH0sIG4uYmxvY2txdW90ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCA9IHRoaXMucnVsZXMuYmxvY2suYmxvY2txdW90ZS5leGVjKGUpOwoKICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgIHZhciBuID0gdFswXS5yZXBsYWNlKC9eICo+ID8vZ20sICIiKTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICB0eXBlOiAiYmxvY2txdW90ZSIsCiAgICAgICAgICAgICAgcmF3OiB0WzBdLAogICAgICAgICAgICAgIHRva2VuczogdGhpcy5sZXhlci5ibG9ja1Rva2VucyhuLCBbXSksCiAgICAgICAgICAgICAgdGV4dDogbgogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0sIG4ubGlzdCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCA9IHRoaXMucnVsZXMuYmxvY2subGlzdC5leGVjKGUpOwoKICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgIHZhciBuLAogICAgICAgICAgICAgICAgciwKICAgICAgICAgICAgICAgIGksCiAgICAgICAgICAgICAgICBhLAogICAgICAgICAgICAgICAgdSwKICAgICAgICAgICAgICAgIHMsCiAgICAgICAgICAgICAgICBsLAogICAgICAgICAgICAgICAgYywKICAgICAgICAgICAgICAgIGYsCiAgICAgICAgICAgICAgICBwLAogICAgICAgICAgICAgICAgZCwKICAgICAgICAgICAgICAgIGgsCiAgICAgICAgICAgICAgICB2ID0gdFsxXS50cmltKCksCiAgICAgICAgICAgICAgICBnID0gdi5sZW5ndGggPiAxLAogICAgICAgICAgICAgICAgbSA9IHsKICAgICAgICAgICAgICB0eXBlOiAibGlzdCIsCiAgICAgICAgICAgICAgcmF3OiAiIiwKICAgICAgICAgICAgICBvcmRlcmVkOiBnLAogICAgICAgICAgICAgIHN0YXJ0OiBnID8gK3Yuc2xpY2UoMCwgLTEpIDogIiIsCiAgICAgICAgICAgICAgbG9vc2U6ICExLAogICAgICAgICAgICAgIGl0ZW1zOiBbXQogICAgICAgICAgICB9OwogICAgICAgICAgICB2ID0gZyA/ICJcXGR7MSw5fVxcIiArIHYuc2xpY2UoLTEpIDogIlxcIiArIHYsIHRoaXMub3B0aW9ucy5wZWRhbnRpYyAmJiAodiA9IGcgPyB2IDogIlsqKy1dIik7CgogICAgICAgICAgICBmb3IgKHZhciB5ID0gbmV3IFJlZ0V4cCgiXiggezAsM30iICsgdiArICIpKCg/OiBbXlxcbl0qKT8oPzpcXG58JCkpIik7IGUgJiYgKGggPSAhMSwgdCA9IHkuZXhlYyhlKSkgJiYgIXRoaXMucnVsZXMuYmxvY2suaHIudGVzdChlKTspIHsKICAgICAgICAgICAgICBpZiAobiA9IHRbMF0sIGUgPSBlLnN1YnN0cmluZyhuLmxlbmd0aCksIGMgPSB0WzJdLnNwbGl0KCJcbiIsIDEpWzBdLCBmID0gZS5zcGxpdCgiXG4iLCAxKVswXSwgdGhpcy5vcHRpb25zLnBlZGFudGljID8gKGEgPSAyLCBkID0gYy50cmltTGVmdCgpKSA6IChhID0gdFsyXS5zZWFyY2goL1teIF0vKSwgYSA9IGEgPiA0ID8gMSA6IGEsIGQgPSBjLnNsaWNlKGEpLCBhICs9IHRbMV0ubGVuZ3RoKSwgcyA9ICExLCAhYyAmJiAvXiAqJC8udGVzdChmKSAmJiAobiArPSBmICsgIlxuIiwgZSA9IGUuc3Vic3RyaW5nKGYubGVuZ3RoICsgMSksIGggPSAhMCksICFoKSBmb3IgKHZhciBiID0gbmV3IFJlZ0V4cCgiXiB7MCwiICsgTWF0aC5taW4oMywgYSAtIDEpICsgIn0oPzpbKistXXxcXGR7MSw5fVsuKV0pIik7IGUgJiYgKHAgPSBlLnNwbGl0KCJcbiIsIDEpWzBdLCBjID0gcCwgdGhpcy5vcHRpb25zLnBlZGFudGljICYmIChjID0gYy5yZXBsYWNlKC9eIHsxLDR9KD89KCB7NH0pKlteIF0pL2csICIgICIpKSwgIWIudGVzdChjKSk7KSB7CiAgICAgICAgICAgICAgICBpZiAoYy5zZWFyY2goL1teIF0vKSA+PSBhIHx8ICFjLnRyaW0oKSkgZCArPSAiXG4iICsgYy5zbGljZShhKTtlbHNlIHsKICAgICAgICAgICAgICAgICAgaWYgKHMpIGJyZWFrOwogICAgICAgICAgICAgICAgICBkICs9ICJcbiIgKyBjOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcyB8fCBjLnRyaW0oKSB8fCAocyA9ICEwKSwgbiArPSBwICsgIlxuIiwgZSA9IGUuc3Vic3RyaW5nKHAubGVuZ3RoICsgMSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIG0ubG9vc2UgfHwgKGwgPyBtLmxvb3NlID0gITAgOiAvXG4gKlxuICokLy50ZXN0KG4pICYmIChsID0gITApKSwgdGhpcy5vcHRpb25zLmdmbSAmJiAociA9IC9eXFtbIHhYXVxdIC8uZXhlYyhkKSkgJiYgKGkgPSAiWyBdICIgIT09IHJbMF0sIGQgPSBkLnJlcGxhY2UoL15cW1sgeFhdXF0gKy8sICIiKSksIG0uaXRlbXMucHVzaCh7CiAgICAgICAgICAgICAgICB0eXBlOiAibGlzdF9pdGVtIiwKICAgICAgICAgICAgICAgIHJhdzogbiwKICAgICAgICAgICAgICAgIHRhc2s6ICEhciwKICAgICAgICAgICAgICAgIGNoZWNrZWQ6IGksCiAgICAgICAgICAgICAgICBsb29zZTogITEsCiAgICAgICAgICAgICAgICB0ZXh0OiBkCiAgICAgICAgICAgICAgfSksIG0ucmF3ICs9IG47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG0uaXRlbXNbbS5pdGVtcy5sZW5ndGggLSAxXS5yYXcgPSBuLnRyaW1SaWdodCgpLCBtLml0ZW1zW20uaXRlbXMubGVuZ3RoIC0gMV0udGV4dCA9IGQudHJpbVJpZ2h0KCksIG0ucmF3ID0gbS5yYXcudHJpbVJpZ2h0KCk7CiAgICAgICAgICAgIHZhciBEID0gbS5pdGVtcy5sZW5ndGg7CgogICAgICAgICAgICBmb3IgKHUgPSAwOyB1IDwgRDsgdSsrKSB7CiAgICAgICAgICAgICAgdGhpcy5sZXhlci5zdGF0ZS50b3AgPSAhMSwgbS5pdGVtc1t1XS50b2tlbnMgPSB0aGlzLmxleGVyLmJsb2NrVG9rZW5zKG0uaXRlbXNbdV0udGV4dCwgW10pOwogICAgICAgICAgICAgIHZhciB4ID0gbS5pdGVtc1t1XS50b2tlbnMuZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gInNwYWNlIiA9PT0gZS50eXBlOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICB3ID0geC5ldmVyeShmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgdCwgbiA9IGUucmF3LnNwbGl0KCIiKSwgciA9IDAsIGkgPSBvKG4pOyAhKHQgPSBpKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgIGlmICgiXG4iID09PSB0LnZhbHVlICYmIChyICs9IDEpLCByID4gMSkgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAhbS5sb29zZSAmJiB4Lmxlbmd0aCAmJiB3ICYmIChtLmxvb3NlID0gITAsIG0uaXRlbXNbdV0ubG9vc2UgPSAhMCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBtOwogICAgICAgICAgfQogICAgICAgIH0sIG4uaHRtbCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCA9IHRoaXMucnVsZXMuYmxvY2suaHRtbC5leGVjKGUpOwoKICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgIHZhciBuID0gewogICAgICAgICAgICAgIHR5cGU6ICJodG1sIiwKICAgICAgICAgICAgICByYXc6IHRbMF0sCiAgICAgICAgICAgICAgcHJlOiAhdGhpcy5vcHRpb25zLnNhbml0aXplciAmJiAoInByZSIgPT09IHRbMV0gfHwgInNjcmlwdCIgPT09IHRbMV0gfHwgInN0eWxlIiA9PT0gdFsxXSksCiAgICAgICAgICAgICAgdGV4dDogdFswXQogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNhbml0aXplICYmIChuLnR5cGUgPSAicGFyYWdyYXBoIiwgbi50ZXh0ID0gdGhpcy5vcHRpb25zLnNhbml0aXplciA/IHRoaXMub3B0aW9ucy5zYW5pdGl6ZXIodFswXSkgOiBzKHRbMF0pLCBuLnRva2VucyA9IFtdLCB0aGlzLmxleGVyLmlubGluZShuLnRleHQsIG4udG9rZW5zKSksIG47CiAgICAgICAgICB9CiAgICAgICAgfSwgbi5kZWYgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgdmFyIHQgPSB0aGlzLnJ1bGVzLmJsb2NrLmRlZi5leGVjKGUpOwoKICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgIHRbM10gJiYgKHRbM10gPSB0WzNdLnN1YnN0cmluZygxLCB0WzNdLmxlbmd0aCAtIDEpKTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICB0eXBlOiAiZGVmIiwKICAgICAgICAgICAgICB0YWc6IHRbMV0udG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9ccysvZywgIiAiKSwKICAgICAgICAgICAgICByYXc6IHRbMF0sCiAgICAgICAgICAgICAgaHJlZjogdFsyXSwKICAgICAgICAgICAgICB0aXRsZTogdFszXQogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0sIG4udGFibGUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgdmFyIHQgPSB0aGlzLnJ1bGVzLmJsb2NrLnRhYmxlLmV4ZWMoZSk7CgogICAgICAgICAgaWYgKHQpIHsKICAgICAgICAgICAgdmFyIG4gPSB7CiAgICAgICAgICAgICAgdHlwZTogInRhYmxlIiwKICAgICAgICAgICAgICBoZWFkZXI6IGgodFsxXSkubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICB0ZXh0OiBlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGFsaWduOiB0WzJdLnJlcGxhY2UoL14gKnxcfCAqJC9nLCAiIikuc3BsaXQoLyAqXHwgKi8pLAogICAgICAgICAgICAgIHJvd3M6IHRbM10gJiYgdFszXS50cmltKCkgPyB0WzNdLnJlcGxhY2UoL1xuWyBcdF0qJC8sICIiKS5zcGxpdCgiXG4iKSA6IFtdCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBpZiAobi5oZWFkZXIubGVuZ3RoID09PSBuLmFsaWduLmxlbmd0aCkgewogICAgICAgICAgICAgIG4ucmF3ID0gdFswXTsKICAgICAgICAgICAgICB2YXIgciwKICAgICAgICAgICAgICAgICAgaSwKICAgICAgICAgICAgICAgICAgbywKICAgICAgICAgICAgICAgICAgYSwKICAgICAgICAgICAgICAgICAgdSA9IG4uYWxpZ24ubGVuZ3RoOwoKICAgICAgICAgICAgICBmb3IgKHIgPSAwOyByIDwgdTsgcisrKSAvXiAqLSs6ICokLy50ZXN0KG4uYWxpZ25bcl0pID8gbi5hbGlnbltyXSA9ICJyaWdodCIgOiAvXiAqOi0rOiAqJC8udGVzdChuLmFsaWduW3JdKSA/IG4uYWxpZ25bcl0gPSAiY2VudGVyIiA6IC9eICo6LSsgKiQvLnRlc3Qobi5hbGlnbltyXSkgPyBuLmFsaWduW3JdID0gImxlZnQiIDogbi5hbGlnbltyXSA9IG51bGw7CgogICAgICAgICAgICAgIGZvciAodSA9IG4ucm93cy5sZW5ndGgsIHIgPSAwOyByIDwgdTsgcisrKSBuLnJvd3Nbcl0gPSBoKG4ucm93c1tyXSwgbi5oZWFkZXIubGVuZ3RoKS5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIHRleHQ6IGUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGZvciAodSA9IG4uaGVhZGVyLmxlbmd0aCwgaSA9IDA7IGkgPCB1OyBpKyspIG4uaGVhZGVyW2ldLnRva2VucyA9IFtdLCB0aGlzLmxleGVyLmlubGluZVRva2VucyhuLmhlYWRlcltpXS50ZXh0LCBuLmhlYWRlcltpXS50b2tlbnMpOwoKICAgICAgICAgICAgICBmb3IgKHUgPSBuLnJvd3MubGVuZ3RoLCBpID0gMDsgaSA8IHU7IGkrKykgZm9yIChhID0gbi5yb3dzW2ldLCBvID0gMDsgbyA8IGEubGVuZ3RoOyBvKyspIGFbb10udG9rZW5zID0gW10sIHRoaXMubGV4ZXIuaW5saW5lVG9rZW5zKGFbb10udGV4dCwgYVtvXS50b2tlbnMpOwoKICAgICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIG4ubGhlYWRpbmcgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgdmFyIHQgPSB0aGlzLnJ1bGVzLmJsb2NrLmxoZWFkaW5nLmV4ZWMoZSk7CgogICAgICAgICAgaWYgKHQpIHsKICAgICAgICAgICAgdmFyIG4gPSB7CiAgICAgICAgICAgICAgdHlwZTogImhlYWRpbmciLAogICAgICAgICAgICAgIHJhdzogdFswXSwKICAgICAgICAgICAgICBkZXB0aDogIj0iID09PSB0WzJdLmNoYXJBdCgwKSA/IDEgOiAyLAogICAgICAgICAgICAgIHRleHQ6IHRbMV0sCiAgICAgICAgICAgICAgdG9rZW5zOiBbXQogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gdGhpcy5sZXhlci5pbmxpbmUobi50ZXh0LCBuLnRva2VucyksIG47CiAgICAgICAgICB9CiAgICAgICAgfSwgbi5wYXJhZ3JhcGggPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgdmFyIHQgPSB0aGlzLnJ1bGVzLmJsb2NrLnBhcmFncmFwaC5leGVjKGUpOwoKICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgIHZhciBuID0gewogICAgICAgICAgICAgIHR5cGU6ICJwYXJhZ3JhcGgiLAogICAgICAgICAgICAgIHJhdzogdFswXSwKICAgICAgICAgICAgICB0ZXh0OiAiXG4iID09PSB0WzFdLmNoYXJBdCh0WzFdLmxlbmd0aCAtIDEpID8gdFsxXS5zbGljZSgwLCAtMSkgOiB0WzFdLAogICAgICAgICAgICAgIHRva2VuczogW10KICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMubGV4ZXIuaW5saW5lKG4udGV4dCwgbi50b2tlbnMpLCBuOwogICAgICAgICAgfQogICAgICAgIH0sIG4udGV4dCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCA9IHRoaXMucnVsZXMuYmxvY2sudGV4dC5leGVjKGUpOwoKICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgIHZhciBuID0gewogICAgICAgICAgICAgIHR5cGU6ICJ0ZXh0IiwKICAgICAgICAgICAgICByYXc6IHRbMF0sCiAgICAgICAgICAgICAgdGV4dDogdFswXSwKICAgICAgICAgICAgICB0b2tlbnM6IFtdCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJldHVybiB0aGlzLmxleGVyLmlubGluZShuLnRleHQsIG4udG9rZW5zKSwgbjsKICAgICAgICAgIH0KICAgICAgICB9LCBuLmVzY2FwZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCA9IHRoaXMucnVsZXMuaW5saW5lLmVzY2FwZS5leGVjKGUpOwogICAgICAgICAgaWYgKHQpIHJldHVybiB7CiAgICAgICAgICAgIHR5cGU6ICJlc2NhcGUiLAogICAgICAgICAgICByYXc6IHRbMF0sCiAgICAgICAgICAgIHRleHQ6IHModFsxXSkKICAgICAgICAgIH07CiAgICAgICAgfSwgbi50YWcgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgdmFyIHQgPSB0aGlzLnJ1bGVzLmlubGluZS50YWcuZXhlYyhlKTsKICAgICAgICAgIGlmICh0KSByZXR1cm4gIXRoaXMubGV4ZXIuc3RhdGUuaW5MaW5rICYmIC9ePGEgL2kudGVzdCh0WzBdKSA/IHRoaXMubGV4ZXIuc3RhdGUuaW5MaW5rID0gITAgOiB0aGlzLmxleGVyLnN0YXRlLmluTGluayAmJiAvXjxcL2E+L2kudGVzdCh0WzBdKSAmJiAodGhpcy5sZXhlci5zdGF0ZS5pbkxpbmsgPSAhMSksICF0aGlzLmxleGVyLnN0YXRlLmluUmF3QmxvY2sgJiYgL148KHByZXxjb2RlfGtiZHxzY3JpcHQpKFxzfD4pL2kudGVzdCh0WzBdKSA/IHRoaXMubGV4ZXIuc3RhdGUuaW5SYXdCbG9jayA9ICEwIDogdGhpcy5sZXhlci5zdGF0ZS5pblJhd0Jsb2NrICYmIC9ePFwvKHByZXxjb2RlfGtiZHxzY3JpcHQpKFxzfD4pL2kudGVzdCh0WzBdKSAmJiAodGhpcy5sZXhlci5zdGF0ZS5pblJhd0Jsb2NrID0gITEpLCB7CiAgICAgICAgICAgIHR5cGU6IHRoaXMub3B0aW9ucy5zYW5pdGl6ZSA/ICJ0ZXh0IiA6ICJodG1sIiwKICAgICAgICAgICAgcmF3OiB0WzBdLAogICAgICAgICAgICBpbkxpbms6IHRoaXMubGV4ZXIuc3RhdGUuaW5MaW5rLAogICAgICAgICAgICBpblJhd0Jsb2NrOiB0aGlzLmxleGVyLnN0YXRlLmluUmF3QmxvY2ssCiAgICAgICAgICAgIHRleHQ6IHRoaXMub3B0aW9ucy5zYW5pdGl6ZSA/IHRoaXMub3B0aW9ucy5zYW5pdGl6ZXIgPyB0aGlzLm9wdGlvbnMuc2FuaXRpemVyKHRbMF0pIDogcyh0WzBdKSA6IHRbMF0KICAgICAgICAgIH07CiAgICAgICAgfSwgbi5saW5rID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0ID0gdGhpcy5ydWxlcy5pbmxpbmUubGluay5leGVjKGUpOwoKICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgIHZhciBuID0gdFsyXS50cmltKCk7CgogICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5wZWRhbnRpYyAmJiAvXjwvLnRlc3QobikpIHsKICAgICAgICAgICAgICBpZiAoIS8+JC8udGVzdChuKSkgcmV0dXJuOwogICAgICAgICAgICAgIHZhciByID0gdihuLnNsaWNlKDAsIC0xKSwgIlxcIik7CiAgICAgICAgICAgICAgaWYgKChuLmxlbmd0aCAtIHIubGVuZ3RoKSAlIDIgPT0gMCkgcmV0dXJuOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciBpID0gZyh0WzJdLCAiKCkiKTsKCiAgICAgICAgICAgICAgaWYgKGkgPiAtMSkgewogICAgICAgICAgICAgICAgdmFyIG8gPSAwID09PSB0WzBdLmluZGV4T2YoIiEiKSA/IDUgOiA0LAogICAgICAgICAgICAgICAgICAgIGEgPSBvICsgdFsxXS5sZW5ndGggKyBpOwogICAgICAgICAgICAgICAgdFsyXSA9IHRbMl0uc3Vic3RyaW5nKDAsIGkpLCB0WzBdID0gdFswXS5zdWJzdHJpbmcoMCwgYSkudHJpbSgpLCB0WzNdID0gIiI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgdSA9IHRbMl0sCiAgICAgICAgICAgICAgICBzID0gIiI7CgogICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnBlZGFudGljKSB7CiAgICAgICAgICAgICAgdmFyIGwgPSAvXihbXiciXSpbXlxzXSlccysoWyciXSkoLiopXDIvLmV4ZWModSk7CiAgICAgICAgICAgICAgbCAmJiAodSA9IGxbMV0sIHMgPSBsWzNdKTsKICAgICAgICAgICAgfSBlbHNlIHMgPSB0WzNdID8gdFszXS5zbGljZSgxLCAtMSkgOiAiIjsKCiAgICAgICAgICAgIHJldHVybiB1ID0gdS50cmltKCksIC9ePC8udGVzdCh1KSAmJiAodSA9IHRoaXMub3B0aW9ucy5wZWRhbnRpYyAmJiAhLz4kLy50ZXN0KG4pID8gdS5zbGljZSgxKSA6IHUuc2xpY2UoMSwgLTEpKSwgYih0LCB7CiAgICAgICAgICAgICAgaHJlZjogdSA/IHUucmVwbGFjZSh0aGlzLnJ1bGVzLmlubGluZS5fZXNjYXBlcywgIiQxIikgOiB1LAogICAgICAgICAgICAgIHRpdGxlOiBzID8gcy5yZXBsYWNlKHRoaXMucnVsZXMuaW5saW5lLl9lc2NhcGVzLCAiJDEiKSA6IHMKICAgICAgICAgICAgfSwgdFswXSwgdGhpcy5sZXhlcik7CiAgICAgICAgICB9CiAgICAgICAgfSwgbi5yZWZsaW5rID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHZhciBuOwoKICAgICAgICAgIGlmICgobiA9IHRoaXMucnVsZXMuaW5saW5lLnJlZmxpbmsuZXhlYyhlKSkgfHwgKG4gPSB0aGlzLnJ1bGVzLmlubGluZS5ub2xpbmsuZXhlYyhlKSkpIHsKICAgICAgICAgICAgdmFyIHIgPSAoblsyXSB8fCBuWzFdKS5yZXBsYWNlKC9ccysvZywgIiAiKTsKCiAgICAgICAgICAgIGlmICghKHIgPSB0W3IudG9Mb3dlckNhc2UoKV0pIHx8ICFyLmhyZWYpIHsKICAgICAgICAgICAgICB2YXIgaSA9IG5bMF0uY2hhckF0KDApOwogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICB0eXBlOiAidGV4dCIsCiAgICAgICAgICAgICAgICByYXc6IGksCiAgICAgICAgICAgICAgICB0ZXh0OiBpCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGIobiwgciwgblswXSwgdGhpcy5sZXhlcik7CiAgICAgICAgICB9CiAgICAgICAgfSwgbi5lbVN0cm9uZyA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICB2b2lkIDAgPT09IG4gJiYgKG4gPSAiIik7CiAgICAgICAgICB2YXIgciA9IHRoaXMucnVsZXMuaW5saW5lLmVtU3Ryb25nLmxEZWxpbS5leGVjKGUpOwoKICAgICAgICAgIGlmIChyICYmICghclszXSB8fCAhbi5tYXRjaCgvKD86WzAtOUEtWmEtelx4QUFceEIyXHhCM1x4QjVceEI5XHhCQVx4QkMtXHhCRVx4QzAtXHhENlx4RDgtXHhGNlx4RjgtXHUwMkMxXHUwMkM2LVx1MDJEMVx1MDJFMC1cdTAyRTRcdTAyRUNcdTAyRUVcdTAzNzAtXHUwMzc0XHUwMzc2XHUwMzc3XHUwMzdBLVx1MDM3RFx1MDM3Rlx1MDM4Nlx1MDM4OC1cdTAzOEFcdTAzOENcdTAzOEUtXHUwM0ExXHUwM0EzLVx1MDNGNVx1MDNGNy1cdTA0ODFcdTA0OEEtXHUwNTJGXHUwNTMxLVx1MDU1Nlx1MDU1OVx1MDU2MC1cdTA1ODhcdTA1RDAtXHUwNUVBXHUwNUVGLVx1MDVGMlx1MDYyMC1cdTA2NEFcdTA2NjAtXHUwNjY5XHUwNjZFXHUwNjZGXHUwNjcxLVx1MDZEM1x1MDZENVx1MDZFNVx1MDZFNlx1MDZFRS1cdTA2RkNcdTA2RkZcdTA3MTBcdTA3MTItXHUwNzJGXHUwNzRELVx1MDdBNVx1MDdCMVx1MDdDMC1cdTA3RUFcdTA3RjRcdTA3RjVcdTA3RkFcdTA4MDAtXHUwODE1XHUwODFBXHUwODI0XHUwODI4XHUwODQwLVx1MDg1OFx1MDg2MC1cdTA4NkFcdTA4NzAtXHUwODg3XHUwODg5LVx1MDg4RVx1MDhBMC1cdTA4QzlcdTA5MDQtXHUwOTM5XHUwOTNEXHUwOTUwXHUwOTU4LVx1MDk2MVx1MDk2Ni1cdTA5NkZcdTA5NzEtXHUwOTgwXHUwOTg1LVx1MDk4Q1x1MDk4Rlx1MDk5MFx1MDk5My1cdTA5QThcdTA5QUEtXHUwOUIwXHUwOUIyXHUwOUI2LVx1MDlCOVx1MDlCRFx1MDlDRVx1MDlEQ1x1MDlERFx1MDlERi1cdTA5RTFcdTA5RTYtXHUwOUYxXHUwOUY0LVx1MDlGOVx1MDlGQ1x1MEEwNS1cdTBBMEFcdTBBMEZcdTBBMTBcdTBBMTMtXHUwQTI4XHUwQTJBLVx1MEEzMFx1MEEzMlx1MEEzM1x1MEEzNVx1MEEzNlx1MEEzOFx1MEEzOVx1MEE1OS1cdTBBNUNcdTBBNUVcdTBBNjYtXHUwQTZGXHUwQTcyLVx1MEE3NFx1MEE4NS1cdTBBOERcdTBBOEYtXHUwQTkxXHUwQTkzLVx1MEFBOFx1MEFBQS1cdTBBQjBcdTBBQjJcdTBBQjNcdTBBQjUtXHUwQUI5XHUwQUJEXHUwQUQwXHUwQUUwXHUwQUUxXHUwQUU2LVx1MEFFRlx1MEFGOVx1MEIwNS1cdTBCMENcdTBCMEZcdTBCMTBcdTBCMTMtXHUwQjI4XHUwQjJBLVx1MEIzMFx1MEIzMlx1MEIzM1x1MEIzNS1cdTBCMzlcdTBCM0RcdTBCNUNcdTBCNURcdTBCNUYtXHUwQjYxXHUwQjY2LVx1MEI2Rlx1MEI3MS1cdTBCNzdcdTBCODNcdTBCODUtXHUwQjhBXHUwQjhFLVx1MEI5MFx1MEI5Mi1cdTBCOTVcdTBCOTlcdTBCOUFcdTBCOUNcdTBCOUVcdTBCOUZcdTBCQTNcdTBCQTRcdTBCQTgtXHUwQkFBXHUwQkFFLVx1MEJCOVx1MEJEMFx1MEJFNi1cdTBCRjJcdTBDMDUtXHUwQzBDXHUwQzBFLVx1MEMxMFx1MEMxMi1cdTBDMjhcdTBDMkEtXHUwQzM5XHUwQzNEXHUwQzU4LVx1MEM1QVx1MEM1RFx1MEM2MFx1MEM2MVx1MEM2Ni1cdTBDNkZcdTBDNzgtXHUwQzdFXHUwQzgwXHUwQzg1LVx1MEM4Q1x1MEM4RS1cdTBDOTBcdTBDOTItXHUwQ0E4XHUwQ0FBLVx1MENCM1x1MENCNS1cdTBDQjlcdTBDQkRcdTBDRERcdTBDREVcdTBDRTBcdTBDRTFcdTBDRTYtXHUwQ0VGXHUwQ0YxXHUwQ0YyXHUwRDA0LVx1MEQwQ1x1MEQwRS1cdTBEMTBcdTBEMTItXHUwRDNBXHUwRDNEXHUwRDRFXHUwRDU0LVx1MEQ1Nlx1MEQ1OC1cdTBENjFcdTBENjYtXHUwRDc4XHUwRDdBLVx1MEQ3Rlx1MEQ4NS1cdTBEOTZcdTBEOUEtXHUwREIxXHUwREIzLVx1MERCQlx1MERCRFx1MERDMC1cdTBEQzZcdTBERTYtXHUwREVGXHUwRTAxLVx1MEUzMFx1MEUzMlx1MEUzM1x1MEU0MC1cdTBFNDZcdTBFNTAtXHUwRTU5XHUwRTgxXHUwRTgyXHUwRTg0XHUwRTg2LVx1MEU4QVx1MEU4Qy1cdTBFQTNcdTBFQTVcdTBFQTctXHUwRUIwXHUwRUIyXHUwRUIzXHUwRUJEXHUwRUMwLVx1MEVDNFx1MEVDNlx1MEVEMC1cdTBFRDlcdTBFREMtXHUwRURGXHUwRjAwXHUwRjIwLVx1MEYzM1x1MEY0MC1cdTBGNDdcdTBGNDktXHUwRjZDXHUwRjg4LVx1MEY4Q1x1MTAwMC1cdTEwMkFcdTEwM0YtXHUxMDQ5XHUxMDUwLVx1MTA1NVx1MTA1QS1cdTEwNURcdTEwNjFcdTEwNjVcdTEwNjZcdTEwNkUtXHUxMDcwXHUxMDc1LVx1MTA4MVx1MTA4RVx1MTA5MC1cdTEwOTlcdTEwQTAtXHUxMEM1XHUxMEM3XHUxMENEXHUxMEQwLVx1MTBGQVx1MTBGQy1cdTEyNDhcdTEyNEEtXHUxMjREXHUxMjUwLVx1MTI1Nlx1MTI1OFx1MTI1QS1cdTEyNURcdTEyNjAtXHUxMjg4XHUxMjhBLVx1MTI4RFx1MTI5MC1cdTEyQjBcdTEyQjItXHUxMkI1XHUxMkI4LVx1MTJCRVx1MTJDMFx1MTJDMi1cdTEyQzVcdTEyQzgtXHUxMkQ2XHUxMkQ4LVx1MTMxMFx1MTMxMi1cdTEzMTVcdTEzMTgtXHUxMzVBXHUxMzY5LVx1MTM3Q1x1MTM4MC1cdTEzOEZcdTEzQTAtXHUxM0Y1XHUxM0Y4LVx1MTNGRFx1MTQwMS1cdTE2NkNcdTE2NkYtXHUxNjdGXHUxNjgxLVx1MTY5QVx1MTZBMC1cdTE2RUFcdTE2RUUtXHUxNkY4XHUxNzAwLVx1MTcxMVx1MTcxRi1cdTE3MzFcdTE3NDAtXHUxNzUxXHUxNzYwLVx1MTc2Q1x1MTc2RS1cdTE3NzBcdTE3ODAtXHUxN0IzXHUxN0Q3XHUxN0RDXHUxN0UwLVx1MTdFOVx1MTdGMC1cdTE3RjlcdTE4MTAtXHUxODE5XHUxODIwLVx1MTg3OFx1MTg4MC1cdTE4ODRcdTE4ODctXHUxOEE4XHUxOEFBXHUxOEIwLVx1MThGNVx1MTkwMC1cdTE5MUVcdTE5NDYtXHUxOTZEXHUxOTcwLVx1MTk3NFx1MTk4MC1cdTE5QUJcdTE5QjAtXHUxOUM5XHUxOUQwLVx1MTlEQVx1MUEwMC1cdTFBMTZcdTFBMjAtXHUxQTU0XHUxQTgwLVx1MUE4OVx1MUE5MC1cdTFBOTlcdTFBQTdcdTFCMDUtXHUxQjMzXHUxQjQ1LVx1MUI0Q1x1MUI1MC1cdTFCNTlcdTFCODMtXHUxQkEwXHUxQkFFLVx1MUJFNVx1MUMwMC1cdTFDMjNcdTFDNDAtXHUxQzQ5XHUxQzRELVx1MUM3RFx1MUM4MC1cdTFDODhcdTFDOTAtXHUxQ0JBXHUxQ0JELVx1MUNCRlx1MUNFOS1cdTFDRUNcdTFDRUUtXHUxQ0YzXHUxQ0Y1XHUxQ0Y2XHUxQ0ZBXHUxRDAwLVx1MURCRlx1MUUwMC1cdTFGMTVcdTFGMTgtXHUxRjFEXHUxRjIwLVx1MUY0NVx1MUY0OC1cdTFGNERcdTFGNTAtXHUxRjU3XHUxRjU5XHUxRjVCXHUxRjVEXHUxRjVGLVx1MUY3RFx1MUY4MC1cdTFGQjRcdTFGQjYtXHUxRkJDXHUxRkJFXHUxRkMyLVx1MUZDNFx1MUZDNi1cdTFGQ0NcdTFGRDAtXHUxRkQzXHUxRkQ2LVx1MUZEQlx1MUZFMC1cdTFGRUNcdTFGRjItXHUxRkY0XHUxRkY2LVx1MUZGQ1x1MjA3MFx1MjA3MVx1MjA3NC1cdTIwNzlcdTIwN0YtXHUyMDg5XHUyMDkwLVx1MjA5Q1x1MjEwMlx1MjEwN1x1MjEwQS1cdTIxMTNcdTIxMTVcdTIxMTktXHUyMTFEXHUyMTI0XHUyMTI2XHUyMTI4XHUyMTJBLVx1MjEyRFx1MjEyRi1cdTIxMzlcdTIxM0MtXHUyMTNGXHUyMTQ1LVx1MjE0OVx1MjE0RVx1MjE1MC1cdTIxODlcdTI0NjAtXHUyNDlCXHUyNEVBLVx1MjRGRlx1Mjc3Ni1cdTI3OTNcdTJDMDAtXHUyQ0U0XHUyQ0VCLVx1MkNFRVx1MkNGMlx1MkNGM1x1MkNGRFx1MkQwMC1cdTJEMjVcdTJEMjdcdTJEMkRcdTJEMzAtXHUyRDY3XHUyRDZGXHUyRDgwLVx1MkQ5Nlx1MkRBMC1cdTJEQTZcdTJEQTgtXHUyREFFXHUyREIwLVx1MkRCNlx1MkRCOC1cdTJEQkVcdTJEQzAtXHUyREM2XHUyREM4LVx1MkRDRVx1MkREMC1cdTJERDZcdTJERDgtXHUyRERFXHUyRTJGXHUzMDA1LVx1MzAwN1x1MzAyMS1cdTMwMjlcdTMwMzEtXHUzMDM1XHUzMDM4LVx1MzAzQ1x1MzA0MS1cdTMwOTZcdTMwOUQtXHUzMDlGXHUzMEExLVx1MzBGQVx1MzBGQy1cdTMwRkZcdTMxMDUtXHUzMTJGXHUzMTMxLVx1MzE4RVx1MzE5Mi1cdTMxOTVcdTMxQTAtXHUzMUJGXHUzMUYwLVx1MzFGRlx1MzIyMC1cdTMyMjlcdTMyNDgtXHUzMjRGXHUzMjUxLVx1MzI1Rlx1MzI4MC1cdTMyODlcdTMyQjEtXHUzMkJGXHUzNDAwLVx1NERCRlx1NEUwMC1cdUE0OENcdUE0RDAtXHVBNEZEXHVBNTAwLVx1QTYwQ1x1QTYxMC1cdUE2MkJcdUE2NDAtXHVBNjZFXHVBNjdGLVx1QTY5RFx1QTZBMC1cdUE2RUZcdUE3MTctXHVBNzFGXHVBNzIyLVx1QTc4OFx1QTc4Qi1cdUE3Q0FcdUE3RDBcdUE3RDFcdUE3RDNcdUE3RDUtXHVBN0Q5XHVBN0YyLVx1QTgwMVx1QTgwMy1cdUE4MDVcdUE4MDctXHVBODBBXHVBODBDLVx1QTgyMlx1QTgzMC1cdUE4MzVcdUE4NDAtXHVBODczXHVBODgyLVx1QThCM1x1QThEMC1cdUE4RDlcdUE4RjItXHVBOEY3XHVBOEZCXHVBOEZEXHVBOEZFXHVBOTAwLVx1QTkyNVx1QTkzMC1cdUE5NDZcdUE5NjAtXHVBOTdDXHVBOTg0LVx1QTlCMlx1QTlDRi1cdUE5RDlcdUE5RTAtXHVBOUU0XHVBOUU2LVx1QTlGRVx1QUEwMC1cdUFBMjhcdUFBNDAtXHVBQTQyXHVBQTQ0LVx1QUE0Qlx1QUE1MC1cdUFBNTlcdUFBNjAtXHVBQTc2XHVBQTdBXHVBQTdFLVx1QUFBRlx1QUFCMVx1QUFCNVx1QUFCNlx1QUFCOS1cdUFBQkRcdUFBQzBcdUFBQzJcdUFBREItXHVBQUREXHVBQUUwLVx1QUFFQVx1QUFGMi1cdUFBRjRcdUFCMDEtXHVBQjA2XHVBQjA5LVx1QUIwRVx1QUIxMS1cdUFCMTZcdUFCMjAtXHVBQjI2XHVBQjI4LVx1QUIyRVx1QUIzMC1cdUFCNUFcdUFCNUMtXHVBQjY5XHVBQjcwLVx1QUJFMlx1QUJGMC1cdUFCRjlcdUFDMDAtXHVEN0EzXHVEN0IwLVx1RDdDNlx1RDdDQi1cdUQ3RkJcdUY5MDAtXHVGQTZEXHVGQTcwLVx1RkFEOVx1RkIwMC1cdUZCMDZcdUZCMTMtXHVGQjE3XHVGQjFEXHVGQjFGLVx1RkIyOFx1RkIyQS1cdUZCMzZcdUZCMzgtXHVGQjNDXHVGQjNFXHVGQjQwXHVGQjQxXHVGQjQzXHVGQjQ0XHVGQjQ2LVx1RkJCMVx1RkJEMy1cdUZEM0RcdUZENTAtXHVGRDhGXHVGRDkyLVx1RkRDN1x1RkRGMC1cdUZERkJcdUZFNzAtXHVGRTc0XHVGRTc2LVx1RkVGQ1x1RkYxMC1cdUZGMTlcdUZGMjEtXHVGRjNBXHVGRjQxLVx1RkY1QVx1RkY2Ni1cdUZGQkVcdUZGQzItXHVGRkM3XHVGRkNBLVx1RkZDRlx1RkZEMi1cdUZGRDdcdUZGREEtXHVGRkRDXXxcdUQ4MDBbXHVEQzAwLVx1REMwQlx1REMwRC1cdURDMjZcdURDMjgtXHVEQzNBXHVEQzNDXHVEQzNEXHVEQzNGLVx1REM0RFx1REM1MC1cdURDNURcdURDODAtXHVEQ0ZBXHVERDA3LVx1REQzM1x1REQ0MC1cdURENzhcdUREOEFcdUREOEJcdURFODAtXHVERTlDXHVERUEwLVx1REVEMFx1REVFMS1cdURFRkJcdURGMDAtXHVERjIzXHVERjJELVx1REY0QVx1REY1MC1cdURGNzVcdURGODAtXHVERjlEXHVERkEwLVx1REZDM1x1REZDOC1cdURGQ0ZcdURGRDEtXHVERkQ1XXxcdUQ4MDFbXHVEQzAwLVx1REM5RFx1RENBMC1cdURDQTlcdURDQjAtXHVEQ0QzXHVEQ0Q4LVx1RENGQlx1REQwMC1cdUREMjdcdUREMzAtXHVERDYzXHVERDcwLVx1REQ3QVx1REQ3Qy1cdUREOEFcdUREOEMtXHVERDkyXHVERDk0XHVERDk1XHVERDk3LVx1RERBMVx1RERBMy1cdUREQjFcdUREQjMtXHVEREI5XHVEREJCXHVEREJDXHVERTAwLVx1REYzNlx1REY0MC1cdURGNTVcdURGNjAtXHVERjY3XHVERjgwLVx1REY4NVx1REY4Ny1cdURGQjBcdURGQjItXHVERkJBXXxcdUQ4MDJbXHVEQzAwLVx1REMwNVx1REMwOFx1REMwQS1cdURDMzVcdURDMzdcdURDMzhcdURDM0NcdURDM0YtXHVEQzU1XHVEQzU4LVx1REM3Nlx1REM3OS1cdURDOUVcdURDQTctXHVEQ0FGXHVEQ0UwLVx1RENGMlx1RENGNFx1RENGNVx1RENGQi1cdUREMUJcdUREMjAtXHVERDM5XHVERDgwLVx1RERCN1x1RERCQy1cdUREQ0ZcdURERDItXHVERTAwXHVERTEwLVx1REUxM1x1REUxNS1cdURFMTdcdURFMTktXHVERTM1XHVERTQwLVx1REU0OFx1REU2MC1cdURFN0VcdURFODAtXHVERTlGXHVERUMwLVx1REVDN1x1REVDOS1cdURFRTRcdURFRUItXHVERUVGXHVERjAwLVx1REYzNVx1REY0MC1cdURGNTVcdURGNTgtXHVERjcyXHVERjc4LVx1REY5MVx1REZBOS1cdURGQUZdfFx1RDgwM1tcdURDMDAtXHVEQzQ4XHVEQzgwLVx1RENCMlx1RENDMC1cdURDRjJcdURDRkEtXHVERDIzXHVERDMwLVx1REQzOVx1REU2MC1cdURFN0VcdURFODAtXHVERUE5XHVERUIwXHVERUIxXHVERjAwLVx1REYyN1x1REYzMC1cdURGNDVcdURGNTEtXHVERjU0XHVERjcwLVx1REY4MVx1REZCMC1cdURGQ0JcdURGRTAtXHVERkY2XXxcdUQ4MDRbXHVEQzAzLVx1REMzN1x1REM1Mi1cdURDNkZcdURDNzFcdURDNzJcdURDNzVcdURDODMtXHVEQ0FGXHVEQ0QwLVx1RENFOFx1RENGMC1cdURDRjlcdUREMDMtXHVERDI2XHVERDM2LVx1REQzRlx1REQ0NFx1REQ0N1x1REQ1MC1cdURENzJcdURENzZcdUREODMtXHVEREIyXHVEREMxLVx1RERDNFx1REREMC1cdUREREFcdURERENcdURERTEtXHVEREY0XHVERTAwLVx1REUxMVx1REUxMy1cdURFMkJcdURFODAtXHVERTg2XHVERTg4XHVERThBLVx1REU4RFx1REU4Ri1cdURFOURcdURFOUYtXHVERUE4XHVERUIwLVx1REVERVx1REVGMC1cdURFRjlcdURGMDUtXHVERjBDXHVERjBGXHVERjEwXHVERjEzLVx1REYyOFx1REYyQS1cdURGMzBcdURGMzJcdURGMzNcdURGMzUtXHVERjM5XHVERjNEXHVERjUwXHVERjVELVx1REY2MV18XHVEODA1W1x1REMwMC1cdURDMzRcdURDNDctXHVEQzRBXHVEQzUwLVx1REM1OVx1REM1Ri1cdURDNjFcdURDODAtXHVEQ0FGXHVEQ0M0XHVEQ0M1XHVEQ0M3XHVEQ0QwLVx1RENEOVx1REQ4MC1cdUREQUVcdURERDgtXHVERERCXHVERTAwLVx1REUyRlx1REU0NFx1REU1MC1cdURFNTlcdURFODAtXHVERUFBXHVERUI4XHVERUMwLVx1REVDOVx1REYwMC1cdURGMUFcdURGMzAtXHVERjNCXHVERjQwLVx1REY0Nl18XHVEODA2W1x1REMwMC1cdURDMkJcdURDQTAtXHVEQ0YyXHVEQ0ZGLVx1REQwNlx1REQwOVx1REQwQy1cdUREMTNcdUREMTVcdUREMTZcdUREMTgtXHVERDJGXHVERDNGXHVERDQxXHVERDUwLVx1REQ1OVx1RERBMC1cdUREQTdcdUREQUEtXHVEREQwXHVEREUxXHVEREUzXHVERTAwXHVERTBCLVx1REUzMlx1REUzQVx1REU1MFx1REU1Qy1cdURFODlcdURFOURcdURFQjAtXHVERUY4XXxcdUQ4MDdbXHVEQzAwLVx1REMwOFx1REMwQS1cdURDMkVcdURDNDBcdURDNTAtXHVEQzZDXHVEQzcyLVx1REM4Rlx1REQwMC1cdUREMDZcdUREMDhcdUREMDlcdUREMEItXHVERDMwXHVERDQ2XHVERDUwLVx1REQ1OVx1REQ2MC1cdURENjVcdURENjdcdURENjhcdURENkEtXHVERDg5XHVERDk4XHVEREEwLVx1RERBOVx1REVFMC1cdURFRjJcdURGQjBcdURGQzAtXHVERkQ0XXxcdUQ4MDhbXHVEQzAwLVx1REY5OV18XHVEODA5W1x1REMwMC1cdURDNkVcdURDODAtXHVERDQzXXxcdUQ4MEJbXHVERjkwLVx1REZGMF18W1x1RDgwQ1x1RDgxQy1cdUQ4MjBcdUQ4MjJcdUQ4NDAtXHVEODY4XHVEODZBLVx1RDg2Q1x1RDg2Ri1cdUQ4NzJcdUQ4NzQtXHVEODc5XHVEODgwLVx1RDg4M11bXHVEQzAwLVx1REZGRl18XHVEODBEW1x1REMwMC1cdURDMkVdfFx1RDgxMVtcdURDMDAtXHVERTQ2XXxcdUQ4MUFbXHVEQzAwLVx1REUzOFx1REU0MC1cdURFNUVcdURFNjAtXHVERTY5XHVERTcwLVx1REVCRVx1REVDMC1cdURFQzlcdURFRDAtXHVERUVEXHVERjAwLVx1REYyRlx1REY0MC1cdURGNDNcdURGNTAtXHVERjU5XHVERjVCLVx1REY2MVx1REY2My1cdURGNzdcdURGN0QtXHVERjhGXXxcdUQ4MUJbXHVERTQwLVx1REU5Nlx1REYwMC1cdURGNEFcdURGNTBcdURGOTMtXHVERjlGXHVERkUwXHVERkUxXHVERkUzXXxcdUQ4MjFbXHVEQzAwLVx1REZGN118XHVEODIzW1x1REMwMC1cdURDRDVcdUREMDAtXHVERDA4XXxcdUQ4MkJbXHVERkYwLVx1REZGM1x1REZGNS1cdURGRkJcdURGRkRcdURGRkVdfFx1RDgyQ1tcdURDMDAtXHVERDIyXHVERDUwLVx1REQ1Mlx1REQ2NC1cdURENjdcdURENzAtXHVERUZCXXxcdUQ4MkZbXHVEQzAwLVx1REM2QVx1REM3MC1cdURDN0NcdURDODAtXHVEQzg4XHVEQzkwLVx1REM5OV18XHVEODM0W1x1REVFMC1cdURFRjNcdURGNjAtXHVERjc4XXxcdUQ4MzVbXHVEQzAwLVx1REM1NFx1REM1Ni1cdURDOUNcdURDOUVcdURDOUZcdURDQTJcdURDQTVcdURDQTZcdURDQTktXHVEQ0FDXHVEQ0FFLVx1RENCOVx1RENCQlx1RENCRC1cdURDQzNcdURDQzUtXHVERDA1XHVERDA3LVx1REQwQVx1REQwRC1cdUREMTRcdUREMTYtXHVERDFDXHVERDFFLVx1REQzOVx1REQzQi1cdUREM0VcdURENDAtXHVERDQ0XHVERDQ2XHVERDRBLVx1REQ1MFx1REQ1Mi1cdURFQTVcdURFQTgtXHVERUMwXHVERUMyLVx1REVEQVx1REVEQy1cdURFRkFcdURFRkMtXHVERjE0XHVERjE2LVx1REYzNFx1REYzNi1cdURGNEVcdURGNTAtXHVERjZFXHVERjcwLVx1REY4OFx1REY4QS1cdURGQThcdURGQUEtXHVERkMyXHVERkM0LVx1REZDQlx1REZDRS1cdURGRkZdfFx1RDgzN1tcdURGMDAtXHVERjFFXXxcdUQ4MzhbXHVERDAwLVx1REQyQ1x1REQzNy1cdUREM0RcdURENDAtXHVERDQ5XHVERDRFXHVERTkwLVx1REVBRFx1REVDMC1cdURFRUJcdURFRjAtXHVERUY5XXxcdUQ4MzlbXHVERkUwLVx1REZFNlx1REZFOC1cdURGRUJcdURGRURcdURGRUVcdURGRjAtXHVERkZFXXxcdUQ4M0FbXHVEQzAwLVx1RENDNFx1RENDNy1cdURDQ0ZcdUREMDAtXHVERDQzXHVERDRCXHVERDUwLVx1REQ1OV18XHVEODNCW1x1REM3MS1cdURDQUJcdURDQUQtXHVEQ0FGXHVEQ0IxLVx1RENCNFx1REQwMS1cdUREMkRcdUREMkYtXHVERDNEXHVERTAwLVx1REUwM1x1REUwNS1cdURFMUZcdURFMjFcdURFMjJcdURFMjRcdURFMjdcdURFMjktXHVERTMyXHVERTM0LVx1REUzN1x1REUzOVx1REUzQlx1REU0Mlx1REU0N1x1REU0OVx1REU0Qlx1REU0RC1cdURFNEZcdURFNTFcdURFNTJcdURFNTRcdURFNTdcdURFNTlcdURFNUJcdURFNURcdURFNUZcdURFNjFcdURFNjJcdURFNjRcdURFNjctXHVERTZBXHVERTZDLVx1REU3Mlx1REU3NC1cdURFNzdcdURFNzktXHVERTdDXHVERTdFXHVERTgwLVx1REU4OVx1REU4Qi1cdURFOUJcdURFQTEtXHVERUEzXHVERUE1LVx1REVBOVx1REVBQi1cdURFQkJdfFx1RDgzQ1tcdUREMDAtXHVERDBDXXxcdUQ4M0VbXHVERkYwLVx1REZGOV18XHVEODY5W1x1REMwMC1cdURFREZcdURGMDAtXHVERkZGXXxcdUQ4NkRbXHVEQzAwLVx1REYzOFx1REY0MC1cdURGRkZdfFx1RDg2RVtcdURDMDAtXHVEQzFEXHVEQzIwLVx1REZGRl18XHVEODczW1x1REMwMC1cdURFQTFcdURFQjAtXHVERkZGXXxcdUQ4N0FbXHVEQzAwLVx1REZFMF18XHVEODdFW1x1REMwMC1cdURFMURdfFx1RDg4NFtcdURDMDAtXHVERjRBXSkvKSkpIHsKICAgICAgICAgICAgdmFyIGkgPSByWzFdIHx8IHJbMl0gfHwgIiI7CgogICAgICAgICAgICBpZiAoIWkgfHwgaSAmJiAoIiIgPT09IG4gfHwgdGhpcy5ydWxlcy5pbmxpbmUucHVuY3R1YXRpb24uZXhlYyhuKSkpIHsKICAgICAgICAgICAgICB2YXIgbywKICAgICAgICAgICAgICAgICAgYSwKICAgICAgICAgICAgICAgICAgdSA9IHJbMF0ubGVuZ3RoIC0gMSwKICAgICAgICAgICAgICAgICAgcyA9IHUsCiAgICAgICAgICAgICAgICAgIGwgPSAwLAogICAgICAgICAgICAgICAgICBjID0gIioiID09PSByWzBdWzBdID8gdGhpcy5ydWxlcy5pbmxpbmUuZW1TdHJvbmcuckRlbGltQXN0IDogdGhpcy5ydWxlcy5pbmxpbmUuZW1TdHJvbmcuckRlbGltVW5kOwoKICAgICAgICAgICAgICBmb3IgKGMubGFzdEluZGV4ID0gMCwgdCA9IHQuc2xpY2UoLTEgKiBlLmxlbmd0aCArIHUpOyBudWxsICE9IChyID0gYy5leGVjKHQpKTspIGlmIChvID0gclsxXSB8fCByWzJdIHx8IHJbM10gfHwgcls0XSB8fCByWzVdIHx8IHJbNl0pIGlmIChhID0gby5sZW5ndGgsIHJbM10gfHwgcls0XSkgcyArPSBhO2Vsc2UgaWYgKCEoKHJbNV0gfHwgcls2XSkgJiYgdSAlIDMpIHx8ICh1ICsgYSkgJSAzKSB7CiAgICAgICAgICAgICAgICBpZiAoISgocyAtPSBhKSA+IDApKSB7CiAgICAgICAgICAgICAgICAgIGlmIChhID0gTWF0aC5taW4oYSwgYSArIHMgKyBsKSwgTWF0aC5taW4odSwgYSkgJSAyKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBlLnNsaWNlKDEsIHUgKyByLmluZGV4ICsgYSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlbSIsCiAgICAgICAgICAgICAgICAgICAgICByYXc6IGUuc2xpY2UoMCwgdSArIHIuaW5kZXggKyBhICsgMSksCiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmLAogICAgICAgICAgICAgICAgICAgICAgdG9rZW5zOiB0aGlzLmxleGVyLmlubGluZVRva2VucyhmLCBbXSkKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB2YXIgcCA9IGUuc2xpY2UoMiwgdSArIHIuaW5kZXggKyBhIC0gMSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogInN0cm9uZyIsCiAgICAgICAgICAgICAgICAgICAgcmF3OiBlLnNsaWNlKDAsIHUgKyByLmluZGV4ICsgYSArIDEpLAogICAgICAgICAgICAgICAgICAgIHRleHQ6IHAsCiAgICAgICAgICAgICAgICAgICAgdG9rZW5zOiB0aGlzLmxleGVyLmlubGluZVRva2VucyhwLCBbXSkKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgbCArPSBhOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgbi5jb2Rlc3BhbiA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCA9IHRoaXMucnVsZXMuaW5saW5lLmNvZGUuZXhlYyhlKTsKCiAgICAgICAgICBpZiAodCkgewogICAgICAgICAgICB2YXIgbiA9IHRbMl0ucmVwbGFjZSgvXG4vZywgIiAiKSwKICAgICAgICAgICAgICAgIHIgPSAvW14gXS8udGVzdChuKSwKICAgICAgICAgICAgICAgIGkgPSAvXiAvLnRlc3QobikgJiYgLyAkLy50ZXN0KG4pOwogICAgICAgICAgICByZXR1cm4gciAmJiBpICYmIChuID0gbi5zdWJzdHJpbmcoMSwgbi5sZW5ndGggLSAxKSksIG4gPSBzKG4sICEwKSwgewogICAgICAgICAgICAgIHR5cGU6ICJjb2Rlc3BhbiIsCiAgICAgICAgICAgICAgcmF3OiB0WzBdLAogICAgICAgICAgICAgIHRleHQ6IG4KICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICB9LCBuLmJyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0ID0gdGhpcy5ydWxlcy5pbmxpbmUuYnIuZXhlYyhlKTsKICAgICAgICAgIGlmICh0KSByZXR1cm4gewogICAgICAgICAgICB0eXBlOiAiYnIiLAogICAgICAgICAgICByYXc6IHRbMF0KICAgICAgICAgIH07CiAgICAgICAgfSwgbi5kZWwgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgdmFyIHQgPSB0aGlzLnJ1bGVzLmlubGluZS5kZWwuZXhlYyhlKTsKICAgICAgICAgIGlmICh0KSByZXR1cm4gewogICAgICAgICAgICB0eXBlOiAiZGVsIiwKICAgICAgICAgICAgcmF3OiB0WzBdLAogICAgICAgICAgICB0ZXh0OiB0WzJdLAogICAgICAgICAgICB0b2tlbnM6IHRoaXMubGV4ZXIuaW5saW5lVG9rZW5zKHRbMl0sIFtdKQogICAgICAgICAgfTsKICAgICAgICB9LCBuLmF1dG9saW5rID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHZhciBuID0gdGhpcy5ydWxlcy5pbmxpbmUuYXV0b2xpbmsuZXhlYyhlKTsKCiAgICAgICAgICBpZiAobikgewogICAgICAgICAgICB2YXIgciwgaTsKICAgICAgICAgICAgcmV0dXJuICJAIiA9PT0gblsyXSA/IChyID0gcyh0aGlzLm9wdGlvbnMubWFuZ2xlID8gdChuWzFdKSA6IG5bMV0pLCBpID0gIm1haWx0bzoiICsgcikgOiAociA9IHMoblsxXSksIGkgPSByKSwgewogICAgICAgICAgICAgIHR5cGU6ICJsaW5rIiwKICAgICAgICAgICAgICByYXc6IG5bMF0sCiAgICAgICAgICAgICAgdGV4dDogciwKICAgICAgICAgICAgICBocmVmOiBpLAogICAgICAgICAgICAgIHRva2VuczogW3sKICAgICAgICAgICAgICAgIHR5cGU6ICJ0ZXh0IiwKICAgICAgICAgICAgICAgIHJhdzogciwKICAgICAgICAgICAgICAgIHRleHQ6IHIKICAgICAgICAgICAgICB9XQogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0sIG4udXJsID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHZhciBuOwoKICAgICAgICAgIGlmIChuID0gdGhpcy5ydWxlcy5pbmxpbmUudXJsLmV4ZWMoZSkpIHsKICAgICAgICAgICAgdmFyIHIsIGk7CiAgICAgICAgICAgIGlmICgiQCIgPT09IG5bMl0pIHIgPSBzKHRoaXMub3B0aW9ucy5tYW5nbGUgPyB0KG5bMF0pIDogblswXSksIGkgPSAibWFpbHRvOiIgKyByO2Vsc2UgewogICAgICAgICAgICAgIHZhciBvOwoKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICBvID0gblswXSwgblswXSA9IHRoaXMucnVsZXMuaW5saW5lLl9iYWNrcGVkYWwuZXhlYyhuWzBdKVswXTsKICAgICAgICAgICAgICB9IHdoaWxlIChvICE9PSBuWzBdKTsKCiAgICAgICAgICAgICAgciA9IHMoblswXSksIGkgPSAid3d3LiIgPT09IG5bMV0gPyAiaHR0cDovLyIgKyByIDogcjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIHR5cGU6ICJsaW5rIiwKICAgICAgICAgICAgICByYXc6IG5bMF0sCiAgICAgICAgICAgICAgdGV4dDogciwKICAgICAgICAgICAgICBocmVmOiBpLAogICAgICAgICAgICAgIHRva2VuczogW3sKICAgICAgICAgICAgICAgIHR5cGU6ICJ0ZXh0IiwKICAgICAgICAgICAgICAgIHJhdzogciwKICAgICAgICAgICAgICAgIHRleHQ6IHIKICAgICAgICAgICAgICB9XQogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0sIG4uaW5saW5lVGV4dCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICB2YXIgbiA9IHRoaXMucnVsZXMuaW5saW5lLnRleHQuZXhlYyhlKTsKCiAgICAgICAgICBpZiAobikgewogICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgcmV0dXJuIHIgPSB0aGlzLmxleGVyLnN0YXRlLmluUmF3QmxvY2sgPyB0aGlzLm9wdGlvbnMuc2FuaXRpemUgPyB0aGlzLm9wdGlvbnMuc2FuaXRpemVyID8gdGhpcy5vcHRpb25zLnNhbml0aXplcihuWzBdKSA6IHMoblswXSkgOiBuWzBdIDogcyh0aGlzLm9wdGlvbnMuc21hcnR5cGFudHMgPyB0KG5bMF0pIDogblswXSksIHsKICAgICAgICAgICAgICB0eXBlOiAidGV4dCIsCiAgICAgICAgICAgICAgcmF3OiBuWzBdLAogICAgICAgICAgICAgIHRleHQ6IHIKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICB9LCB0OwogICAgICB9KCksCiAgICAgICAgICBMID0gewogICAgICAgIG5ld2xpbmU6IC9eKD86ICooPzpcbnwkKSkrLywKICAgICAgICBjb2RlOiAvXiggezR9W15cbl0rKD86XG4oPzogKig/OlxufCQpKSopPykrLywKICAgICAgICBmZW5jZXM6IC9eIHswLDN9KGB7Myx9KD89W15gXG5dKlxuKXx+ezMsfSkoW15cbl0qKVxuKD86fChbXHNcU10qPylcbikoPzogezAsM31cMVt+YF0qICooPz1cbnwkKXwkKS8sCiAgICAgICAgaHI6IC9eIHswLDN9KCg/Oi0gKil7Myx9fCg/Ol8gKil7Myx9fCg/OlwqICopezMsfSkoPzpcbit8JCkvLAogICAgICAgIGhlYWRpbmc6IC9eIHswLDN9KCN7MSw2fSkoPz1cc3wkKSguKikoPzpcbit8JCkvLAogICAgICAgIGJsb2NrcXVvdGU6IC9eKCB7MCwzfT4gPyhwYXJhZ3JhcGh8W15cbl0qKSg/OlxufCQpKSsvLAogICAgICAgIGxpc3Q6IC9eKCB7MCwzfWJ1bGwpKCBbXlxuXSs/KT8oPzpcbnwkKS8sCiAgICAgICAgaHRtbDogIl4gezAsM30oPzo8KHNjcmlwdHxwcmV8c3R5bGV8dGV4dGFyZWEpW1xccz5dW1xcc1xcU10qPyg/OjwvXFwxPlteXFxuXSpcXG4rfCQpfGNvbW1lbnRbXlxcbl0qKFxcbit8JCl8PFxcP1tcXHNcXFNdKj8oPzpcXD8+XFxuKnwkKXw8IVtBLVpdW1xcc1xcU10qPyg/Oj5cXG4qfCQpfDwhXFxbQ0RBVEFcXFtbXFxzXFxTXSo/KD86XFxdXFxdPlxcbip8JCl8PC8/KHRhZykoPzogK3xcXG58Lz8+KVtcXHNcXFNdKj8oPzooPzpcXG4gKikrXFxufCQpfDwoPyFzY3JpcHR8cHJlfHN0eWxlfHRleHRhcmVhKShbYS16XVtcXHctXSopKD86YXR0cmlidXRlKSo/ICovPz4oPz1bIFxcdF0qKD86XFxufCQpKVtcXHNcXFNdKj8oPzooPzpcXG4gKikrXFxufCQpfDwvKD8hc2NyaXB0fHByZXxzdHlsZXx0ZXh0YXJlYSlbYS16XVtcXHctXSpcXHMqPig/PVsgXFx0XSooPzpcXG58JCkpW1xcc1xcU10qPyg/Oig/OlxcbiAqKStcXG58JCkpIiwKICAgICAgICBkZWY6IC9eIHswLDN9XFsobGFiZWwpXF06ICooPzpcbiAqKT88PyhbXlxzPl0rKT4/KD86KD86ICsoPzpcbiAqKT98ICpcbiAqKSh0aXRsZSkpPyAqKD86XG4rfCQpLywKICAgICAgICB0YWJsZTogUCwKICAgICAgICBsaGVhZGluZzogL14oW15cbl0rKVxuIHswLDN9KD0rfC0rKSAqKD86XG4rfCQpLywKICAgICAgICBfcGFyYWdyYXBoOiAvXihbXlxuXSsoPzpcbig/IWhyfGhlYWRpbmd8bGhlYWRpbmd8YmxvY2txdW90ZXxmZW5jZXN8bGlzdHxodG1sfHRhYmxlfCArXG4pW15cbl0rKSopLywKICAgICAgICB0ZXh0OiAvXlteXG5dKy8KICAgICAgfTsKCiAgICAgIEwuX2xhYmVsID0gLyg/IVxzKlxdKSg/OlxcLnxbXlxbXF1cXF0pKy8sIEwuX3RpdGxlID0gLyg/OiIoPzpcXCI/fFteIlxcXSkqInwnW14nXG5dKig/OlxuW14nXG5dKykqXG4/J3xcKFteKCldKlwpKS8sIEwuZGVmID0gYyhMLmRlZikucmVwbGFjZSgibGFiZWwiLCBMLl9sYWJlbCkucmVwbGFjZSgidGl0bGUiLCBMLl90aXRsZSkuZ2V0UmVnZXgoKSwgTC5idWxsZXQgPSAvKD86WyorLV18XGR7MSw5fVsuKV0pLywgTC5saXN0SXRlbVN0YXJ0ID0gYygvXiggKikoYnVsbCkgKi8pLnJlcGxhY2UoImJ1bGwiLCBMLmJ1bGxldCkuZ2V0UmVnZXgoKSwgTC5saXN0ID0gYyhMLmxpc3QpLnJlcGxhY2UoL2J1bGwvZywgTC5idWxsZXQpLnJlcGxhY2UoImhyIiwgIlxcbisoPz1cXDE/KD86KD86LSAqKXszLH18KD86XyAqKXszLH18KD86XFwqICopezMsfSkoPzpcXG4rfCQpKSIpLnJlcGxhY2UoImRlZiIsICJcXG4rKD89IiArIEwuZGVmLnNvdXJjZSArICIpIikuZ2V0UmVnZXgoKSwgTC5fdGFnID0gImFkZHJlc3N8YXJ0aWNsZXxhc2lkZXxiYXNlfGJhc2Vmb250fGJsb2NrcXVvdGV8Ym9keXxjYXB0aW9ufGNlbnRlcnxjb2x8Y29sZ3JvdXB8ZGR8ZGV0YWlsc3xkaWFsb2d8ZGlyfGRpdnxkbHxkdHxmaWVsZHNldHxmaWdjYXB0aW9ufGZpZ3VyZXxmb290ZXJ8Zm9ybXxmcmFtZXxmcmFtZXNldHxoWzEtNl18aGVhZHxoZWFkZXJ8aHJ8aHRtbHxpZnJhbWV8bGVnZW5kfGxpfGxpbmt8bWFpbnxtZW51fG1lbnVpdGVtfG1ldGF8bmF2fG5vZnJhbWVzfG9sfG9wdGdyb3VwfG9wdGlvbnxwfHBhcmFtfHNlY3Rpb258c291cmNlfHN1bW1hcnl8dGFibGV8dGJvZHl8dGR8dGZvb3R8dGh8dGhlYWR8dGl0bGV8dHJ8dHJhY2t8dWwiLCBMLl9jb21tZW50ID0gLzwhLS0oPyEtPz4pW1xzXFNdKj8oPzotLT58JCkvLCBMLmh0bWwgPSBjKEwuaHRtbCwgImkiKS5yZXBsYWNlKCJjb21tZW50IiwgTC5fY29tbWVudCkucmVwbGFjZSgidGFnIiwgTC5fdGFnKS5yZXBsYWNlKCJhdHRyaWJ1dGUiLCAvICtbYS16QS1aOl9dW1x3LjotXSooPzogKj0gKiJbXiJcbl0qInwgKj0gKidbXidcbl0qJ3wgKj0gKlteXHMiJz08PmBdKyk/LykuZ2V0UmVnZXgoKSwgTC5wYXJhZ3JhcGggPSBjKEwuX3BhcmFncmFwaCkucmVwbGFjZSgiaHIiLCBMLmhyKS5yZXBsYWNlKCJoZWFkaW5nIiwgIiB7MCwzfSN7MSw2fSAiKS5yZXBsYWNlKCJ8bGhlYWRpbmciLCAiIikucmVwbGFjZSgifHRhYmxlIiwgIiIpLnJlcGxhY2UoImJsb2NrcXVvdGUiLCAiIHswLDN9PiIpLnJlcGxhY2UoImZlbmNlcyIsICIgezAsM30oPzpgezMsfSg/PVteYFxcbl0qXFxuKXx+ezMsfSlbXlxcbl0qXFxuIikucmVwbGFjZSgibGlzdCIsICIgezAsM30oPzpbKistXXwxWy4pXSkgIikucmVwbGFjZSgiaHRtbCIsICI8Lz8oPzp0YWcpKD86ICt8XFxufC8/Pil8PCg/OnNjcmlwdHxwcmV8c3R5bGV8dGV4dGFyZWF8IS0tKSIpLnJlcGxhY2UoInRhZyIsIEwuX3RhZykuZ2V0UmVnZXgoKSwgTC5ibG9ja3F1b3RlID0gYyhMLmJsb2NrcXVvdGUpLnJlcGxhY2UoInBhcmFncmFwaCIsIEwucGFyYWdyYXBoKS5nZXRSZWdleCgpLCBMLm5vcm1hbCA9IGQoe30sIEwpLCBMLmdmbSA9IGQoe30sIEwubm9ybWFsLCB7CiAgICAgICAgdGFibGU6ICJeICooW15cXG4gXS4qXFx8LiopXFxuIHswLDN9KD86XFx8ICopPyg6Py0rOj8gKig/OlxcfCAqOj8tKzo/ICopKikoPzpcXHwgKik/KD86XFxuKCg/Oig/ISAqXFxufGhyfGhlYWRpbmd8YmxvY2txdW90ZXxjb2RlfGZlbmNlc3xsaXN0fGh0bWwpLiooPzpcXG58JCkpKilcXG4qfCQpIgogICAgICB9KSwgTC5nZm0udGFibGUgPSBjKEwuZ2ZtLnRhYmxlKS5yZXBsYWNlKCJociIsIEwuaHIpLnJlcGxhY2UoImhlYWRpbmciLCAiIHswLDN9I3sxLDZ9ICIpLnJlcGxhY2UoImJsb2NrcXVvdGUiLCAiIHswLDN9PiIpLnJlcGxhY2UoImNvZGUiLCAiIHs0fVteXFxuXSIpLnJlcGxhY2UoImZlbmNlcyIsICIgezAsM30oPzpgezMsfSg/PVteYFxcbl0qXFxuKXx+ezMsfSlbXlxcbl0qXFxuIikucmVwbGFjZSgibGlzdCIsICIgezAsM30oPzpbKistXXwxWy4pXSkgIikucmVwbGFjZSgiaHRtbCIsICI8Lz8oPzp0YWcpKD86ICt8XFxufC8/Pil8PCg/OnNjcmlwdHxwcmV8c3R5bGV8dGV4dGFyZWF8IS0tKSIpLnJlcGxhY2UoInRhZyIsIEwuX3RhZykuZ2V0UmVnZXgoKSwgTC5nZm0ucGFyYWdyYXBoID0gYyhMLl9wYXJhZ3JhcGgpLnJlcGxhY2UoImhyIiwgTC5ocikucmVwbGFjZSgiaGVhZGluZyIsICIgezAsM30jezEsNn0gIikucmVwbGFjZSgifGxoZWFkaW5nIiwgIiIpLnJlcGxhY2UoInRhYmxlIiwgTC5nZm0udGFibGUpLnJlcGxhY2UoImJsb2NrcXVvdGUiLCAiIHswLDN9PiIpLnJlcGxhY2UoImZlbmNlcyIsICIgezAsM30oPzpgezMsfSg/PVteYFxcbl0qXFxuKXx+ezMsfSlbXlxcbl0qXFxuIikucmVwbGFjZSgibGlzdCIsICIgezAsM30oPzpbKistXXwxWy4pXSkgIikucmVwbGFjZSgiaHRtbCIsICI8Lz8oPzp0YWcpKD86ICt8XFxufC8/Pil8PCg/OnNjcmlwdHxwcmV8c3R5bGV8dGV4dGFyZWF8IS0tKSIpLnJlcGxhY2UoInRhZyIsIEwuX3RhZykuZ2V0UmVnZXgoKSwgTC5wZWRhbnRpYyA9IGQoe30sIEwubm9ybWFsLCB7CiAgICAgICAgaHRtbDogYygiXiAqKD86Y29tbWVudCAqKD86XFxufFxccyokKXw8KHRhZylbXFxzXFxTXSs/PC9cXDE+ICooPzpcXG57Mix9fFxccyokKXw8dGFnKD86XCJbXlwiXSpcInwnW14nXSonfFxcc1teJ1wiLz5cXHNdKikqPy8/PiAqKD86XFxuezIsfXxcXHMqJCkpIikucmVwbGFjZSgiY29tbWVudCIsIEwuX2NvbW1lbnQpLnJlcGxhY2UoL3RhZy9nLCAiKD8hKD86YXxlbXxzdHJvbmd8c21hbGx8c3xjaXRlfHF8ZGZufGFiYnJ8ZGF0YXx0aW1lfGNvZGV8dmFyfHNhbXB8a2JkfHN1YnxzdXB8aXxifHV8bWFya3xydWJ5fHJ0fHJwfGJkaXxiZG98c3Bhbnxicnx3YnJ8aW5zfGRlbHxpbWcpXFxiKVxcdysoPyE6fFteXFx3XFxzQF0qQClcXGIiKS5nZXRSZWdleCgpLAogICAgICAgIGRlZjogL14gKlxbKFteXF1dKylcXTogKjw/KFteXHM+XSspPj8oPzogKyhbIihdW15cbl0rWyIpXSkpPyAqKD86XG4rfCQpLywKICAgICAgICBoZWFkaW5nOiAvXigjezEsNn0pKC4qKSg/OlxuK3wkKS8sCiAgICAgICAgZmVuY2VzOiBQLAogICAgICAgIHBhcmFncmFwaDogYyhMLm5vcm1hbC5fcGFyYWdyYXBoKS5yZXBsYWNlKCJociIsIEwuaHIpLnJlcGxhY2UoImhlYWRpbmciLCAiICojezEsNn0gKlteXG5dIikucmVwbGFjZSgibGhlYWRpbmciLCBMLmxoZWFkaW5nKS5yZXBsYWNlKCJibG9ja3F1b3RlIiwgIiB7MCwzfT4iKS5yZXBsYWNlKCJ8ZmVuY2VzIiwgIiIpLnJlcGxhY2UoInxsaXN0IiwgIiIpLnJlcGxhY2UoInxodG1sIiwgIiIpLmdldFJlZ2V4KCkKICAgICAgfSk7CiAgICAgIHZhciBOID0gewogICAgICAgIGVzY2FwZTogL15cXChbISIjJCUmJygpKissXC0uLzo7PD0+P0BcW1xdXFxeX2B7fH1+XSkvLAogICAgICAgIGF1dG9saW5rOiAvXjwoc2NoZW1lOlteXHNceDAwLVx4MWY8Pl0qfGVtYWlsKT4vLAogICAgICAgIHVybDogUCwKICAgICAgICB0YWc6ICJeY29tbWVudHxePC9bYS16QS1aXVtcXHc6LV0qXFxzKj58XjxbYS16QS1aXVtcXHctXSooPzphdHRyaWJ1dGUpKj9cXHMqLz8+fF48XFw/W1xcc1xcU10qP1xcPz58XjwhW2EtekEtWl0rXFxzW1xcc1xcU10qPz58XjwhXFxbQ0RBVEFcXFtbXFxzXFxTXSo/XFxdXFxdPiIsCiAgICAgICAgbGluazogL14hP1xbKGxhYmVsKVxdXChccyooaHJlZikoPzpccysodGl0bGUpKT9ccypcKS8sCiAgICAgICAgcmVmbGluazogL14hP1xbKGxhYmVsKVxdXFsocmVmKVxdLywKICAgICAgICBub2xpbms6IC9eIT9cWyhyZWYpXF0oPzpcW1xdKT8vLAogICAgICAgIHJlZmxpbmtTZWFyY2g6ICJyZWZsaW5rfG5vbGluayg/IVxcKCkiLAogICAgICAgIGVtU3Ryb25nOiB7CiAgICAgICAgICBsRGVsaW06IC9eKD86XCorKD86KFtwdW5jdF9dKXxbXlxzKl0pKXxeXysoPzooW3B1bmN0Kl0pfChbXlxzX10pKS8sCiAgICAgICAgICByRGVsaW1Bc3Q6IC9eW15fKl0qP1xfXF9bXl8qXSo/XCpbXl8qXSo/KD89XF9cXyl8W3B1bmN0X10oXCorKSg/PVtcc118JCl8W15wdW5jdCpfXHNdKFwqKykoPz1bcHVuY3RfXHNdfCQpfFtwdW5jdF9cc10oXCorKSg/PVtecHVuY3QqX1xzXSl8W1xzXShcKispKD89W3B1bmN0X10pfFtwdW5jdF9dKFwqKykoPz1bcHVuY3RfXSl8W15wdW5jdCpfXHNdKFwqKykoPz1bXnB1bmN0Kl9cc10pLywKICAgICAgICAgIHJEZWxpbVVuZDogL15bXl8qXSo/XCpcKlteXypdKj9cX1teXypdKj8oPz1cKlwqKXxbcHVuY3QqXShcXyspKD89W1xzXXwkKXxbXnB1bmN0Kl9cc10oXF8rKSg/PVtwdW5jdCpcc118JCl8W3B1bmN0KlxzXShcXyspKD89W15wdW5jdCpfXHNdKXxbXHNdKFxfKykoPz1bcHVuY3QqXSl8W3B1bmN0Kl0oXF8rKSg/PVtwdW5jdCpdKS8KICAgICAgICB9LAogICAgICAgIGNvZGU6IC9eKGArKShbXmBdfFteYF1bXHNcU10qP1teYF0pXDEoPyFgKS8sCiAgICAgICAgYnI6IC9eKCB7Mix9fFxcKVxuKD8hXHMqJCkvLAogICAgICAgIGRlbDogUCwKICAgICAgICB0ZXh0OiAvXihgK3xbXmBdKSg/Oig/PSB7Mix9XG4pfFtcc1xTXSo/KD86KD89W1xcPCFcW2AqX118XGJffCQpfFteIF0oPz0gezIsfVxuKSkpLywKICAgICAgICBwdW5jdHVhdGlvbjogL14oW1xzcHVuY3R1YXRpb25dKS8KICAgICAgfTsKICAgICAgTi5fcHVuY3R1YXRpb24gPSAiIVwiIyQlJicoKStcXC0uLC86Ozw9Pj9AXFxbXFxdYF57fH1+IiwgTi5wdW5jdHVhdGlvbiA9IGMoTi5wdW5jdHVhdGlvbikucmVwbGFjZSgvcHVuY3R1YXRpb24vZywgTi5fcHVuY3R1YXRpb24pLmdldFJlZ2V4KCksIE4uYmxvY2tTa2lwID0gL1xbW15cXV0qP1xdXChbXlwpXSo/XCl8YFteYF0qP2B8PFtePl0qPz4vZywgTi5lc2NhcGVkRW1TdCA9IC9cXFwqfFxcXy9nLCBOLl9jb21tZW50ID0gYyhMLl9jb21tZW50KS5yZXBsYWNlKCIoPzotLVx4M2V8JCkiLCAiLS1ceDNlIikuZ2V0UmVnZXgoKSwgTi5lbVN0cm9uZy5sRGVsaW0gPSBjKE4uZW1TdHJvbmcubERlbGltKS5yZXBsYWNlKC9wdW5jdC9nLCBOLl9wdW5jdHVhdGlvbikuZ2V0UmVnZXgoKSwgTi5lbVN0cm9uZy5yRGVsaW1Bc3QgPSBjKE4uZW1TdHJvbmcuckRlbGltQXN0LCAiZyIpLnJlcGxhY2UoL3B1bmN0L2csIE4uX3B1bmN0dWF0aW9uKS5nZXRSZWdleCgpLCBOLmVtU3Ryb25nLnJEZWxpbVVuZCA9IGMoTi5lbVN0cm9uZy5yRGVsaW1VbmQsICJnIikucmVwbGFjZSgvcHVuY3QvZywgTi5fcHVuY3R1YXRpb24pLmdldFJlZ2V4KCksIE4uX2VzY2FwZXMgPSAvXFwoWyEiIyQlJicoKSorLFwtLi86Ozw9Pj9AXFtcXVxcXl9ge3x9fl0pL2csIE4uX3NjaGVtZSA9IC9bYS16QS1aXVthLXpBLVowLTkrLi1dezEsMzF9LywgTi5fZW1haWwgPSAvW2EtekEtWjAtOS4hIyQlJicqKy89P15fYHt8fX4tXSsoQClbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcLlthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykrKD8hWy1fXSkvLCBOLmF1dG9saW5rID0gYyhOLmF1dG9saW5rKS5yZXBsYWNlKCJzY2hlbWUiLCBOLl9zY2hlbWUpLnJlcGxhY2UoImVtYWlsIiwgTi5fZW1haWwpLmdldFJlZ2V4KCksIE4uX2F0dHJpYnV0ZSA9IC9ccytbYS16QS1aOl9dW1x3LjotXSooPzpccyo9XHMqIlteIl0qInxccyo9XHMqJ1teJ10qJ3xccyo9XHMqW15ccyInPTw+YF0rKT8vLCBOLnRhZyA9IGMoTi50YWcpLnJlcGxhY2UoImNvbW1lbnQiLCBOLl9jb21tZW50KS5yZXBsYWNlKCJhdHRyaWJ1dGUiLCBOLl9hdHRyaWJ1dGUpLmdldFJlZ2V4KCksIE4uX2xhYmVsID0gLyg/OlxbKD86XFwufFteXFtcXVxcXSkqXF18XFwufGBbXmBdKmB8W15cW1xdXFxgXSkqPy8sIE4uX2hyZWYgPSAvPCg/OlxcLnxbXlxuPD5cXF0pKz58W15cc1x4MDAtXHgxZl0qLywgTi5fdGl0bGUgPSAvIig/OlxcIj98W14iXFxdKSoifCcoPzpcXCc/fFteJ1xcXSkqJ3xcKCg/OlxcXCk/fFteKVxcXSkqXCkvLCBOLmxpbmsgPSBjKE4ubGluaykucmVwbGFjZSgibGFiZWwiLCBOLl9sYWJlbCkucmVwbGFjZSgiaHJlZiIsIE4uX2hyZWYpLnJlcGxhY2UoInRpdGxlIiwgTi5fdGl0bGUpLmdldFJlZ2V4KCksIE4ucmVmbGluayA9IGMoTi5yZWZsaW5rKS5yZXBsYWNlKCJsYWJlbCIsIE4uX2xhYmVsKS5yZXBsYWNlKCJyZWYiLCBMLl9sYWJlbCkuZ2V0UmVnZXgoKSwgTi5ub2xpbmsgPSBjKE4ubm9saW5rKS5yZXBsYWNlKCJyZWYiLCBMLl9sYWJlbCkuZ2V0UmVnZXgoKSwgTi5yZWZsaW5rU2VhcmNoID0gYyhOLnJlZmxpbmtTZWFyY2gsICJnIikucmVwbGFjZSgicmVmbGluayIsIE4ucmVmbGluaykucmVwbGFjZSgibm9saW5rIiwgTi5ub2xpbmspLmdldFJlZ2V4KCksIE4ubm9ybWFsID0gZCh7fSwgTiksIE4ucGVkYW50aWMgPSBkKHt9LCBOLm5vcm1hbCwgewogICAgICAgIHN0cm9uZzogewogICAgICAgICAgc3RhcnQ6IC9eX198XCpcKi8sCiAgICAgICAgICBtaWRkbGU6IC9eX18oPz1cUykoW1xzXFNdKj9cUylfXyg/IV8pfF5cKlwqKD89XFMpKFtcc1xTXSo/XFMpXCpcKig/IVwqKS8sCiAgICAgICAgICBlbmRBc3Q6IC9cKlwqKD8hXCopL2csCiAgICAgICAgICBlbmRVbmQ6IC9fXyg/IV8pL2cKICAgICAgICB9LAogICAgICAgIGVtOiB7CiAgICAgICAgICBzdGFydDogL15ffFwqLywKICAgICAgICAgIG1pZGRsZTogL14oKVwqKD89XFMpKFtcc1xTXSo/XFMpXCooPyFcKil8Xl8oPz1cUykoW1xzXFNdKj9cUylfKD8hXykvLAogICAgICAgICAgZW5kQXN0OiAvXCooPyFcKikvZywKICAgICAgICAgIGVuZFVuZDogL18oPyFfKS9nCiAgICAgICAgfSwKICAgICAgICBsaW5rOiBjKC9eIT9cWyhsYWJlbClcXVwoKC4qPylcKS8pLnJlcGxhY2UoImxhYmVsIiwgTi5fbGFiZWwpLmdldFJlZ2V4KCksCiAgICAgICAgcmVmbGluazogYygvXiE/XFsobGFiZWwpXF1ccypcWyhbXlxdXSopXF0vKS5yZXBsYWNlKCJsYWJlbCIsIE4uX2xhYmVsKS5nZXRSZWdleCgpCiAgICAgIH0pLCBOLmdmbSA9IGQoe30sIE4ubm9ybWFsLCB7CiAgICAgICAgZXNjYXBlOiBjKE4uZXNjYXBlKS5yZXBsYWNlKCJdKSIsICJ+fF0pIikuZ2V0UmVnZXgoKSwKICAgICAgICBfZXh0ZW5kZWRfZW1haWw6IC9bQS1aYS16MC05Ll8rLV0rKEApW2EtekEtWjAtOS1fXSsoPzpcLlthLXpBLVowLTktX10qW2EtekEtWjAtOV0pKyg/IVstX10pLywKICAgICAgICB1cmw6IC9eKCg/OmZ0cHxodHRwcz8pOlwvXC98d3d3XC4pKD86W2EtekEtWjAtOVwtXStcLj8pK1teXHM8XSp8XmVtYWlsLywKICAgICAgICBfYmFja3BlZGFsOiAvKD86W14/IS4sOjsqX34oKSZdK3xcKFteKV0qXCl8Jig/IVthLXpBLVowLTldKzskKXxbPyEuLDo7Kl9+KV0rKD8hJCkpKy8sCiAgICAgICAgZGVsOiAvXih+fj8pKD89W15cc35dKShbXHNcU10qP1teXHN+XSlcMSg/PVtefl18JCkvLAogICAgICAgIHRleHQ6IC9eKFtgfl0rfFteYH5dKSg/Oig/PSB7Mix9XG4pfCg/PVthLXpBLVowLTkuISMkJSYnKitcLz0/X2B7XHx9fi1dK0ApfFtcc1xTXSo/KD86KD89W1xcPCFcW2Aqfl9dfFxiX3xodHRwcz86XC9cL3xmdHA6XC9cL3x3d3dcLnwkKXxbXiBdKD89IHsyLH1cbil8W15hLXpBLVowLTkuISMkJSYnKitcLz0/X2B7XHx9fi1dKD89W2EtekEtWjAtOS4hIyQlJicqK1wvPT9fYHtcfH1+LV0rQCkpKS8KICAgICAgfSksIE4uZ2ZtLnVybCA9IGMoTi5nZm0udXJsLCAiaSIpLnJlcGxhY2UoImVtYWlsIiwgTi5nZm0uX2V4dGVuZGVkX2VtYWlsKS5nZXRSZWdleCgpLCBOLmJyZWFrcyA9IGQoe30sIE4uZ2ZtLCB7CiAgICAgICAgYnI6IGMoTi5icikucmVwbGFjZSgiezIsfSIsICIqIikuZ2V0UmVnZXgoKSwKICAgICAgICB0ZXh0OiBjKE4uZ2ZtLnRleHQpLnJlcGxhY2UoIlxcYl8iLCAiXFxiX3wgezIsfVxcbiIpLnJlcGxhY2UoL1x7MixcfS9nLCAiKiIpLmdldFJlZ2V4KCkKICAgICAgfSk7CgogICAgICB2YXIgVSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiB0KHQpIHsKICAgICAgICAgIHRoaXMudG9rZW5zID0gW10sIHRoaXMudG9rZW5zLmxpbmtzID0gT2JqZWN0LmNyZWF0ZShudWxsKSwgdGhpcy5vcHRpb25zID0gdCB8fCBlLmRlZmF1bHRzLCB0aGlzLm9wdGlvbnMudG9rZW5pemVyID0gdGhpcy5vcHRpb25zLnRva2VuaXplciB8fCBuZXcgTSgpLCB0aGlzLnRva2VuaXplciA9IHRoaXMub3B0aW9ucy50b2tlbml6ZXIsIHRoaXMudG9rZW5pemVyLm9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsIHRoaXMudG9rZW5pemVyLmxleGVyID0gdGhpcywgdGhpcy5pbmxpbmVRdWV1ZSA9IFtdLCB0aGlzLnN0YXRlID0gewogICAgICAgICAgICBpbkxpbms6ICExLAogICAgICAgICAgICBpblJhd0Jsb2NrOiAhMSwKICAgICAgICAgICAgdG9wOiAhMAogICAgICAgICAgfTsKICAgICAgICAgIHZhciBuID0gewogICAgICAgICAgICBibG9jazogTC5ub3JtYWwsCiAgICAgICAgICAgIGlubGluZTogTi5ub3JtYWwKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLm9wdGlvbnMucGVkYW50aWMgPyAobi5ibG9jayA9IEwucGVkYW50aWMsIG4uaW5saW5lID0gTi5wZWRhbnRpYykgOiB0aGlzLm9wdGlvbnMuZ2ZtICYmIChuLmJsb2NrID0gTC5nZm0sIHRoaXMub3B0aW9ucy5icmVha3MgPyBuLmlubGluZSA9IE4uYnJlYWtzIDogbi5pbmxpbmUgPSBOLmdmbSksIHRoaXMudG9rZW5pemVyLnJ1bGVzID0gbjsKICAgICAgICB9CgogICAgICAgIHQubGV4ID0gZnVuY3Rpb24gKGUsIG4pIHsKICAgICAgICAgIHJldHVybiBuZXcgdChuKS5sZXgoZSk7CiAgICAgICAgfSwgdC5sZXhJbmxpbmUgPSBmdW5jdGlvbiAoZSwgbikgewogICAgICAgICAgcmV0dXJuIG5ldyB0KG4pLmlubGluZVRva2VucyhlKTsKICAgICAgICB9OwogICAgICAgIHZhciByID0gdC5wcm90b3R5cGU7CiAgICAgICAgcmV0dXJuIHIubGV4ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGUgPSBlLnJlcGxhY2UoL1xyXG58XHIvZywgIlxuIikucmVwbGFjZSgvXHQvZywgIiAgICAiKSwgdGhpcy5ibG9ja1Rva2VucyhlLCB0aGlzLnRva2Vucyk7CgogICAgICAgICAgZm9yICh2YXIgdDsgdCA9IHRoaXMuaW5saW5lUXVldWUuc2hpZnQoKTspIHRoaXMuaW5saW5lVG9rZW5zKHQuc3JjLCB0LnRva2Vucyk7CgogICAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5zOwogICAgICAgIH0sIHIuYmxvY2tUb2tlbnMgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgdmFyIG4gPSB0aGlzOwogICAgICAgICAgdm9pZCAwID09PSB0ICYmICh0ID0gW10pLCB0aGlzLm9wdGlvbnMucGVkYW50aWMgJiYgKGUgPSBlLnJlcGxhY2UoL14gKyQvZ20sICIiKSk7CgogICAgICAgICAgZm9yICh2YXIgciwgaSwgbywgYTsgZTspIGlmICghKHRoaXMub3B0aW9ucy5leHRlbnNpb25zICYmIHRoaXMub3B0aW9ucy5leHRlbnNpb25zLmJsb2NrICYmIHRoaXMub3B0aW9ucy5leHRlbnNpb25zLmJsb2NrLnNvbWUoZnVuY3Rpb24gKGkpIHsKICAgICAgICAgICAgcmV0dXJuICEhKHIgPSBpLmNhbGwoewogICAgICAgICAgICAgIGxleGVyOiBuCiAgICAgICAgICAgIH0sIGUsIHQpKSAmJiAoZSA9IGUuc3Vic3RyaW5nKHIucmF3Lmxlbmd0aCksIHQucHVzaChyKSwgITApOwogICAgICAgICAgfSkpKSBpZiAociA9IHRoaXMudG9rZW5pemVyLnNwYWNlKGUpKSBlID0gZS5zdWJzdHJpbmcoci5yYXcubGVuZ3RoKSwgMSA9PT0gci5yYXcubGVuZ3RoICYmIHQubGVuZ3RoID4gMCA/IHRbdC5sZW5ndGggLSAxXS5yYXcgKz0gIlxuIiA6IHQucHVzaChyKTtlbHNlIGlmIChyID0gdGhpcy50b2tlbml6ZXIuY29kZShlKSkgZSA9IGUuc3Vic3RyaW5nKHIucmF3Lmxlbmd0aCksIGkgPSB0W3QubGVuZ3RoIC0gMV0sICFpIHx8ICJwYXJhZ3JhcGgiICE9PSBpLnR5cGUgJiYgInRleHQiICE9PSBpLnR5cGUgPyB0LnB1c2gocikgOiAoaS5yYXcgKz0gIlxuIiArIHIucmF3LCBpLnRleHQgKz0gIlxuIiArIHIudGV4dCwgdGhpcy5pbmxpbmVRdWV1ZVt0aGlzLmlubGluZVF1ZXVlLmxlbmd0aCAtIDFdLnNyYyA9IGkudGV4dCk7ZWxzZSBpZiAociA9IHRoaXMudG9rZW5pemVyLmZlbmNlcyhlKSkgZSA9IGUuc3Vic3RyaW5nKHIucmF3Lmxlbmd0aCksIHQucHVzaChyKTtlbHNlIGlmIChyID0gdGhpcy50b2tlbml6ZXIuaGVhZGluZyhlKSkgZSA9IGUuc3Vic3RyaW5nKHIucmF3Lmxlbmd0aCksIHQucHVzaChyKTtlbHNlIGlmIChyID0gdGhpcy50b2tlbml6ZXIuaHIoZSkpIGUgPSBlLnN1YnN0cmluZyhyLnJhdy5sZW5ndGgpLCB0LnB1c2gocik7ZWxzZSBpZiAociA9IHRoaXMudG9rZW5pemVyLmJsb2NrcXVvdGUoZSkpIGUgPSBlLnN1YnN0cmluZyhyLnJhdy5sZW5ndGgpLCB0LnB1c2gocik7ZWxzZSBpZiAociA9IHRoaXMudG9rZW5pemVyLmxpc3QoZSkpIGUgPSBlLnN1YnN0cmluZyhyLnJhdy5sZW5ndGgpLCB0LnB1c2gocik7ZWxzZSBpZiAociA9IHRoaXMudG9rZW5pemVyLmh0bWwoZSkpIGUgPSBlLnN1YnN0cmluZyhyLnJhdy5sZW5ndGgpLCB0LnB1c2gocik7ZWxzZSBpZiAociA9IHRoaXMudG9rZW5pemVyLmRlZihlKSkgZSA9IGUuc3Vic3RyaW5nKHIucmF3Lmxlbmd0aCksIGkgPSB0W3QubGVuZ3RoIC0gMV0sICFpIHx8ICJwYXJhZ3JhcGgiICE9PSBpLnR5cGUgJiYgInRleHQiICE9PSBpLnR5cGUgPyB0aGlzLnRva2Vucy5saW5rc1tyLnRhZ10gfHwgKHRoaXMudG9rZW5zLmxpbmtzW3IudGFnXSA9IHsKICAgICAgICAgICAgaHJlZjogci5ocmVmLAogICAgICAgICAgICB0aXRsZTogci50aXRsZQogICAgICAgICAgfSkgOiAoaS5yYXcgKz0gIlxuIiArIHIucmF3LCBpLnRleHQgKz0gIlxuIiArIHIucmF3LCB0aGlzLmlubGluZVF1ZXVlW3RoaXMuaW5saW5lUXVldWUubGVuZ3RoIC0gMV0uc3JjID0gaS50ZXh0KTtlbHNlIGlmIChyID0gdGhpcy50b2tlbml6ZXIudGFibGUoZSkpIGUgPSBlLnN1YnN0cmluZyhyLnJhdy5sZW5ndGgpLCB0LnB1c2gocik7ZWxzZSBpZiAociA9IHRoaXMudG9rZW5pemVyLmxoZWFkaW5nKGUpKSBlID0gZS5zdWJzdHJpbmcoci5yYXcubGVuZ3RoKSwgdC5wdXNoKHIpO2Vsc2UgaWYgKG8gPSBlLCB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucyAmJiB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5zdGFydEJsb2NrICYmIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHQgPSAxIC8gMCwKICAgICAgICAgICAgICAgIHIgPSBlLnNsaWNlKDEpLAogICAgICAgICAgICAgICAgaSA9IHZvaWQgMDsKICAgICAgICAgICAgbi5vcHRpb25zLmV4dGVuc2lvbnMuc3RhcnRCbG9jay5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgIm51bWJlciIgPT0gdHlwZW9mIChpID0gZS5jYWxsKHsKICAgICAgICAgICAgICAgIGxleGVyOiB0aGlzCiAgICAgICAgICAgICAgfSwgcikpICYmIGkgPj0gMCAmJiAodCA9IE1hdGgubWluKHQsIGkpKTsKICAgICAgICAgICAgfSksIHQgPCAxIC8gMCAmJiB0ID49IDAgJiYgKG8gPSBlLnN1YnN0cmluZygwLCB0ICsgMSkpOwogICAgICAgICAgfSgpLCB0aGlzLnN0YXRlLnRvcCAmJiAociA9IHRoaXMudG9rZW5pemVyLnBhcmFncmFwaChvKSkpIGkgPSB0W3QubGVuZ3RoIC0gMV0sIGEgJiYgInBhcmFncmFwaCIgPT09IGkudHlwZSA/IChpLnJhdyArPSAiXG4iICsgci5yYXcsIGkudGV4dCArPSAiXG4iICsgci50ZXh0LCB0aGlzLmlubGluZVF1ZXVlLnBvcCgpLCB0aGlzLmlubGluZVF1ZXVlW3RoaXMuaW5saW5lUXVldWUubGVuZ3RoIC0gMV0uc3JjID0gaS50ZXh0KSA6IHQucHVzaChyKSwgYSA9IG8ubGVuZ3RoICE9PSBlLmxlbmd0aCwgZSA9IGUuc3Vic3RyaW5nKHIucmF3Lmxlbmd0aCk7ZWxzZSBpZiAociA9IHRoaXMudG9rZW5pemVyLnRleHQoZSkpIGUgPSBlLnN1YnN0cmluZyhyLnJhdy5sZW5ndGgpLCBpID0gdFt0Lmxlbmd0aCAtIDFdLCBpICYmICJ0ZXh0IiA9PT0gaS50eXBlID8gKGkucmF3ICs9ICJcbiIgKyByLnJhdywgaS50ZXh0ICs9ICJcbiIgKyByLnRleHQsIHRoaXMuaW5saW5lUXVldWUucG9wKCksIHRoaXMuaW5saW5lUXVldWVbdGhpcy5pbmxpbmVRdWV1ZS5sZW5ndGggLSAxXS5zcmMgPSBpLnRleHQpIDogdC5wdXNoKHIpO2Vsc2UgaWYgKGUpIHsKICAgICAgICAgICAgdmFyIHUgPSAiSW5maW5pdGUgbG9vcCBvbiBieXRlOiAiICsgZS5jaGFyQ29kZUF0KDApOwogICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNpbGVudCkgYnJlYWs7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcih1KTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS50b3AgPSAhMCwgdDsKICAgICAgICB9LCByLmlubGluZSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICB0aGlzLmlubGluZVF1ZXVlLnB1c2goewogICAgICAgICAgICBzcmM6IGUsCiAgICAgICAgICAgIHRva2VuczogdAogICAgICAgICAgfSk7CiAgICAgICAgfSwgci5pbmxpbmVUb2tlbnMgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgdmFyIG4gPSB0aGlzOwogICAgICAgICAgdm9pZCAwID09PSB0ICYmICh0ID0gW10pOwogICAgICAgICAgdmFyIHIsCiAgICAgICAgICAgICAgaSwKICAgICAgICAgICAgICBvLAogICAgICAgICAgICAgIGEsCiAgICAgICAgICAgICAgdSwKICAgICAgICAgICAgICBzLAogICAgICAgICAgICAgIGwgPSBlOwoKICAgICAgICAgIGlmICh0aGlzLnRva2Vucy5saW5rcykgewogICAgICAgICAgICB2YXIgYyA9IE9iamVjdC5rZXlzKHRoaXMudG9rZW5zLmxpbmtzKTsKICAgICAgICAgICAgaWYgKGMubGVuZ3RoID4gMCkgZm9yICg7IG51bGwgIT0gKGEgPSB0aGlzLnRva2VuaXplci5ydWxlcy5pbmxpbmUucmVmbGlua1NlYXJjaC5leGVjKGwpKTspIGMuaW5jbHVkZXMoYVswXS5zbGljZShhWzBdLmxhc3RJbmRleE9mKCJbIikgKyAxLCAtMSkpICYmIChsID0gbC5zbGljZSgwLCBhLmluZGV4KSArICJbIiArIHkoImEiLCBhWzBdLmxlbmd0aCAtIDIpICsgIl0iICsgbC5zbGljZSh0aGlzLnRva2VuaXplci5ydWxlcy5pbmxpbmUucmVmbGlua1NlYXJjaC5sYXN0SW5kZXgpKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3IgKDsgbnVsbCAhPSAoYSA9IHRoaXMudG9rZW5pemVyLnJ1bGVzLmlubGluZS5ibG9ja1NraXAuZXhlYyhsKSk7KSBsID0gbC5zbGljZSgwLCBhLmluZGV4KSArICJbIiArIHkoImEiLCBhWzBdLmxlbmd0aCAtIDIpICsgIl0iICsgbC5zbGljZSh0aGlzLnRva2VuaXplci5ydWxlcy5pbmxpbmUuYmxvY2tTa2lwLmxhc3RJbmRleCk7CgogICAgICAgICAgZm9yICg7IG51bGwgIT0gKGEgPSB0aGlzLnRva2VuaXplci5ydWxlcy5pbmxpbmUuZXNjYXBlZEVtU3QuZXhlYyhsKSk7KSBsID0gbC5zbGljZSgwLCBhLmluZGV4KSArICIrKyIgKyBsLnNsaWNlKHRoaXMudG9rZW5pemVyLnJ1bGVzLmlubGluZS5lc2NhcGVkRW1TdC5sYXN0SW5kZXgpOwoKICAgICAgICAgIGZvciAoOyBlOykgaWYgKHUgfHwgKHMgPSAiIiksIHUgPSAhMSwgISh0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucyAmJiB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5pbmxpbmUgJiYgdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMuaW5saW5lLnNvbWUoZnVuY3Rpb24gKGkpIHsKICAgICAgICAgICAgcmV0dXJuICEhKHIgPSBpLmNhbGwoewogICAgICAgICAgICAgIGxleGVyOiBuCiAgICAgICAgICAgIH0sIGUsIHQpKSAmJiAoZSA9IGUuc3Vic3RyaW5nKHIucmF3Lmxlbmd0aCksIHQucHVzaChyKSwgITApOwogICAgICAgICAgfSkpKSBpZiAociA9IHRoaXMudG9rZW5pemVyLmVzY2FwZShlKSkgZSA9IGUuc3Vic3RyaW5nKHIucmF3Lmxlbmd0aCksIHQucHVzaChyKTtlbHNlIGlmIChyID0gdGhpcy50b2tlbml6ZXIudGFnKGUpKSBlID0gZS5zdWJzdHJpbmcoci5yYXcubGVuZ3RoKSwgaSA9IHRbdC5sZW5ndGggLSAxXSwgaSAmJiAidGV4dCIgPT09IHIudHlwZSAmJiAidGV4dCIgPT09IGkudHlwZSA/IChpLnJhdyArPSByLnJhdywgaS50ZXh0ICs9IHIudGV4dCkgOiB0LnB1c2gocik7ZWxzZSBpZiAociA9IHRoaXMudG9rZW5pemVyLmxpbmsoZSkpIGUgPSBlLnN1YnN0cmluZyhyLnJhdy5sZW5ndGgpLCB0LnB1c2gocik7ZWxzZSBpZiAociA9IHRoaXMudG9rZW5pemVyLnJlZmxpbmsoZSwgdGhpcy50b2tlbnMubGlua3MpKSBlID0gZS5zdWJzdHJpbmcoci5yYXcubGVuZ3RoKSwgaSA9IHRbdC5sZW5ndGggLSAxXSwgaSAmJiAidGV4dCIgPT09IHIudHlwZSAmJiAidGV4dCIgPT09IGkudHlwZSA/IChpLnJhdyArPSByLnJhdywgaS50ZXh0ICs9IHIudGV4dCkgOiB0LnB1c2gocik7ZWxzZSBpZiAociA9IHRoaXMudG9rZW5pemVyLmVtU3Ryb25nKGUsIGwsIHMpKSBlID0gZS5zdWJzdHJpbmcoci5yYXcubGVuZ3RoKSwgdC5wdXNoKHIpO2Vsc2UgaWYgKHIgPSB0aGlzLnRva2VuaXplci5jb2Rlc3BhbihlKSkgZSA9IGUuc3Vic3RyaW5nKHIucmF3Lmxlbmd0aCksIHQucHVzaChyKTtlbHNlIGlmIChyID0gdGhpcy50b2tlbml6ZXIuYnIoZSkpIGUgPSBlLnN1YnN0cmluZyhyLnJhdy5sZW5ndGgpLCB0LnB1c2gocik7ZWxzZSBpZiAociA9IHRoaXMudG9rZW5pemVyLmRlbChlKSkgZSA9IGUuc3Vic3RyaW5nKHIucmF3Lmxlbmd0aCksIHQucHVzaChyKTtlbHNlIGlmIChyID0gdGhpcy50b2tlbml6ZXIuYXV0b2xpbmsoZSwgdykpIGUgPSBlLnN1YnN0cmluZyhyLnJhdy5sZW5ndGgpLCB0LnB1c2gocik7ZWxzZSBpZiAodGhpcy5zdGF0ZS5pbkxpbmsgfHwgIShyID0gdGhpcy50b2tlbml6ZXIudXJsKGUsIHcpKSkgewogICAgICAgICAgICBpZiAobyA9IGUsIHRoaXMub3B0aW9ucy5leHRlbnNpb25zICYmIHRoaXMub3B0aW9ucy5leHRlbnNpb25zLnN0YXJ0SW5saW5lICYmIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgdCA9IDEgLyAwLAogICAgICAgICAgICAgICAgICByID0gZS5zbGljZSgxKSwKICAgICAgICAgICAgICAgICAgaSA9IHZvaWQgMDsKICAgICAgICAgICAgICBuLm9wdGlvbnMuZXh0ZW5zaW9ucy5zdGFydElubGluZS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAibnVtYmVyIiA9PSB0eXBlb2YgKGkgPSBlLmNhbGwoewogICAgICAgICAgICAgICAgICBsZXhlcjogdGhpcwogICAgICAgICAgICAgICAgfSwgcikpICYmIGkgPj0gMCAmJiAodCA9IE1hdGgubWluKHQsIGkpKTsKICAgICAgICAgICAgICB9KSwgdCA8IDEgLyAwICYmIHQgPj0gMCAmJiAobyA9IGUuc3Vic3RyaW5nKDAsIHQgKyAxKSk7CiAgICAgICAgICAgIH0oKSwgciA9IHRoaXMudG9rZW5pemVyLmlubGluZVRleHQobywgeCkpIGUgPSBlLnN1YnN0cmluZyhyLnJhdy5sZW5ndGgpLCAiXyIgIT09IHIucmF3LnNsaWNlKC0xKSAmJiAocyA9IHIucmF3LnNsaWNlKC0xKSksIHUgPSAhMCwgaSA9IHRbdC5sZW5ndGggLSAxXSwgaSAmJiAidGV4dCIgPT09IGkudHlwZSA/IChpLnJhdyArPSByLnJhdywgaS50ZXh0ICs9IHIudGV4dCkgOiB0LnB1c2gocik7ZWxzZSBpZiAoZSkgewogICAgICAgICAgICAgIHZhciBmID0gIkluZmluaXRlIGxvb3Agb24gYnl0ZTogIiArIGUuY2hhckNvZGVBdCgwKTsKICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNpbGVudCkgYnJlYWs7CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGYpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgZSA9IGUuc3Vic3RyaW5nKHIucmF3Lmxlbmd0aCksIHQucHVzaChyKTsKCiAgICAgICAgICByZXR1cm4gdDsKICAgICAgICB9LCBuKHQsIG51bGwsIFt7CiAgICAgICAgICBrZXk6ICJydWxlcyIsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBibG9jazogTCwKICAgICAgICAgICAgICBpbmxpbmU6IE4KICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICB9XSksIHQ7CiAgICAgIH0oKSwKICAgICAgICAgIFEgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gdCh0KSB7CiAgICAgICAgICB0aGlzLm9wdGlvbnMgPSB0IHx8IGUuZGVmYXVsdHM7CiAgICAgICAgfQoKICAgICAgICB2YXIgbiA9IHQucHJvdG90eXBlOwogICAgICAgIHJldHVybiBuLmNvZGUgPSBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgdmFyIHIgPSAodCB8fCAiIikubWF0Y2goL1xTKi8pWzBdOwoKICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0KSB7CiAgICAgICAgICAgIHZhciBpID0gdGhpcy5vcHRpb25zLmhpZ2hsaWdodChlLCByKTsKICAgICAgICAgICAgbnVsbCAhPSBpICYmIGkgIT09IGUgJiYgKG4gPSAhMCwgZSA9IGkpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBlID0gZS5yZXBsYWNlKC9cbiQvLCAiIikgKyAiXG4iLCByID8gJzxwcmU+PGNvZGUgY2xhc3M9IicgKyB0aGlzLm9wdGlvbnMubGFuZ1ByZWZpeCArIHMociwgITApICsgJyI+JyArIChuID8gZSA6IHMoZSwgITApKSArICI8L2NvZGU+PC9wcmU+XG4iIDogIjxwcmU+PGNvZGU+IiArIChuID8gZSA6IHMoZSwgITApKSArICI8L2NvZGU+PC9wcmU+XG4iOwogICAgICAgIH0sIG4uYmxvY2txdW90ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gIjxibG9ja3F1b3RlPlxuIiArIGUgKyAiPC9ibG9ja3F1b3RlPlxuIjsKICAgICAgICB9LCBuLmh0bWwgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfSwgbi5oZWFkaW5nID0gZnVuY3Rpb24gKGUsIHQsIG4sIHIpIHsKICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaGVhZGVySWRzID8gIjxoIiArIHQgKyAnIGlkPSInICsgdGhpcy5vcHRpb25zLmhlYWRlclByZWZpeCArIHIuc2x1ZyhuKSArICciPicgKyBlICsgIjwvaCIgKyB0ICsgIj5cbiIgOiAiPGgiICsgdCArICI+IiArIGUgKyAiPC9oIiArIHQgKyAiPlxuIjsKICAgICAgICB9LCBuLmhyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy54aHRtbCA/ICI8aHIvPlxuIiA6ICI8aHI+XG4iOwogICAgICAgIH0sIG4ubGlzdCA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICB2YXIgciA9IHQgPyAib2wiIDogInVsIjsKICAgICAgICAgIHJldHVybiAiPCIgKyByICsgKHQgJiYgMSAhPT0gbiA/ICcgc3RhcnQ9IicgKyBuICsgJyInIDogIiIpICsgIj5cbiIgKyBlICsgIjwvIiArIHIgKyAiPlxuIjsKICAgICAgICB9LCBuLmxpc3RpdGVtID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiAiPGxpPiIgKyBlICsgIjwvbGk+XG4iOwogICAgICAgIH0sIG4uY2hlY2tib3ggPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuICI8aW5wdXQgIiArIChlID8gJ2NoZWNrZWQ9IiIgJyA6ICIiKSArICdkaXNhYmxlZD0iIiB0eXBlPSJjaGVja2JveCInICsgKHRoaXMub3B0aW9ucy54aHRtbCA/ICIgLyIgOiAiIikgKyAiPiAiOwogICAgICAgIH0sIG4ucGFyYWdyYXBoID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiAiPHA+IiArIGUgKyAiPC9wPlxuIjsKICAgICAgICB9LCBuLnRhYmxlID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHJldHVybiB0ICYmICh0ID0gIjx0Ym9keT4iICsgdCArICI8L3Rib2R5PiIpLCAiPHRhYmxlPlxuPHRoZWFkPlxuIiArIGUgKyAiPC90aGVhZD5cbiIgKyB0ICsgIjwvdGFibGU+XG4iOwogICAgICAgIH0sIG4udGFibGVyb3cgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuICI8dHI+XG4iICsgZSArICI8L3RyPlxuIjsKICAgICAgICB9LCBuLnRhYmxlY2VsbCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICB2YXIgbiA9IHQuaGVhZGVyID8gInRoIiA6ICJ0ZCI7CiAgICAgICAgICByZXR1cm4gKHQuYWxpZ24gPyAiPCIgKyBuICsgJyBhbGlnbj0iJyArIHQuYWxpZ24gKyAnIj4nIDogIjwiICsgbiArICI+IikgKyBlICsgIjwvIiArIG4gKyAiPlxuIjsKICAgICAgICB9LCBuLnN0cm9uZyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gIjxzdHJvbmc+IiArIGUgKyAiPC9zdHJvbmc+IjsKICAgICAgICB9LCBuLmVtID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiAiPGVtPiIgKyBlICsgIjwvZW0+IjsKICAgICAgICB9LCBuLmNvZGVzcGFuID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiAiPGNvZGU+IiArIGUgKyAiPC9jb2RlPiI7CiAgICAgICAgfSwgbi5iciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMueGh0bWwgPyAiPGJyLz4iIDogIjxicj4iOwogICAgICAgIH0sIG4uZGVsID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiAiPGRlbD4iICsgZSArICI8L2RlbD4iOwogICAgICAgIH0sIG4ubGluayA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICBpZiAobnVsbCA9PT0gKGUgPSBmKHRoaXMub3B0aW9ucy5zYW5pdGl6ZSwgdGhpcy5vcHRpb25zLmJhc2VVcmwsIGUpKSkgcmV0dXJuIG47CiAgICAgICAgICB2YXIgciA9ICc8YSBocmVmPSInICsgcyhlKSArICciJzsKICAgICAgICAgIHJldHVybiB0ICYmIChyICs9ICcgdGl0bGU9IicgKyB0ICsgJyInKSwgciArPSAiPiIgKyBuICsgIjwvYT4iOwogICAgICAgIH0sIG4uaW1hZ2UgPSBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgaWYgKG51bGwgPT09IChlID0gZih0aGlzLm9wdGlvbnMuc2FuaXRpemUsIHRoaXMub3B0aW9ucy5iYXNlVXJsLCBlKSkpIHJldHVybiBuOwogICAgICAgICAgdmFyIHIgPSAnPGltZyBzcmM9IicgKyBlICsgJyIgYWx0PSInICsgbiArICciJzsKICAgICAgICAgIHJldHVybiB0ICYmIChyICs9ICcgdGl0bGU9IicgKyB0ICsgJyInKSwgciArPSB0aGlzLm9wdGlvbnMueGh0bWwgPyAiLz4iIDogIj4iOwogICAgICAgIH0sIG4udGV4dCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9LCB0OwogICAgICB9KCksCiAgICAgICAgICBxID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIGUoKSB7fQoKICAgICAgICB2YXIgdCA9IGUucHJvdG90eXBlOwogICAgICAgIHJldHVybiB0LnN0cm9uZyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9LCB0LmVtID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH0sIHQuY29kZXNwYW4gPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfSwgdC5kZWwgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfSwgdC5odG1sID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH0sIHQudGV4dCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9LCB0LmxpbmsgPSBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgcmV0dXJuICIiICsgbjsKICAgICAgICB9LCB0LmltYWdlID0gZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICAgIHJldHVybiAiIiArIG47CiAgICAgICAgfSwgdC5iciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICB9LCBlOwogICAgICB9KCksCiAgICAgICAgICBXID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIGUoKSB7CiAgICAgICAgICB0aGlzLnNlZW4gPSB7fTsKICAgICAgICB9CgogICAgICAgIHZhciB0ID0gZS5wcm90b3R5cGU7CiAgICAgICAgcmV0dXJuIHQuc2VyaWFsaXplID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiBlLnRvTG93ZXJDYXNlKCkudHJpbSgpLnJlcGxhY2UoLzxbIVwvYS16XS4qPz4vZ2ksICIiKS5yZXBsYWNlKC9bXHUyMDAwLVx1MjA2Rlx1MkUwMC1cdTJFN0ZcXCchIiMkJSYoKSorLC4vOjs8PT4/QFtcXV5ge3x9fl0vZywgIiIpLnJlcGxhY2UoL1xzL2csICItIik7CiAgICAgICAgfSwgdC5nZXROZXh0U2FmZVNsdWcgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgdmFyIG4gPSBlLAogICAgICAgICAgICAgIHIgPSAwOwoKICAgICAgICAgIGlmICh0aGlzLnNlZW4uaGFzT3duUHJvcGVydHkobikpIHsKICAgICAgICAgICAgciA9IHRoaXMuc2VlbltlXTsKCiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICByKyssIG4gPSBlICsgIi0iICsgcjsKICAgICAgICAgICAgfSB3aGlsZSAodGhpcy5zZWVuLmhhc093blByb3BlcnR5KG4pKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gdCB8fCAodGhpcy5zZWVuW2VdID0gciwgdGhpcy5zZWVuW25dID0gMCksIG47CiAgICAgICAgfSwgdC5zbHVnID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHZvaWQgMCA9PT0gdCAmJiAodCA9IHt9KTsKICAgICAgICAgIHZhciBuID0gdGhpcy5zZXJpYWxpemUoZSk7CiAgICAgICAgICByZXR1cm4gdGhpcy5nZXROZXh0U2FmZVNsdWcobiwgdC5kcnlydW4pOwogICAgICAgIH0sIGU7CiAgICAgIH0oKSwKICAgICAgICAgIFYgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gdCh0KSB7CiAgICAgICAgICB0aGlzLm9wdGlvbnMgPSB0IHx8IGUuZGVmYXVsdHMsIHRoaXMub3B0aW9ucy5yZW5kZXJlciA9IHRoaXMub3B0aW9ucy5yZW5kZXJlciB8fCBuZXcgUSgpLCB0aGlzLnJlbmRlcmVyID0gdGhpcy5vcHRpb25zLnJlbmRlcmVyLCB0aGlzLnJlbmRlcmVyLm9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsIHRoaXMudGV4dFJlbmRlcmVyID0gbmV3IHEoKSwgdGhpcy5zbHVnZ2VyID0gbmV3IFcoKTsKICAgICAgICB9CgogICAgICAgIHQucGFyc2UgPSBmdW5jdGlvbiAoZSwgbikgewogICAgICAgICAgcmV0dXJuIG5ldyB0KG4pLnBhcnNlKGUpOwogICAgICAgIH0sIHQucGFyc2VJbmxpbmUgPSBmdW5jdGlvbiAoZSwgbikgewogICAgICAgICAgcmV0dXJuIG5ldyB0KG4pLnBhcnNlSW5saW5lKGUpOwogICAgICAgIH07CiAgICAgICAgdmFyIG4gPSB0LnByb3RvdHlwZTsKICAgICAgICByZXR1cm4gbi5wYXJzZSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSAhMCk7CiAgICAgICAgICB2YXIgbiwKICAgICAgICAgICAgICByLAogICAgICAgICAgICAgIGksCiAgICAgICAgICAgICAgbywKICAgICAgICAgICAgICBhLAogICAgICAgICAgICAgIHUsCiAgICAgICAgICAgICAgcywKICAgICAgICAgICAgICBjLAogICAgICAgICAgICAgIGYsCiAgICAgICAgICAgICAgcCwKICAgICAgICAgICAgICBkLAogICAgICAgICAgICAgIGgsCiAgICAgICAgICAgICAgdiwKICAgICAgICAgICAgICBnLAogICAgICAgICAgICAgIG0sCiAgICAgICAgICAgICAgeSwKICAgICAgICAgICAgICBiLAogICAgICAgICAgICAgIEQsCiAgICAgICAgICAgICAgeCwKICAgICAgICAgICAgICB3ID0gIiIsCiAgICAgICAgICAgICAgQSA9IGUubGVuZ3RoOwoKICAgICAgICAgIGZvciAobiA9IDA7IG4gPCBBOyBuKyspIGlmIChwID0gZVtuXSwgISh0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucyAmJiB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5yZW5kZXJlcnMgJiYgdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMucmVuZGVyZXJzW3AudHlwZV0pIHx8ICExID09PSAoeCA9IHRoaXMub3B0aW9ucy5leHRlbnNpb25zLnJlbmRlcmVyc1twLnR5cGVdLmNhbGwoewogICAgICAgICAgICBwYXJzZXI6IHRoaXMKICAgICAgICAgIH0sIHApKSAmJiBbInNwYWNlIiwgImhyIiwgImhlYWRpbmciLCAiY29kZSIsICJ0YWJsZSIsICJibG9ja3F1b3RlIiwgImxpc3QiLCAiaHRtbCIsICJwYXJhZ3JhcGgiLCAidGV4dCJdLmluY2x1ZGVzKHAudHlwZSkpIHN3aXRjaCAocC50eXBlKSB7CiAgICAgICAgICAgIGNhc2UgInNwYWNlIjoKICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgIGNhc2UgImhyIjoKICAgICAgICAgICAgICB3ICs9IHRoaXMucmVuZGVyZXIuaHIoKTsKICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgIGNhc2UgImhlYWRpbmciOgogICAgICAgICAgICAgIHcgKz0gdGhpcy5yZW5kZXJlci5oZWFkaW5nKHRoaXMucGFyc2VJbmxpbmUocC50b2tlbnMpLCBwLmRlcHRoLCBsKHRoaXMucGFyc2VJbmxpbmUocC50b2tlbnMsIHRoaXMudGV4dFJlbmRlcmVyKSksIHRoaXMuc2x1Z2dlcik7CiAgICAgICAgICAgICAgY29udGludWU7CgogICAgICAgICAgICBjYXNlICJjb2RlIjoKICAgICAgICAgICAgICB3ICs9IHRoaXMucmVuZGVyZXIuY29kZShwLnRleHQsIHAubGFuZywgcC5lc2NhcGVkKTsKICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgIGNhc2UgInRhYmxlIjoKICAgICAgICAgICAgICBmb3IgKGMgPSAiIiwgcyA9ICIiLCBvID0gcC5oZWFkZXIubGVuZ3RoLCByID0gMDsgciA8IG87IHIrKykgcyArPSB0aGlzLnJlbmRlcmVyLnRhYmxlY2VsbCh0aGlzLnBhcnNlSW5saW5lKHAuaGVhZGVyW3JdLnRva2VucyksIHsKICAgICAgICAgICAgICAgIGhlYWRlcjogITAsCiAgICAgICAgICAgICAgICBhbGlnbjogcC5hbGlnbltyXQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBmb3IgKGMgKz0gdGhpcy5yZW5kZXJlci50YWJsZXJvdyhzKSwgZiA9ICIiLCBvID0gcC5yb3dzLmxlbmd0aCwgciA9IDA7IHIgPCBvOyByKyspIHsKICAgICAgICAgICAgICAgIGZvciAodSA9IHAucm93c1tyXSwgcyA9ICIiLCBhID0gdS5sZW5ndGgsIGkgPSAwOyBpIDwgYTsgaSsrKSBzICs9IHRoaXMucmVuZGVyZXIudGFibGVjZWxsKHRoaXMucGFyc2VJbmxpbmUodVtpXS50b2tlbnMpLCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcjogITEsCiAgICAgICAgICAgICAgICAgIGFsaWduOiBwLmFsaWduW2ldCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBmICs9IHRoaXMucmVuZGVyZXIudGFibGVyb3cocyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB3ICs9IHRoaXMucmVuZGVyZXIudGFibGUoYywgZik7CiAgICAgICAgICAgICAgY29udGludWU7CgogICAgICAgICAgICBjYXNlICJibG9ja3F1b3RlIjoKICAgICAgICAgICAgICBmID0gdGhpcy5wYXJzZShwLnRva2VucyksIHcgKz0gdGhpcy5yZW5kZXJlci5ibG9ja3F1b3RlKGYpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICAgICAgY2FzZSAibGlzdCI6CiAgICAgICAgICAgICAgZm9yIChkID0gcC5vcmRlcmVkLCBoID0gcC5zdGFydCwgdiA9IHAubG9vc2UsIG8gPSBwLml0ZW1zLmxlbmd0aCwgZiA9ICIiLCByID0gMDsgciA8IG87IHIrKykgbSA9IHAuaXRlbXNbcl0sIHkgPSBtLmNoZWNrZWQsIGIgPSBtLnRhc2ssIGcgPSAiIiwgbS50YXNrICYmIChEID0gdGhpcy5yZW5kZXJlci5jaGVja2JveCh5KSwgdiA/IG0udG9rZW5zLmxlbmd0aCA+IDAgJiYgInBhcmFncmFwaCIgPT09IG0udG9rZW5zWzBdLnR5cGUgPyAobS50b2tlbnNbMF0udGV4dCA9IEQgKyAiICIgKyBtLnRva2Vuc1swXS50ZXh0LCBtLnRva2Vuc1swXS50b2tlbnMgJiYgbS50b2tlbnNbMF0udG9rZW5zLmxlbmd0aCA+IDAgJiYgInRleHQiID09PSBtLnRva2Vuc1swXS50b2tlbnNbMF0udHlwZSAmJiAobS50b2tlbnNbMF0udG9rZW5zWzBdLnRleHQgPSBEICsgIiAiICsgbS50b2tlbnNbMF0udG9rZW5zWzBdLnRleHQpKSA6IG0udG9rZW5zLnVuc2hpZnQoewogICAgICAgICAgICAgICAgdHlwZTogInRleHQiLAogICAgICAgICAgICAgICAgdGV4dDogRAogICAgICAgICAgICAgIH0pIDogZyArPSBEKSwgZyArPSB0aGlzLnBhcnNlKG0udG9rZW5zLCB2KSwgZiArPSB0aGlzLnJlbmRlcmVyLmxpc3RpdGVtKGcsIGIsIHkpOwoKICAgICAgICAgICAgICB3ICs9IHRoaXMucmVuZGVyZXIubGlzdChmLCBkLCBoKTsKICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgIGNhc2UgImh0bWwiOgogICAgICAgICAgICAgIHcgKz0gdGhpcy5yZW5kZXJlci5odG1sKHAudGV4dCk7CiAgICAgICAgICAgICAgY29udGludWU7CgogICAgICAgICAgICBjYXNlICJwYXJhZ3JhcGgiOgogICAgICAgICAgICAgIHcgKz0gdGhpcy5yZW5kZXJlci5wYXJhZ3JhcGgodGhpcy5wYXJzZUlubGluZShwLnRva2VucykpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICAgICAgY2FzZSAidGV4dCI6CiAgICAgICAgICAgICAgZm9yIChmID0gcC50b2tlbnMgPyB0aGlzLnBhcnNlSW5saW5lKHAudG9rZW5zKSA6IHAudGV4dDsgbiArIDEgPCBBICYmICJ0ZXh0IiA9PT0gZVtuICsgMV0udHlwZTspIHAgPSBlWysrbl0sIGYgKz0gIlxuIiArIChwLnRva2VucyA/IHRoaXMucGFyc2VJbmxpbmUocC50b2tlbnMpIDogcC50ZXh0KTsKCiAgICAgICAgICAgICAgdyArPSB0ID8gdGhpcy5yZW5kZXJlci5wYXJhZ3JhcGgoZikgOiBmOwogICAgICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICB2YXIgayA9ICdUb2tlbiB3aXRoICInICsgcC50eXBlICsgJyIgdHlwZSB3YXMgbm90IGZvdW5kLic7CiAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaWxlbnQpIHJldHVybjsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3Ioayk7CiAgICAgICAgICB9IGVsc2UgdyArPSB4IHx8ICIiOwoKICAgICAgICAgIHJldHVybiB3OwogICAgICAgIH0sIG4ucGFyc2VJbmxpbmUgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgdCA9IHQgfHwgdGhpcy5yZW5kZXJlcjsKICAgICAgICAgIHZhciBuLAogICAgICAgICAgICAgIHIsCiAgICAgICAgICAgICAgaSwKICAgICAgICAgICAgICBvID0gIiIsCiAgICAgICAgICAgICAgYSA9IGUubGVuZ3RoOwoKICAgICAgICAgIGZvciAobiA9IDA7IG4gPCBhOyBuKyspIGlmIChyID0gZVtuXSwgISh0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucyAmJiB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5yZW5kZXJlcnMgJiYgdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMucmVuZGVyZXJzW3IudHlwZV0pIHx8ICExID09PSAoaSA9IHRoaXMub3B0aW9ucy5leHRlbnNpb25zLnJlbmRlcmVyc1tyLnR5cGVdLmNhbGwoewogICAgICAgICAgICBwYXJzZXI6IHRoaXMKICAgICAgICAgIH0sIHIpKSAmJiBbImVzY2FwZSIsICJodG1sIiwgImxpbmsiLCAiaW1hZ2UiLCAic3Ryb25nIiwgImVtIiwgImNvZGVzcGFuIiwgImJyIiwgImRlbCIsICJ0ZXh0Il0uaW5jbHVkZXMoci50eXBlKSkgc3dpdGNoIChyLnR5cGUpIHsKICAgICAgICAgICAgY2FzZSAiZXNjYXBlIjoKICAgICAgICAgICAgICBvICs9IHQudGV4dChyLnRleHQpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAiaHRtbCI6CiAgICAgICAgICAgICAgbyArPSB0Lmh0bWwoci50ZXh0KTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgImxpbmsiOgogICAgICAgICAgICAgIG8gKz0gdC5saW5rKHIuaHJlZiwgci50aXRsZSwgdGhpcy5wYXJzZUlubGluZShyLnRva2VucywgdCkpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAiaW1hZ2UiOgogICAgICAgICAgICAgIG8gKz0gdC5pbWFnZShyLmhyZWYsIHIudGl0bGUsIHIudGV4dCk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICJzdHJvbmciOgogICAgICAgICAgICAgIG8gKz0gdC5zdHJvbmcodGhpcy5wYXJzZUlubGluZShyLnRva2VucywgdCkpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAiZW0iOgogICAgICAgICAgICAgIG8gKz0gdC5lbSh0aGlzLnBhcnNlSW5saW5lKHIudG9rZW5zLCB0KSk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICJjb2Rlc3BhbiI6CiAgICAgICAgICAgICAgbyArPSB0LmNvZGVzcGFuKHIudGV4dCk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICJiciI6CiAgICAgICAgICAgICAgbyArPSB0LmJyKCk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICJkZWwiOgogICAgICAgICAgICAgIG8gKz0gdC5kZWwodGhpcy5wYXJzZUlubGluZShyLnRva2VucywgdCkpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAidGV4dCI6CiAgICAgICAgICAgICAgbyArPSB0LnRleHQoci50ZXh0KTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgdmFyIHUgPSAnVG9rZW4gd2l0aCAiJyArIHIudHlwZSArICciIHR5cGUgd2FzIG5vdCBmb3VuZC4nOwogICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2lsZW50KSByZXR1cm47CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHUpOwogICAgICAgICAgfSBlbHNlIG8gKz0gaSB8fCAiIjsKCiAgICAgICAgICByZXR1cm4gbzsKICAgICAgICB9LCB0OwogICAgICB9KCk7CgogICAgICBBLm9wdGlvbnMgPSBBLnNldE9wdGlvbnMgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBkKEEuZGVmYXVsdHMsIGUpLCB1KEEuZGVmYXVsdHMpLCBBOwogICAgICB9LCBBLmdldERlZmF1bHRzID0gYSwgQS5kZWZhdWx0cyA9IGUuZGVmYXVsdHMsIEEudXNlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZvciAodmFyIGUgPSBhcmd1bWVudHMubGVuZ3RoLCB0ID0gbmV3IEFycmF5KGUpLCBuID0gMDsgbiA8IGU7IG4rKykgdFtuXSA9IGFyZ3VtZW50c1tuXTsKCiAgICAgICAgdmFyIHIsCiAgICAgICAgICAgIGkgPSBkLmFwcGx5KHZvaWQgMCwgW3t9XS5jb25jYXQodCkpLAogICAgICAgICAgICBvID0gQS5kZWZhdWx0cy5leHRlbnNpb25zIHx8IHsKICAgICAgICAgIHJlbmRlcmVyczoge30sCiAgICAgICAgICBjaGlsZFRva2Vuczoge30KICAgICAgICB9OwogICAgICAgIHQuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKGUuZXh0ZW5zaW9ucyAmJiAociA9ICEwLCBlLmV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAoIWUubmFtZSkgdGhyb3cgbmV3IEVycm9yKCJleHRlbnNpb24gbmFtZSByZXF1aXJlZCIpOwoKICAgICAgICAgICAgaWYgKGUucmVuZGVyZXIpIHsKICAgICAgICAgICAgICB2YXIgdCA9IG8ucmVuZGVyZXJzID8gby5yZW5kZXJlcnNbZS5uYW1lXSA6IG51bGw7CiAgICAgICAgICAgICAgby5yZW5kZXJlcnNbZS5uYW1lXSA9IHQgPyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IG5ldyBBcnJheShuKSwgaSA9IDA7IGkgPCBuOyBpKyspIHJbaV0gPSBhcmd1bWVudHNbaV07CgogICAgICAgICAgICAgICAgdmFyIG8gPSBlLnJlbmRlcmVyLmFwcGx5KHRoaXMsIHIpOwogICAgICAgICAgICAgICAgcmV0dXJuICExID09PSBvICYmIChvID0gdC5hcHBseSh0aGlzLCByKSksIG87CiAgICAgICAgICAgICAgfSA6IGUucmVuZGVyZXI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChlLnRva2VuaXplcikgewogICAgICAgICAgICAgIGlmICghZS5sZXZlbCB8fCAiYmxvY2siICE9PSBlLmxldmVsICYmICJpbmxpbmUiICE9PSBlLmxldmVsKSB0aHJvdyBuZXcgRXJyb3IoImV4dGVuc2lvbiBsZXZlbCBtdXN0IGJlICdibG9jaycgb3IgJ2lubGluZSciKTsKICAgICAgICAgICAgICBvW2UubGV2ZWxdID8gb1tlLmxldmVsXS51bnNoaWZ0KGUudG9rZW5pemVyKSA6IG9bZS5sZXZlbF0gPSBbZS50b2tlbml6ZXJdLCBlLnN0YXJ0ICYmICgiYmxvY2siID09PSBlLmxldmVsID8gby5zdGFydEJsb2NrID8gby5zdGFydEJsb2NrLnB1c2goZS5zdGFydCkgOiBvLnN0YXJ0QmxvY2sgPSBbZS5zdGFydF0gOiAiaW5saW5lIiA9PT0gZS5sZXZlbCAmJiAoby5zdGFydElubGluZSA/IG8uc3RhcnRJbmxpbmUucHVzaChlLnN0YXJ0KSA6IG8uc3RhcnRJbmxpbmUgPSBbZS5zdGFydF0pKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZS5jaGlsZFRva2VucyAmJiAoby5jaGlsZFRva2Vuc1tlLm5hbWVdID0gZS5jaGlsZFRva2Vucyk7CiAgICAgICAgICB9KSksIGUucmVuZGVyZXIgJiYgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdCA9IEEuZGVmYXVsdHMucmVuZGVyZXIgfHwgbmV3IFEoKTsKCiAgICAgICAgICAgIGZvciAodmFyIG4gaW4gZS5yZW5kZXJlcikgIWZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgdmFyIHIgPSB0W25dOwoKICAgICAgICAgICAgICB0W25dID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGgsIG8gPSBuZXcgQXJyYXkoaSksIGEgPSAwOyBhIDwgaTsgYSsrKSBvW2FdID0gYXJndW1lbnRzW2FdOwoKICAgICAgICAgICAgICAgIHZhciB1ID0gZS5yZW5kZXJlcltuXS5hcHBseSh0LCBvKTsKICAgICAgICAgICAgICAgIHJldHVybiAhMSA9PT0gdSAmJiAodSA9IHIuYXBwbHkodCwgbykpLCB1OwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0obik7CgogICAgICAgICAgICBpLnJlbmRlcmVyID0gdDsKICAgICAgICAgIH0oKSwgZS50b2tlbml6ZXIgJiYgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdCA9IEEuZGVmYXVsdHMudG9rZW5pemVyIHx8IG5ldyBNKCk7CgogICAgICAgICAgICBmb3IgKHZhciBuIGluIGUudG9rZW5pemVyKSAhZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICB2YXIgciA9IHRbbl07CgogICAgICAgICAgICAgIHRbbl0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gYXJndW1lbnRzLmxlbmd0aCwgbyA9IG5ldyBBcnJheShpKSwgYSA9IDA7IGEgPCBpOyBhKyspIG9bYV0gPSBhcmd1bWVudHNbYV07CgogICAgICAgICAgICAgICAgdmFyIHUgPSBlLnRva2VuaXplcltuXS5hcHBseSh0LCBvKTsKICAgICAgICAgICAgICAgIHJldHVybiAhMSA9PT0gdSAmJiAodSA9IHIuYXBwbHkodCwgbykpLCB1OwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0obik7CgogICAgICAgICAgICBpLnRva2VuaXplciA9IHQ7CiAgICAgICAgICB9KCksIGUud2Fsa1Rva2VucykgewogICAgICAgICAgICB2YXIgdCA9IEEuZGVmYXVsdHMud2Fsa1Rva2VuczsKCiAgICAgICAgICAgIGkud2Fsa1Rva2VucyA9IGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgZS53YWxrVG9rZW5zLmNhbGwodGhpcywgbiksIHQgJiYgdC5jYWxsKHRoaXMsIG4pOwogICAgICAgICAgICB9OwogICAgICAgICAgfQoKICAgICAgICAgIHIgJiYgKGkuZXh0ZW5zaW9ucyA9IG8pLCBBLnNldE9wdGlvbnMoaSk7CiAgICAgICAgfSk7CiAgICAgIH0sIEEud2Fsa1Rva2VucyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgZm9yICh2YXIgbiwgciA9IG8oZSk7ICEobiA9IHIoKSkuZG9uZTspICFmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgZSA9IG4udmFsdWU7CgogICAgICAgICAgc3dpdGNoICh0LmNhbGwoQSwgZSksIGUudHlwZSkgewogICAgICAgICAgICBjYXNlICJ0YWJsZSI6CiAgICAgICAgICAgICAgZm9yICh2YXIgciwgaSA9IG8oZS5oZWFkZXIpOyAhKHIgPSBpKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICB2YXIgYSA9IHIudmFsdWU7CiAgICAgICAgICAgICAgICBBLndhbGtUb2tlbnMoYS50b2tlbnMsIHQpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm9yICh2YXIgdSwgcyA9IG8oZS5yb3dzKTsgISh1ID0gcygpKS5kb25lOykgZm9yICh2YXIgbCwgYyA9IHUudmFsdWUsIGYgPSBvKGMpOyAhKGwgPSBmKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICB2YXIgcCA9IGwudmFsdWU7CiAgICAgICAgICAgICAgICBBLndhbGtUb2tlbnMocC50b2tlbnMsIHQpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICJsaXN0IjoKICAgICAgICAgICAgICBBLndhbGtUb2tlbnMoZS5pdGVtcywgdCk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIEEuZGVmYXVsdHMuZXh0ZW5zaW9ucyAmJiBBLmRlZmF1bHRzLmV4dGVuc2lvbnMuY2hpbGRUb2tlbnMgJiYgQS5kZWZhdWx0cy5leHRlbnNpb25zLmNoaWxkVG9rZW5zW2UudHlwZV0gPyBBLmRlZmF1bHRzLmV4dGVuc2lvbnMuY2hpbGRUb2tlbnNbZS50eXBlXS5mb3JFYWNoKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgICBBLndhbGtUb2tlbnMoZVtuXSwgdCk7CiAgICAgICAgICAgICAgfSkgOiBlLnRva2VucyAmJiBBLndhbGtUb2tlbnMoZS50b2tlbnMsIHQpOwogICAgICAgICAgfQogICAgICAgIH0oKTsKICAgICAgfSwgQS5wYXJzZUlubGluZSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSB8fCBudWxsID09PSBlKSB0aHJvdyBuZXcgRXJyb3IoIm1hcmtlZC5wYXJzZUlubGluZSgpOiBpbnB1dCBwYXJhbWV0ZXIgaXMgdW5kZWZpbmVkIG9yIG51bGwiKTsKICAgICAgICBpZiAoInN0cmluZyIgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBFcnJvcigibWFya2VkLnBhcnNlSW5saW5lKCk6IGlucHV0IHBhcmFtZXRlciBpcyBvZiB0eXBlICIgKyBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkgKyAiLCBzdHJpbmcgZXhwZWN0ZWQiKTsKICAgICAgICB0ID0gZCh7fSwgQS5kZWZhdWx0cywgdCB8fCB7fSksIG0odCk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgbiA9IFUubGV4SW5saW5lKGUsIHQpOwogICAgICAgICAgcmV0dXJuIHQud2Fsa1Rva2VucyAmJiBBLndhbGtUb2tlbnMobiwgdC53YWxrVG9rZW5zKSwgVi5wYXJzZUlubGluZShuLCB0KTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBpZiAoZS5tZXNzYWdlICs9ICJcblBsZWFzZSByZXBvcnQgdGhpcyB0byBodHRwczovL2dpdGh1Yi5jb20vbWFya2VkanMvbWFya2VkLiIsIHQuc2lsZW50KSByZXR1cm4gIjxwPkFuIGVycm9yIG9jY3VycmVkOjwvcD48cHJlPiIgKyBzKGUubWVzc2FnZSArICIiLCAhMCkgKyAiPC9wcmU+IjsKICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgICB9LCBBLlBhcnNlciA9IFYsIEEucGFyc2VyID0gVi5wYXJzZSwgQS5SZW5kZXJlciA9IFEsIEEuVGV4dFJlbmRlcmVyID0gcSwgQS5MZXhlciA9IFUsIEEubGV4ZXIgPSBVLmxleCwgQS5Ub2tlbml6ZXIgPSBNLCBBLlNsdWdnZXIgPSBXLCBBLnBhcnNlID0gQTsKICAgICAgdmFyIEggPSBBLm9wdGlvbnMsCiAgICAgICAgICBLID0gQS5zZXRPcHRpb25zLAogICAgICAgICAgWiA9IEEudXNlLAogICAgICAgICAgRyA9IEEud2Fsa1Rva2VucywKICAgICAgICAgIEogPSBBLnBhcnNlSW5saW5lLAogICAgICAgICAgWCA9IEEsCiAgICAgICAgICBZID0gVi5wYXJzZSwKICAgICAgICAgIGVlID0gVS5sZXg7CiAgICAgIGUuTGV4ZXIgPSBVLCBlLlBhcnNlciA9IFYsIGUuUmVuZGVyZXIgPSBRLCBlLlNsdWdnZXIgPSBXLCBlLlRleHRSZW5kZXJlciA9IHEsIGUuVG9rZW5pemVyID0gTSwgZS5nZXREZWZhdWx0cyA9IGEsIGUubGV4ZXIgPSBlZSwgZS5tYXJrZWQgPSBBLCBlLm9wdGlvbnMgPSBILCBlLnBhcnNlID0gWCwgZS5wYXJzZUlubGluZSA9IEosIGUucGFyc2VyID0gWSwgZS5zZXRPcHRpb25zID0gSywgZS51c2UgPSBaLCBlLndhbGtUb2tlbnMgPSBHLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6ICEwCiAgICAgIH0pOwogICAgfSk7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICBmdW5jdGlvbiByKGUpIHsKICAgICAgdmFyIHQgPSB7fTsKICAgICAgcmV0dXJuIGMoZihlKSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgbiA9IGVbMF0sCiAgICAgICAgICAgIHIgPSBlWzFdOwogICAgICAgIGMociwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHRbZV0gPSBuOwogICAgICAgIH0pOwogICAgICB9KSwgdDsKICAgIH0KCiAgICBmdW5jdGlvbiBpKGUsIHQpIHsKICAgICAgdmFyIG4gPSByKGUucGx1cmFsVHlwZVRvTGFuZ3VhZ2VzKTsKICAgICAgcmV0dXJuIG5bdF0gfHwgblttLmNhbGwodCwgLy0vLCAxKVswXV0gfHwgbi5lbjsKICAgIH0KCiAgICBmdW5jdGlvbiBvKGUsIHQsIG4pIHsKICAgICAgcmV0dXJuIGUucGx1cmFsVHlwZXNbdF0obik7CiAgICB9CgogICAgZnVuY3Rpb24gYShlKSB7CiAgICAgIHJldHVybiBlLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXVxcXS9nLCAiXFwkJiIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHUoZSkgewogICAgICB2YXIgdCA9IGUgJiYgZS5wcmVmaXggfHwgIiV7IiwKICAgICAgICAgIG4gPSBlICYmIGUuc3VmZml4IHx8ICJ9IjsKICAgICAgaWYgKHQgPT09IHkgfHwgbiA9PT0geSkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyInICsgeSArICciIHRva2VuIGlzIHJlc2VydmVkIGZvciBwbHVyYWxpemF0aW9uJyk7CiAgICAgIHJldHVybiBuZXcgUmVnRXhwKGEodCkgKyAiKC4qPykiICsgYShuKSwgImciKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzKGUsIHQsIG4sIHIsIGkpIHsKICAgICAgaWYgKCJzdHJpbmciICE9IHR5cGVvZiBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJQb2x5Z2xvdC50cmFuc2Zvcm1QaHJhc2UgZXhwZWN0cyBhcmd1bWVudCAjMSB0byBiZSBzdHJpbmciKTsKICAgICAgaWYgKG51bGwgPT0gdCkgcmV0dXJuIGU7CiAgICAgIHZhciBhID0gZSwKICAgICAgICAgIHUgPSByIHx8IHcsCiAgICAgICAgICBzID0gIm51bWJlciIgPT0gdHlwZW9mIHQgPyB7CiAgICAgICAgc21hcnRfY291bnQ6IHQKICAgICAgfSA6IHQ7CgogICAgICBpZiAobnVsbCAhPSBzLnNtYXJ0X2NvdW50ICYmIGUpIHsKICAgICAgICB2YXIgbCA9IGkgfHwgRCwKICAgICAgICAgICAgYyA9IG0uY2FsbChlLCB5KSwKICAgICAgICAgICAgZiA9IG4gfHwgImVuIiwKICAgICAgICAgICAgcCA9IHgobCwgZiksCiAgICAgICAgICAgIHYgPSBvKGwsIHAsIHMuc21hcnRfY291bnQpOwogICAgICAgIGEgPSBoKGNbdl0gfHwgY1swXSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBhID0gZy5jYWxsKGEsIHUsIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgcmV0dXJuIGQocywgdCkgJiYgbnVsbCAhPSBzW3RdID8gc1t0XSA6IGU7CiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGwoZSkgewogICAgICB2YXIgdCA9IGUgfHwge307CiAgICAgIHRoaXMucGhyYXNlcyA9IHt9LCB0aGlzLmV4dGVuZCh0LnBocmFzZXMgfHwge30pLCB0aGlzLmN1cnJlbnRMb2NhbGUgPSB0LmxvY2FsZSB8fCAiZW4iOwogICAgICB2YXIgbiA9IHQuYWxsb3dNaXNzaW5nID8gcyA6IG51bGw7CiAgICAgIHRoaXMub25NaXNzaW5nS2V5ID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgdC5vbk1pc3NpbmdLZXkgPyB0Lm9uTWlzc2luZ0tleSA6IG4sIHRoaXMud2FybiA9IHQud2FybiB8fCB2LCB0aGlzLnRva2VuUmVnZXggPSB1KHQuaW50ZXJwb2xhdGlvbiksIHRoaXMucGx1cmFsUnVsZXMgPSB0LnBsdXJhbFJ1bGVzIHx8IEQ7CiAgICB9CgogICAgdmFyIGMgPSBuKDQzKSwKICAgICAgICBmID0gbig4OSksCiAgICAgICAgcCA9IG4oOTQpLAogICAgICAgIGQgPSBuKDI1KSwKICAgICAgICBoID0gbig5MiksCiAgICAgICAgdiA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHAoITEsIGUpOwogICAgfSwKICAgICAgICBnID0gU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlLAogICAgICAgIG0gPSBTdHJpbmcucHJvdG90eXBlLnNwbGl0LAogICAgICAgIHkgPSAifHx8fCIsCiAgICAgICAgYiA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gZSAlIDEwMCwKICAgICAgICAgIG4gPSB0ICUgMTA7CiAgICAgIHJldHVybiAxMSAhPT0gdCAmJiAxID09PSBuID8gMCA6IDIgPD0gbiAmJiBuIDw9IDQgJiYgISh0ID49IDEyICYmIHQgPD0gMTQpID8gMSA6IDI7CiAgICB9LAogICAgICAgIEQgPSB7CiAgICAgIHBsdXJhbFR5cGVzOiB7CiAgICAgICAgYXJhYmljOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKGUgPCAzKSByZXR1cm4gZTsKICAgICAgICAgIHZhciB0ID0gZSAlIDEwMDsKICAgICAgICAgIHJldHVybiB0ID49IDMgJiYgdCA8PSAxMCA/IDMgOiB0ID49IDExID8gNCA6IDU7CiAgICAgICAgfSwKICAgICAgICBib3NuaWFuX3NlcmJpYW46IGIsCiAgICAgICAgY2hpbmVzZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfSwKICAgICAgICBjcm9hdGlhbjogYiwKICAgICAgICBmcmVuY2g6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gZSA+PSAyID8gMSA6IDA7CiAgICAgICAgfSwKICAgICAgICBnZXJtYW46IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gMSAhPT0gZSA/IDEgOiAwOwogICAgICAgIH0sCiAgICAgICAgcnVzc2lhbjogYiwKICAgICAgICBsaXRodWFuaWFuOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGUgJSAxMCA9PSAxICYmIGUgJSAxMDAgIT0gMTEgPyAwIDogZSAlIDEwID49IDIgJiYgZSAlIDEwIDw9IDkgJiYgKGUgJSAxMDAgPCAxMSB8fCBlICUgMTAwID4gMTkpID8gMSA6IDI7CiAgICAgICAgfSwKICAgICAgICBjemVjaDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiAxID09PSBlID8gMCA6IGUgPj0gMiAmJiBlIDw9IDQgPyAxIDogMjsKICAgICAgICB9LAogICAgICAgIHBvbGlzaDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGlmICgxID09PSBlKSByZXR1cm4gMDsKICAgICAgICAgIHZhciB0ID0gZSAlIDEwOwogICAgICAgICAgcmV0dXJuIDIgPD0gdCAmJiB0IDw9IDQgJiYgKGUgJSAxMDAgPCAxMCB8fCBlICUgMTAwID49IDIwKSA/IDEgOiAyOwogICAgICAgIH0sCiAgICAgICAgaWNlbGFuZGljOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGUgJSAxMCAhPSAxIHx8IGUgJSAxMDAgPT0gMTEgPyAxIDogMDsKICAgICAgICB9LAogICAgICAgIHNsb3ZlbmlhbjogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0ID0gZSAlIDEwMDsKICAgICAgICAgIHJldHVybiAxID09PSB0ID8gMCA6IDIgPT09IHQgPyAxIDogMyA9PT0gdCB8fCA0ID09PSB0ID8gMiA6IDM7CiAgICAgICAgfQogICAgICB9LAogICAgICBwbHVyYWxUeXBlVG9MYW5ndWFnZXM6IHsKICAgICAgICBhcmFiaWM6IFsiYXIiXSwKICAgICAgICBib3NuaWFuX3NlcmJpYW46IFsiYnMtTGF0bi1CQSIsICJicy1DeXJsLUJBIiwgInNybC1SUyIsICJzci1SUyJdLAogICAgICAgIGNoaW5lc2U6IFsiaWQiLCAiaWQtSUQiLCAiamEiLCAia28iLCAia28tS1IiLCAibG8iLCAibXMiLCAidGgiLCAidGgtVEgiLCAiemgiXSwKICAgICAgICBjcm9hdGlhbjogWyJociIsICJoci1IUiJdLAogICAgICAgIGdlcm1hbjogWyJmYSIsICJkYSIsICJkZSIsICJlbiIsICJlcyIsICJmaSIsICJlbCIsICJoZSIsICJoaS1JTiIsICJodSIsICJodS1IVSIsICJpdCIsICJubCIsICJubyIsICJwdCIsICJzdiIsICJ0ciJdLAogICAgICAgIGZyZW5jaDogWyJmciIsICJ0bCIsICJwdC1iciJdLAogICAgICAgIHJ1c3NpYW46IFsicnUiLCAicnUtUlUiXSwKICAgICAgICBsaXRodWFuaWFuOiBbImx0Il0sCiAgICAgICAgY3plY2g6IFsiY3MiLCAiY3MtQ1oiLCAic2siXSwKICAgICAgICBwb2xpc2g6IFsicGwiXSwKICAgICAgICBpY2VsYW5kaWM6IFsiaXMiXSwKICAgICAgICBzbG92ZW5pYW46IFsic2wtU0wiXQogICAgICB9CiAgICB9LAogICAgICAgIHggPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0ge307CiAgICAgIHJldHVybiBmdW5jdGlvbiAodCwgbikgewogICAgICAgIHZhciByID0gZVtuXTsKICAgICAgICByZXR1cm4gciAmJiAhdC5wbHVyYWxUeXBlc1tyXSAmJiAociA9IG51bGwsIGVbbl0gPSByKSwgciB8fCAociA9IGkodCwgbikpICYmIChlW25dID0gciksIHI7CiAgICAgIH07CiAgICB9KCksCiAgICAgICAgdyA9IC8lXHsoLio/KVx9L2c7CgogICAgbC5wcm90b3R5cGUubG9jYWxlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUgJiYgKHRoaXMuY3VycmVudExvY2FsZSA9IGUpLCB0aGlzLmN1cnJlbnRMb2NhbGU7CiAgICB9LCBsLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICBjKGYoZSB8fCB7fSksIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIG4gPSBlWzBdLAogICAgICAgICAgICByID0gZVsxXSwKICAgICAgICAgICAgaSA9IHQgPyB0ICsgIi4iICsgbiA6IG47CiAgICAgICAgIm9iamVjdCIgPT0gdHlwZW9mIHIgPyB0aGlzLmV4dGVuZChyLCBpKSA6IHRoaXMucGhyYXNlc1tpXSA9IHI7CiAgICAgIH0sIHRoaXMpOwogICAgfSwgbC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAic3RyaW5nIiA9PSB0eXBlb2YgZSA/IGRlbGV0ZSB0aGlzLnBocmFzZXNbZV0gOiBjKGYoZSB8fCB7fSksIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIG4gPSBlWzBdLAogICAgICAgICAgICByID0gZVsxXSwKICAgICAgICAgICAgaSA9IHQgPyB0ICsgIi4iICsgbiA6IG47CiAgICAgICAgIm9iamVjdCIgPT0gdHlwZW9mIHIgPyB0aGlzLnVuc2V0KHIsIGkpIDogZGVsZXRlIHRoaXMucGhyYXNlc1tpXTsKICAgICAgfSwgdGhpcyk7CiAgICB9LCBsLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5waHJhc2VzID0ge307CiAgICB9LCBsLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdGhpcy5jbGVhcigpLCB0aGlzLmV4dGVuZChlKTsKICAgIH0sIGwucHJvdG90eXBlLnQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgbiwKICAgICAgICAgIHIsCiAgICAgICAgICBpID0gbnVsbCA9PSB0ID8ge30gOiB0OwogICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIHRoaXMucGhyYXNlc1tlXSkgbiA9IHRoaXMucGhyYXNlc1tlXTtlbHNlIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgaS5fKSBuID0gaS5fO2Vsc2UgaWYgKHRoaXMub25NaXNzaW5nS2V5KSB7CiAgICAgICAgdmFyIG8gPSB0aGlzLm9uTWlzc2luZ0tleTsKICAgICAgICByID0gbyhlLCBpLCB0aGlzLmN1cnJlbnRMb2NhbGUsIHRoaXMudG9rZW5SZWdleCwgdGhpcy5wbHVyYWxSdWxlcyk7CiAgICAgIH0gZWxzZSB0aGlzLndhcm4oJ01pc3NpbmcgdHJhbnNsYXRpb24gZm9yIGtleTogIicgKyBlICsgJyInKSwgciA9IGU7CiAgICAgIHJldHVybiAic3RyaW5nIiA9PSB0eXBlb2YgbiAmJiAociA9IHMobiwgaSwgdGhpcy5jdXJyZW50TG9jYWxlLCB0aGlzLnRva2VuUmVnZXgsIHRoaXMucGx1cmFsUnVsZXMpKSwgcjsKICAgIH0sIGwucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBkKHRoaXMucGhyYXNlcywgZSk7CiAgICB9LCBsLnRyYW5zZm9ybVBocmFzZSA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgIHJldHVybiBzKGUsIHQsIG4pOwogICAgfSwgZS5leHBvcnRzID0gbDsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICBpZiAobnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUpIHRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5hc3NpZ24gY2Fubm90IGJlIGNhbGxlZCB3aXRoIG51bGwgb3IgdW5kZWZpbmVkIik7CiAgICAgIHJldHVybiBPYmplY3QoZSk7CiAgICB9CiAgICAvKgogICAgb2JqZWN0LWFzc2lnbgogICAgKGMpIFNpbmRyZSBTb3JodXMKICAgIEBsaWNlbnNlIE1JVAogICAgKi8KCgogICAgdmFyIGkgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLAogICAgICAgIG8gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LAogICAgICAgIGEgPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlOwogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKCkgewogICAgICB0cnkgewogICAgICAgIGlmICghT2JqZWN0LmFzc2lnbikgcmV0dXJuICExOwogICAgICAgIHZhciBlID0gbmV3IFN0cmluZygiYWJjIik7CiAgICAgICAgaWYgKGVbNV0gPSAiZGUiLCAiNSIgPT09IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpWzBdKSByZXR1cm4gITE7CgogICAgICAgIGZvciAodmFyIHQgPSB7fSwgbiA9IDA7IG4gPCAxMDsgbisrKSB0WyJfIiArIFN0cmluZy5mcm9tQ2hhckNvZGUobildID0gbjsKCiAgICAgICAgaWYgKCIwMTIzNDU2Nzg5IiAhPT0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModCkubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gdFtlXTsKICAgICAgICB9KS5qb2luKCIiKSkgcmV0dXJuICExOwogICAgICAgIHZhciByID0ge307CiAgICAgICAgcmV0dXJuICJhYmNkZWZnaGlqa2xtbm9wcXJzdCIuc3BsaXQoIiIpLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJbZV0gPSBlOwogICAgICAgIH0pLCAiYWJjZGVmZ2hpamtsbW5vcHFyc3QiID09PSBPYmplY3Qua2V5cyhPYmplY3QuYXNzaWduKHt9LCByKSkuam9pbigiIik7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gITE7CiAgICAgIH0KICAgIH0oKSA/IE9iamVjdC5hc3NpZ24gOiBmdW5jdGlvbiAoZSwgdCkgewogICAgICBmb3IgKHZhciBuLCB1LCBzID0gcihlKSwgbCA9IDE7IGwgPCBhcmd1bWVudHMubGVuZ3RoOyBsKyspIHsKICAgICAgICBuID0gT2JqZWN0KGFyZ3VtZW50c1tsXSk7CgogICAgICAgIGZvciAodmFyIGMgaW4gbikgby5jYWxsKG4sIGMpICYmIChzW2NdID0gbltjXSk7CgogICAgICAgIGlmIChpKSB7CiAgICAgICAgICB1ID0gaShuKTsKCiAgICAgICAgICBmb3IgKHZhciBmID0gMDsgZiA8IHUubGVuZ3RoOyBmKyspIGEuY2FsbChuLCB1W2ZdKSAmJiAoc1t1W2ZdXSA9IG5bdVtmXV0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHM7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICBmdW5jdGlvbiByKGUsIHQpIHsKICAgICAgaWYgKGUgPT09IDEgLyAwIHx8IGUgPT09IC0xIC8gMCB8fCBlICE9PSBlIHx8IGUgJiYgZSA+IC0xZTMgJiYgZSA8IDFlMyB8fCBuZS5jYWxsKC9lLywgdCkpIHJldHVybiB0OwogICAgICB2YXIgbiA9IC9bMC05XSg/PSg/OlswLTldezN9KSsoPyFbMC05XSkpL2c7CgogICAgICBpZiAoIm51bWJlciIgPT0gdHlwZW9mIGUpIHsKICAgICAgICB2YXIgciA9IGUgPCAwID8gLWFlKC1lKSA6IGFlKGUpOwoKICAgICAgICBpZiAociAhPT0gZSkgewogICAgICAgICAgdmFyIGkgPSBTdHJpbmcociksCiAgICAgICAgICAgICAgbyA9IFguY2FsbCh0LCBpLmxlbmd0aCArIDEpOwogICAgICAgICAgcmV0dXJuIFkuY2FsbChpLCBuLCAiJCZfIikgKyAiLiIgKyBZLmNhbGwoWS5jYWxsKG8sIC8oWzAtOV17M30pL2csICIkJl8iKSwgL18kLywgIiIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIFkuY2FsbCh0LCBuLCAiJCZfIik7CiAgICB9CgogICAgZnVuY3Rpb24gaShlLCB0LCBuKSB7CiAgICAgIHZhciByID0gImRvdWJsZSIgPT09IChuLnF1b3RlU3R5bGUgfHwgdCkgPyAnIicgOiAiJyI7CiAgICAgIHJldHVybiByICsgZSArIHI7CiAgICB9CgogICAgZnVuY3Rpb24gbyhlKSB7CiAgICAgIHJldHVybiBZLmNhbGwoU3RyaW5nKGUpLCAvIi9nLCAiJnF1b3Q7Iik7CiAgICB9CgogICAgZnVuY3Rpb24gYShlKSB7CiAgICAgIHJldHVybiAhKCJbb2JqZWN0IEFycmF5XSIgIT09IGcoZSkgfHwgZmUgJiYgIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgZmUgaW4gZSk7CiAgICB9CgogICAgZnVuY3Rpb24gdShlKSB7CiAgICAgIHJldHVybiAhKCJbb2JqZWN0IERhdGVdIiAhPT0gZyhlKSB8fCBmZSAmJiAib2JqZWN0IiA9PSB0eXBlb2YgZSAmJiBmZSBpbiBlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzKGUpIHsKICAgICAgcmV0dXJuICEoIltvYmplY3QgUmVnRXhwXSIgIT09IGcoZSkgfHwgZmUgJiYgIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgZmUgaW4gZSk7CiAgICB9CgogICAgZnVuY3Rpb24gbChlKSB7CiAgICAgIHJldHVybiAhKCJbb2JqZWN0IEVycm9yXSIgIT09IGcoZSkgfHwgZmUgJiYgIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgZmUgaW4gZSk7CiAgICB9CgogICAgZnVuY3Rpb24gYyhlKSB7CiAgICAgIHJldHVybiAhKCJbb2JqZWN0IFN0cmluZ10iICE9PSBnKGUpIHx8IGZlICYmICJvYmplY3QiID09IHR5cGVvZiBlICYmIGZlIGluIGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGYoZSkgewogICAgICByZXR1cm4gISgiW29iamVjdCBOdW1iZXJdIiAhPT0gZyhlKSB8fCBmZSAmJiAib2JqZWN0IiA9PSB0eXBlb2YgZSAmJiBmZSBpbiBlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwKGUpIHsKICAgICAgcmV0dXJuICEoIltvYmplY3QgQm9vbGVhbl0iICE9PSBnKGUpIHx8IGZlICYmICJvYmplY3QiID09IHR5cGVvZiBlICYmIGZlIGluIGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGQoZSkgewogICAgICBpZiAoY2UpIHJldHVybiBlICYmICJvYmplY3QiID09IHR5cGVvZiBlICYmIGUgaW5zdGFuY2VvZiBTeW1ib2w7CiAgICAgIGlmICgic3ltYm9sIiA9PSB0eXBlb2YgZSkgcmV0dXJuICEwOwogICAgICBpZiAoIWUgfHwgIm9iamVjdCIgIT0gdHlwZW9mIGUgfHwgIWxlKSByZXR1cm4gITE7CgogICAgICB0cnkgewogICAgICAgIHJldHVybiBsZS5jYWxsKGUpLCAhMDsKICAgICAgfSBjYXRjaCAoZSkge30KCiAgICAgIHJldHVybiAhMTsKICAgIH0KCiAgICBmdW5jdGlvbiBoKGUpIHsKICAgICAgaWYgKCFlIHx8ICJvYmplY3QiICE9IHR5cGVvZiBlIHx8ICF1ZSkgcmV0dXJuICExOwoKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gdWUuY2FsbChlKSwgITA7CiAgICAgIH0gY2F0Y2ggKGUpIHt9CgogICAgICByZXR1cm4gITE7CiAgICB9CgogICAgZnVuY3Rpb24gdihlLCB0KSB7CiAgICAgIHJldHVybiBnZS5jYWxsKGUsIHQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGcoZSkgewogICAgICByZXR1cm4gWi5jYWxsKGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIG0oZSkgewogICAgICBpZiAoZS5uYW1lKSByZXR1cm4gZS5uYW1lOwogICAgICB2YXIgdCA9IEouY2FsbChHLmNhbGwoZSksIC9eZnVuY3Rpb25ccyooW1x3JF0rKS8pOwogICAgICByZXR1cm4gdCA/IHRbMV0gOiBudWxsOwogICAgfQoKICAgIGZ1bmN0aW9uIHkoZSwgdCkgewogICAgICBpZiAoZS5pbmRleE9mKSByZXR1cm4gZS5pbmRleE9mKHQpOwoKICAgICAgZm9yICh2YXIgbiA9IDAsIHIgPSBlLmxlbmd0aDsgbiA8IHI7IG4rKykgaWYgKGVbbl0gPT09IHQpIHJldHVybiBuOwoKICAgICAgcmV0dXJuIC0xOwogICAgfQoKICAgIGZ1bmN0aW9uIGIoZSkgewogICAgICBpZiAoIXogfHwgIWUgfHwgIm9iamVjdCIgIT0gdHlwZW9mIGUpIHJldHVybiAhMTsKCiAgICAgIHRyeSB7CiAgICAgICAgei5jYWxsKGUpOwoKICAgICAgICB0cnkgewogICAgICAgICAgTC5jYWxsKGUpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgTWFwOwogICAgICB9IGNhdGNoIChlKSB7fQoKICAgICAgcmV0dXJuICExOwogICAgfQoKICAgIGZ1bmN0aW9uIEQoZSkgewogICAgICBpZiAoIVEgfHwgIWUgfHwgIm9iamVjdCIgIT0gdHlwZW9mIGUpIHJldHVybiAhMTsKCiAgICAgIHRyeSB7CiAgICAgICAgUS5jYWxsKGUsIFEpOwoKICAgICAgICB0cnkgewogICAgICAgICAgVy5jYWxsKGUsIFcpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgV2Vha01hcDsKICAgICAgfSBjYXRjaCAoZSkge30KCiAgICAgIHJldHVybiAhMTsKICAgIH0KCiAgICBmdW5jdGlvbiB4KGUpIHsKICAgICAgaWYgKCFIIHx8ICFlIHx8ICJvYmplY3QiICE9IHR5cGVvZiBlKSByZXR1cm4gITE7CgogICAgICB0cnkgewogICAgICAgIHJldHVybiBILmNhbGwoZSksICEwOwogICAgICB9IGNhdGNoIChlKSB7fQoKICAgICAgcmV0dXJuICExOwogICAgfQoKICAgIGZ1bmN0aW9uIHcoZSkgewogICAgICBpZiAoIUwgfHwgIWUgfHwgIm9iamVjdCIgIT0gdHlwZW9mIGUpIHJldHVybiAhMTsKCiAgICAgIHRyeSB7CiAgICAgICAgTC5jYWxsKGUpOwoKICAgICAgICB0cnkgewogICAgICAgICAgei5jYWxsKGUpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgU2V0OwogICAgICB9IGNhdGNoIChlKSB7fQoKICAgICAgcmV0dXJuICExOwogICAgfQoKICAgIGZ1bmN0aW9uIEEoZSkgewogICAgICBpZiAoIVcgfHwgIWUgfHwgIm9iamVjdCIgIT0gdHlwZW9mIGUpIHJldHVybiAhMTsKCiAgICAgIHRyeSB7CiAgICAgICAgVy5jYWxsKGUsIFcpOwoKICAgICAgICB0cnkgewogICAgICAgICAgUS5jYWxsKGUsIFEpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgV2Vha1NldDsKICAgICAgfSBjYXRjaCAoZSkge30KCiAgICAgIHJldHVybiAhMTsKICAgIH0KCiAgICBmdW5jdGlvbiBrKGUpIHsKICAgICAgcmV0dXJuICEoIWUgfHwgIm9iamVjdCIgIT0gdHlwZW9mIGUpICYmICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgSFRNTEVsZW1lbnQgJiYgZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IHx8ICJzdHJpbmciID09IHR5cGVvZiBlLm5vZGVOYW1lICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUuZ2V0QXR0cmlidXRlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBFKGUsIHQpIHsKICAgICAgaWYgKGUubGVuZ3RoID4gdC5tYXhTdHJpbmdMZW5ndGgpIHsKICAgICAgICB2YXIgbiA9IGUubGVuZ3RoIC0gdC5tYXhTdHJpbmdMZW5ndGgsCiAgICAgICAgICAgIHIgPSAiLi4uICIgKyBuICsgIiBtb3JlIGNoYXJhY3RlciIgKyAobiA+IDEgPyAicyIgOiAiIik7CiAgICAgICAgcmV0dXJuIEUoWC5jYWxsKGUsIDAsIHQubWF4U3RyaW5nTGVuZ3RoKSwgdCkgKyByOwogICAgICB9CgogICAgICByZXR1cm4gaShZLmNhbGwoWS5jYWxsKGUsIC8oWydcXF0pL2csICJcXCQxIiksIC9bXHgwMC1ceDFmXS9nLCBGKSwgInNpbmdsZSIsIHQpOwogICAgfQoKICAgIGZ1bmN0aW9uIEYoZSkgewogICAgICB2YXIgdCA9IGUuY2hhckNvZGVBdCgwKSwKICAgICAgICAgIG4gPSB7CiAgICAgICAgODogImIiLAogICAgICAgIDk6ICJ0IiwKICAgICAgICAxMDogIm4iLAogICAgICAgIDEyOiAiZiIsCiAgICAgICAgMTM6ICJyIgogICAgICB9W3RdOwogICAgICByZXR1cm4gbiA/ICJcXCIgKyBuIDogIlxceCIgKyAodCA8IDE2ID8gIjAiIDogIiIpICsgZWUuY2FsbCh0LnRvU3RyaW5nKDE2KSk7CiAgICB9CgogICAgZnVuY3Rpb24gQyhlKSB7CiAgICAgIHJldHVybiAiT2JqZWN0KCIgKyBlICsgIikiOwogICAgfQoKICAgIGZ1bmN0aW9uIF8oZSkgewogICAgICByZXR1cm4gZSArICIgeyA/IH0iOwogICAgfQoKICAgIGZ1bmN0aW9uIFMoZSwgdCwgbiwgcikgewogICAgICByZXR1cm4gZSArICIgKCIgKyB0ICsgIikgeyIgKyAociA/ICQobiwgcikgOiBpZS5jYWxsKG4sICIsICIpKSArICJ9IjsKICAgIH0KCiAgICBmdW5jdGlvbiBPKGUpIHsKICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCBlLmxlbmd0aDsgdCsrKSBpZiAoeShlW3RdLCAiXG4iKSA+PSAwKSByZXR1cm4gITE7CgogICAgICByZXR1cm4gITA7CiAgICB9CgogICAgZnVuY3Rpb24gQihlLCB0KSB7CiAgICAgIHZhciBuOwogICAgICBpZiAoIlx0IiA9PT0gZS5pbmRlbnQpIG4gPSAiXHQiO2Vsc2UgewogICAgICAgIGlmICghKCJudW1iZXIiID09IHR5cGVvZiBlLmluZGVudCAmJiBlLmluZGVudCA+IDApKSByZXR1cm4gbnVsbDsKICAgICAgICBuID0gaWUuY2FsbChBcnJheShlLmluZGVudCArIDEpLCAiICIpOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgYmFzZTogbiwKICAgICAgICBwcmV2OiBpZS5jYWxsKEFycmF5KHQgKyAxKSwgbikKICAgICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiAkKGUsIHQpIHsKICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSByZXR1cm4gIiI7CiAgICAgIHZhciBuID0gIlxuIiArIHQucHJldiArIHQuYmFzZTsKICAgICAgcmV0dXJuIG4gKyBpZS5jYWxsKGUsICIsIiArIG4pICsgIlxuIiArIHQucHJldjsKICAgIH0KCiAgICBmdW5jdGlvbiBqKGUsIHQpIHsKICAgICAgdmFyIG4gPSBhKGUpLAogICAgICAgICAgciA9IFtdOwoKICAgICAgaWYgKG4pIHsKICAgICAgICByLmxlbmd0aCA9IGUubGVuZ3RoOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGUubGVuZ3RoOyBpKyspIHJbaV0gPSB2KGUsIGkpID8gdChlW2ldLCBlKSA6ICIiOwogICAgICB9CgogICAgICB2YXIgbywKICAgICAgICAgIHUgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBzZSA/IHNlKGUpIDogW107CgogICAgICBpZiAoY2UpIHsKICAgICAgICBvID0ge307CgogICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgdS5sZW5ndGg7IHMrKykgb1siJCIgKyB1W3NdXSA9IHVbc107CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGwgaW4gZSkgdihlLCBsKSAmJiAobiAmJiBTdHJpbmcoTnVtYmVyKGwpKSA9PT0gbCAmJiBsIDwgZS5sZW5ndGggfHwgY2UgJiYgb1siJCIgKyBsXSBpbnN0YW5jZW9mIFN5bWJvbCB8fCAobmUuY2FsbCgvW15cdyRdLywgbCkgPyByLnB1c2godChsLCBlKSArICI6ICIgKyB0KGVbbF0sIGUpKSA6IHIucHVzaChsICsgIjogIiArIHQoZVtsXSwgZSkpKSk7CgogICAgICBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2Ygc2UpIGZvciAodmFyIGMgPSAwOyBjIDwgdS5sZW5ndGg7IGMrKykgcGUuY2FsbChlLCB1W2NdKSAmJiByLnB1c2goIlsiICsgdCh1W2NdKSArICJdOiAiICsgdChlW3VbY11dLCBlKSk7CiAgICAgIHJldHVybiByOwogICAgfQoKICAgIHZhciBUID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgTWFwICYmIE1hcC5wcm90b3R5cGUsCiAgICAgICAgSSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgJiYgVCA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTWFwLnByb3RvdHlwZSwgInNpemUiKSA6IG51bGwsCiAgICAgICAgeiA9IFQgJiYgSSAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBJLmdldCA/IEkuZ2V0IDogbnVsbCwKICAgICAgICBSID0gVCAmJiBNYXAucHJvdG90eXBlLmZvckVhY2gsCiAgICAgICAgUCA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIFNldCAmJiBTZXQucHJvdG90eXBlLAogICAgICAgIE0gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yICYmIFAgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKFNldC5wcm90b3R5cGUsICJzaXplIikgOiBudWxsLAogICAgICAgIEwgPSBQICYmIE0gJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgTS5nZXQgPyBNLmdldCA6IG51bGwsCiAgICAgICAgTiA9IFAgJiYgU2V0LnByb3RvdHlwZS5mb3JFYWNoLAogICAgICAgIFUgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBXZWFrTWFwICYmIFdlYWtNYXAucHJvdG90eXBlLAogICAgICAgIFEgPSBVID8gV2Vha01hcC5wcm90b3R5cGUuaGFzIDogbnVsbCwKICAgICAgICBxID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgV2Vha1NldCAmJiBXZWFrU2V0LnByb3RvdHlwZSwKICAgICAgICBXID0gcSA/IFdlYWtTZXQucHJvdG90eXBlLmhhcyA6IG51bGwsCiAgICAgICAgViA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIFdlYWtSZWYgJiYgV2Vha1JlZi5wcm90b3R5cGUsCiAgICAgICAgSCA9IFYgPyBXZWFrUmVmLnByb3RvdHlwZS5kZXJlZiA6IG51bGwsCiAgICAgICAgSyA9IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YsCiAgICAgICAgWiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsCiAgICAgICAgRyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZywKICAgICAgICBKID0gU3RyaW5nLnByb3RvdHlwZS5tYXRjaCwKICAgICAgICBYID0gU3RyaW5nLnByb3RvdHlwZS5zbGljZSwKICAgICAgICBZID0gU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlLAogICAgICAgIGVlID0gU3RyaW5nLnByb3RvdHlwZS50b1VwcGVyQ2FzZSwKICAgICAgICB0ZSA9IFN0cmluZy5wcm90b3R5cGUudG9Mb3dlckNhc2UsCiAgICAgICAgbmUgPSBSZWdFeHAucHJvdG90eXBlLnRlc3QsCiAgICAgICAgcmUgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LAogICAgICAgIGllID0gQXJyYXkucHJvdG90eXBlLmpvaW4sCiAgICAgICAgb2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UsCiAgICAgICAgYWUgPSBNYXRoLmZsb29yLAogICAgICAgIHVlID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgQmlnSW50ID8gQmlnSW50LnByb3RvdHlwZS52YWx1ZU9mIDogbnVsbCwKICAgICAgICBzZSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsCiAgICAgICAgbGUgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IFN5bWJvbC5wcm90b3R5cGUudG9TdHJpbmcgOiBudWxsLAogICAgICAgIGNlID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJvYmplY3QiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IsCiAgICAgICAgZmUgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLnRvU3RyaW5nVGFnICYmICh0eXBlb2YgU3ltYm9sLnRvU3RyaW5nVGFnID09PSBjZSA/ICJvYmplY3QiIDogInN5bWJvbCIpID8gU3ltYm9sLnRvU3RyaW5nVGFnIDogbnVsbCwKICAgICAgICBwZSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsCiAgICAgICAgZGUgPSAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgUmVmbGVjdCA/IFJlZmxlY3QuZ2V0UHJvdG90eXBlT2YgOiBPYmplY3QuZ2V0UHJvdG90eXBlT2YpIHx8IChbXS5fX3Byb3RvX18gPT09IEFycmF5LnByb3RvdHlwZSA/IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLl9fcHJvdG9fXzsKICAgIH0gOiBudWxsKSwKICAgICAgICBoZSA9IG4oMTAyKS5jdXN0b20sCiAgICAgICAgdmUgPSBoZSAmJiBkKGhlKSA/IGhlIDogbnVsbDsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiBlKHQsIG4sIEYsIFQpIHsKICAgICAgZnVuY3Rpb24gSSh0LCBuLCByKSB7CiAgICAgICAgaWYgKG4gJiYgKFQgPSBvZS5jYWxsKFQpLCBULnB1c2gobikpLCByKSB7CiAgICAgICAgICB2YXIgaSA9IHsKICAgICAgICAgICAgZGVwdGg6IFAuZGVwdGgKICAgICAgICAgIH07CiAgICAgICAgICByZXR1cm4gdihQLCAicXVvdGVTdHlsZSIpICYmIChpLnF1b3RlU3R5bGUgPSBQLnF1b3RlU3R5bGUpLCBlKHQsIGksIEYgKyAxLCBUKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBlKHQsIFAsIEYgKyAxLCBUKTsKICAgICAgfQoKICAgICAgdmFyIFAgPSBuIHx8IHt9OwogICAgICBpZiAodihQLCAicXVvdGVTdHlsZSIpICYmICJzaW5nbGUiICE9PSBQLnF1b3RlU3R5bGUgJiYgImRvdWJsZSIgIT09IFAucXVvdGVTdHlsZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uICJxdW90ZVN0eWxlIiBtdXN0IGJlICJzaW5nbGUiIG9yICJkb3VibGUiJyk7CiAgICAgIGlmICh2KFAsICJtYXhTdHJpbmdMZW5ndGgiKSAmJiAoIm51bWJlciIgPT0gdHlwZW9mIFAubWF4U3RyaW5nTGVuZ3RoID8gUC5tYXhTdHJpbmdMZW5ndGggPCAwICYmIFAubWF4U3RyaW5nTGVuZ3RoICE9PSAxIC8gMCA6IG51bGwgIT09IFAubWF4U3RyaW5nTGVuZ3RoKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uICJtYXhTdHJpbmdMZW5ndGgiLCBpZiBwcm92aWRlZCwgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIsIEluZmluaXR5LCBvciBgbnVsbGAnKTsKICAgICAgdmFyIE0gPSAhdihQLCAiY3VzdG9tSW5zcGVjdCIpIHx8IFAuY3VzdG9tSW5zcGVjdDsKICAgICAgaWYgKCJib29sZWFuIiAhPSB0eXBlb2YgTSAmJiAic3ltYm9sIiAhPT0gTSkgdGhyb3cgbmV3IFR5cGVFcnJvcigib3B0aW9uIFwiY3VzdG9tSW5zcGVjdFwiLCBpZiBwcm92aWRlZCwgbXVzdCBiZSBgdHJ1ZWAsIGBmYWxzZWAsIG9yIGAnc3ltYm9sJ2AiKTsKICAgICAgaWYgKHYoUCwgImluZGVudCIpICYmIG51bGwgIT09IFAuaW5kZW50ICYmICJcdCIgIT09IFAuaW5kZW50ICYmICEocGFyc2VJbnQoUC5pbmRlbnQsIDEwKSA9PT0gUC5pbmRlbnQgJiYgUC5pbmRlbnQgPiAwKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uICJpbmRlbnQiIG11c3QgYmUgIlxcdCIsIGFuIGludGVnZXIgPiAwLCBvciBgbnVsbGAnKTsKICAgICAgaWYgKHYoUCwgIm51bWVyaWNTZXBhcmF0b3IiKSAmJiAiYm9vbGVhbiIgIT0gdHlwZW9mIFAubnVtZXJpY1NlcGFyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uICJudW1lcmljU2VwYXJhdG9yIiwgaWYgcHJvdmlkZWQsIG11c3QgYmUgYHRydWVgIG9yIGBmYWxzZWAnKTsKICAgICAgdmFyIFUgPSBQLm51bWVyaWNTZXBhcmF0b3I7CiAgICAgIGlmICh2b2lkIDAgPT09IHQpIHJldHVybiAidW5kZWZpbmVkIjsKICAgICAgaWYgKG51bGwgPT09IHQpIHJldHVybiAibnVsbCI7CiAgICAgIGlmICgiYm9vbGVhbiIgPT0gdHlwZW9mIHQpIHJldHVybiB0ID8gInRydWUiIDogImZhbHNlIjsKICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiB0KSByZXR1cm4gRSh0LCBQKTsKCiAgICAgIGlmICgibnVtYmVyIiA9PSB0eXBlb2YgdCkgewogICAgICAgIGlmICgwID09PSB0KSByZXR1cm4gMSAvIDAgLyB0ID4gMCA/ICIwIiA6ICItMCI7CiAgICAgICAgdmFyIFEgPSBTdHJpbmcodCk7CiAgICAgICAgcmV0dXJuIFUgPyByKHQsIFEpIDogUTsKICAgICAgfQoKICAgICAgaWYgKCJiaWdpbnQiID09IHR5cGVvZiB0KSB7CiAgICAgICAgdmFyIHEgPSBTdHJpbmcodCkgKyAibiI7CiAgICAgICAgcmV0dXJuIFUgPyByKHQsIHEpIDogcTsKICAgICAgfQoKICAgICAgdmFyIFcgPSB2b2lkIDAgPT09IFAuZGVwdGggPyA1IDogUC5kZXB0aDsKICAgICAgaWYgKHZvaWQgMCA9PT0gRiAmJiAoRiA9IDApLCBGID49IFcgJiYgVyA+IDAgJiYgIm9iamVjdCIgPT0gdHlwZW9mIHQpIHJldHVybiBhKHQpID8gIltBcnJheV0iIDogIltPYmplY3RdIjsKICAgICAgdmFyIFYgPSBCKFAsIEYpOwogICAgICBpZiAodm9pZCAwID09PSBUKSBUID0gW107ZWxzZSBpZiAoeShULCB0KSA+PSAwKSByZXR1cm4gIltDaXJjdWxhcl0iOwoKICAgICAgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIHQpIHsKICAgICAgICB2YXIgSCA9IG0odCksCiAgICAgICAgICAgIFogPSBqKHQsIEkpOwogICAgICAgIHJldHVybiAiW0Z1bmN0aW9uIiArIChIID8gIjogIiArIEggOiAiIChhbm9ueW1vdXMpIikgKyAiXSIgKyAoWi5sZW5ndGggPiAwID8gIiB7ICIgKyBpZS5jYWxsKFosICIsICIpICsgIiB9IiA6ICIiKTsKICAgICAgfQoKICAgICAgaWYgKGQodCkpIHsKICAgICAgICB2YXIgRyA9IGNlID8gWS5jYWxsKFN0cmluZyh0KSwgL14oU3ltYm9sXCguKlwpKV9bXildKiQvLCAiJDEiKSA6IGxlLmNhbGwodCk7CiAgICAgICAgcmV0dXJuICJvYmplY3QiICE9IHR5cGVvZiB0IHx8IGNlID8gRyA6IEMoRyk7CiAgICAgIH0KCiAgICAgIGlmIChrKHQpKSB7CiAgICAgICAgZm9yICh2YXIgSiA9ICI8IiArIHRlLmNhbGwoU3RyaW5nKHQubm9kZU5hbWUpKSwgZWUgPSB0LmF0dHJpYnV0ZXMgfHwgW10sIG5lID0gMDsgbmUgPCBlZS5sZW5ndGg7IG5lKyspIEogKz0gIiAiICsgZWVbbmVdLm5hbWUgKyAiPSIgKyBpKG8oZWVbbmVdLnZhbHVlKSwgImRvdWJsZSIsIFApOwoKICAgICAgICByZXR1cm4gSiArPSAiPiIsIHQuY2hpbGROb2RlcyAmJiB0LmNoaWxkTm9kZXMubGVuZ3RoICYmIChKICs9ICIuLi4iKSwgSiArPSAiPC8iICsgdGUuY2FsbChTdHJpbmcodC5ub2RlTmFtZSkpICsgIj4iOwogICAgICB9CgogICAgICBpZiAoYSh0KSkgewogICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgcmV0dXJuICJbXSI7CiAgICAgICAgdmFyIGFlID0gaih0LCBJKTsKICAgICAgICByZXR1cm4gViAmJiAhTyhhZSkgPyAiWyIgKyAkKGFlLCBWKSArICJdIiA6ICJbICIgKyBpZS5jYWxsKGFlLCAiLCAiKSArICIgXSI7CiAgICAgIH0KCiAgICAgIGlmIChsKHQpKSB7CiAgICAgICAgdmFyIHNlID0gaih0LCBJKTsKICAgICAgICByZXR1cm4gImNhdXNlIiBpbiB0ICYmICFwZS5jYWxsKHQsICJjYXVzZSIpID8gInsgWyIgKyBTdHJpbmcodCkgKyAiXSAiICsgaWUuY2FsbChyZS5jYWxsKCJbY2F1c2VdOiAiICsgSSh0LmNhdXNlKSwgc2UpLCAiLCAiKSArICIgfSIgOiAwID09PSBzZS5sZW5ndGggPyAiWyIgKyBTdHJpbmcodCkgKyAiXSIgOiAieyBbIiArIFN0cmluZyh0KSArICJdICIgKyBpZS5jYWxsKHNlLCAiLCAiKSArICIgfSI7CiAgICAgIH0KCiAgICAgIGlmICgib2JqZWN0IiA9PSB0eXBlb2YgdCAmJiBNKSB7CiAgICAgICAgaWYgKHZlICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIHRbdmVdKSByZXR1cm4gdFt2ZV0oKTsKICAgICAgICBpZiAoInN5bWJvbCIgIT09IE0gJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgdC5pbnNwZWN0KSByZXR1cm4gdC5pbnNwZWN0KCk7CiAgICAgIH0KCiAgICAgIGlmIChiKHQpKSB7CiAgICAgICAgdmFyIGhlID0gW107CiAgICAgICAgcmV0dXJuIFIuY2FsbCh0LCBmdW5jdGlvbiAoZSwgbikgewogICAgICAgICAgaGUucHVzaChJKG4sIHQsICEwKSArICIgPT4gIiArIEkoZSwgdCkpOwogICAgICAgIH0pLCBTKCJNYXAiLCB6LmNhbGwodCksIGhlLCBWKTsKICAgICAgfQoKICAgICAgaWYgKHcodCkpIHsKICAgICAgICB2YXIgZ2UgPSBbXTsKICAgICAgICByZXR1cm4gTi5jYWxsKHQsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBnZS5wdXNoKEkoZSwgdCkpOwogICAgICAgIH0pLCBTKCJTZXQiLCBMLmNhbGwodCksIGdlLCBWKTsKICAgICAgfQoKICAgICAgaWYgKEQodCkpIHJldHVybiBfKCJXZWFrTWFwIik7CiAgICAgIGlmIChBKHQpKSByZXR1cm4gXygiV2Vha1NldCIpOwogICAgICBpZiAoeCh0KSkgcmV0dXJuIF8oIldlYWtSZWYiKTsKICAgICAgaWYgKGYodCkpIHJldHVybiBDKEkoTnVtYmVyKHQpKSk7CiAgICAgIGlmIChoKHQpKSByZXR1cm4gQyhJKHVlLmNhbGwodCkpKTsKICAgICAgaWYgKHAodCkpIHJldHVybiBDKEsuY2FsbCh0KSk7CiAgICAgIGlmIChjKHQpKSByZXR1cm4gQyhJKFN0cmluZyh0KSkpOwoKICAgICAgaWYgKCF1KHQpICYmICFzKHQpKSB7CiAgICAgICAgdmFyIG1lID0gaih0LCBJKSwKICAgICAgICAgICAgeWUgPSBkZSA/IGRlKHQpID09PSBPYmplY3QucHJvdG90eXBlIDogdCBpbnN0YW5jZW9mIE9iamVjdCB8fCB0LmNvbnN0cnVjdG9yID09PSBPYmplY3QsCiAgICAgICAgICAgIGJlID0gdCBpbnN0YW5jZW9mIE9iamVjdCA/ICIiIDogIm51bGwgcHJvdG90eXBlIiwKICAgICAgICAgICAgRGUgPSAheWUgJiYgZmUgJiYgT2JqZWN0KHQpID09PSB0ICYmIGZlIGluIHQgPyBYLmNhbGwoZyh0KSwgOCwgLTEpIDogYmUgPyAiT2JqZWN0IiA6ICIiLAogICAgICAgICAgICB4ZSA9IHllIHx8ICJmdW5jdGlvbiIgIT0gdHlwZW9mIHQuY29uc3RydWN0b3IgPyAiIiA6IHQuY29uc3RydWN0b3IubmFtZSA/IHQuY29uc3RydWN0b3IubmFtZSArICIgIiA6ICIiLAogICAgICAgICAgICB3ZSA9IHhlICsgKERlIHx8IGJlID8gIlsiICsgaWUuY2FsbChyZS5jYWxsKFtdLCBEZSB8fCBbXSwgYmUgfHwgW10pLCAiOiAiKSArICJdICIgOiAiIik7CiAgICAgICAgcmV0dXJuIDAgPT09IG1lLmxlbmd0aCA/IHdlICsgInt9IiA6IFYgPyB3ZSArICJ7IiArICQobWUsIFYpICsgIn0iIDogd2UgKyAieyAiICsgaWUuY2FsbChtZSwgIiwgIikgKyAiIH0iOwogICAgICB9CgogICAgICByZXR1cm4gU3RyaW5nKHQpOwogICAgfTsKCiAgICB2YXIgZ2UgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5IHx8IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlIGluIHRoaXM7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHI7CgogICAgaWYgKCFPYmplY3Qua2V5cykgewogICAgICB2YXIgaSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksCiAgICAgICAgICBvID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZywKICAgICAgICAgIGEgPSBuKDI2KSwKICAgICAgICAgIHUgPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLAogICAgICAgICAgcyA9ICF1LmNhbGwoewogICAgICAgIHRvU3RyaW5nOiBudWxsCiAgICAgIH0sICJ0b1N0cmluZyIpLAogICAgICAgICAgbCA9IHUuY2FsbChmdW5jdGlvbiAoKSB7fSwgInByb3RvdHlwZSIpLAogICAgICAgICAgYyA9IFsidG9TdHJpbmciLCAidG9Mb2NhbGVTdHJpbmciLCAidmFsdWVPZiIsICJoYXNPd25Qcm9wZXJ0eSIsICJpc1Byb3RvdHlwZU9mIiwgInByb3BlcnR5SXNFbnVtZXJhYmxlIiwgImNvbnN0cnVjdG9yIl0sCiAgICAgICAgICBmID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdCA9IGUuY29uc3RydWN0b3I7CiAgICAgICAgcmV0dXJuIHQgJiYgdC5wcm90b3R5cGUgPT09IGU7CiAgICAgIH0sCiAgICAgICAgICBwID0gewogICAgICAgICRhcHBsaWNhdGlvbkNhY2hlOiAhMCwKICAgICAgICAkY29uc29sZTogITAsCiAgICAgICAgJGV4dGVybmFsOiAhMCwKICAgICAgICAkZnJhbWU6ICEwLAogICAgICAgICRmcmFtZUVsZW1lbnQ6ICEwLAogICAgICAgICRmcmFtZXM6ICEwLAogICAgICAgICRpbm5lckhlaWdodDogITAsCiAgICAgICAgJGlubmVyV2lkdGg6ICEwLAogICAgICAgICRvbm1vemZ1bGxzY3JlZW5jaGFuZ2U6ICEwLAogICAgICAgICRvbm1vemZ1bGxzY3JlZW5lcnJvcjogITAsCiAgICAgICAgJG91dGVySGVpZ2h0OiAhMCwKICAgICAgICAkb3V0ZXJXaWR0aDogITAsCiAgICAgICAgJHBhZ2VYT2Zmc2V0OiAhMCwKICAgICAgICAkcGFnZVlPZmZzZXQ6ICEwLAogICAgICAgICRwYXJlbnQ6ICEwLAogICAgICAgICRzY3JvbGxMZWZ0OiAhMCwKICAgICAgICAkc2Nyb2xsVG9wOiAhMCwKICAgICAgICAkc2Nyb2xsWDogITAsCiAgICAgICAgJHNjcm9sbFk6ICEwLAogICAgICAgICRzZWxmOiAhMCwKICAgICAgICAkd2Via2l0SW5kZXhlZERCOiAhMCwKICAgICAgICAkd2Via2l0U3RvcmFnZUluZm86ICEwLAogICAgICAgICR3aW5kb3c6ICEwCiAgICAgIH0sCiAgICAgICAgICBkID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICgidW5kZWZpbmVkIiA9PSB0eXBlb2Ygd2luZG93KSByZXR1cm4gITE7CgogICAgICAgIGZvciAodmFyIGUgaW4gd2luZG93KSB0cnkgewogICAgICAgICAgaWYgKCFwWyIkIiArIGVdICYmIGkuY2FsbCh3aW5kb3csIGUpICYmIG51bGwgIT09IHdpbmRvd1tlXSAmJiAib2JqZWN0IiA9PSB0eXBlb2Ygd2luZG93W2VdKSB0cnkgewogICAgICAgICAgICBmKHdpbmRvd1tlXSk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICByZXR1cm4gITA7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gITE7CiAgICAgIH0oKSwKICAgICAgICAgIGggPSBmdW5jdGlvbiAoZSkgewogICAgICAgIGlmICgidW5kZWZpbmVkIiA9PSB0eXBlb2Ygd2luZG93IHx8ICFkKSByZXR1cm4gZihlKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiBmKGUpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICB9CiAgICAgIH07CgogICAgICByID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdCA9IG51bGwgIT09IGUgJiYgIm9iamVjdCIgPT0gdHlwZW9mIGUsCiAgICAgICAgICAgIG4gPSAiW29iamVjdCBGdW5jdGlvbl0iID09PSBvLmNhbGwoZSksCiAgICAgICAgICAgIHIgPSBhKGUpLAogICAgICAgICAgICB1ID0gdCAmJiAiW29iamVjdCBTdHJpbmddIiA9PT0gby5jYWxsKGUpLAogICAgICAgICAgICBmID0gW107CiAgICAgICAgaWYgKCF0ICYmICFuICYmICFyKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qua2V5cyBjYWxsZWQgb24gYSBub24tb2JqZWN0Iik7CiAgICAgICAgdmFyIHAgPSBsICYmIG47CiAgICAgICAgaWYgKHUgJiYgZS5sZW5ndGggPiAwICYmICFpLmNhbGwoZSwgMCkpIGZvciAodmFyIGQgPSAwOyBkIDwgZS5sZW5ndGg7ICsrZCkgZi5wdXNoKFN0cmluZyhkKSk7CiAgICAgICAgaWYgKHIgJiYgZS5sZW5ndGggPiAwKSBmb3IgKHZhciB2ID0gMDsgdiA8IGUubGVuZ3RoOyArK3YpIGYucHVzaChTdHJpbmcodikpO2Vsc2UgZm9yICh2YXIgZyBpbiBlKSBwICYmICJwcm90b3R5cGUiID09PSBnIHx8ICFpLmNhbGwoZSwgZykgfHwgZi5wdXNoKFN0cmluZyhnKSk7CiAgICAgICAgaWYgKHMpIGZvciAodmFyIG0gPSBoKGUpLCB5ID0gMDsgeSA8IGMubGVuZ3RoOyArK3kpIG0gJiYgImNvbnN0cnVjdG9yIiA9PT0gY1t5XSB8fCAhaS5jYWxsKGUsIGNbeV0pIHx8IGYucHVzaChjW3ldKTsKICAgICAgICByZXR1cm4gZjsKICAgICAgfTsKICAgIH0KCiAgICBlLmV4cG9ydHMgPSByOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UsCiAgICAgICAgaSA9IG4oMjYpLAogICAgICAgIG8gPSBPYmplY3Qua2V5cywKICAgICAgICBhID0gbyA/IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBvKGUpOwogICAgfSA6IG4oODcpLAogICAgICAgIHUgPSBPYmplY3Qua2V5czsKICAgIGEuc2hpbSA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKE9iamVjdC5rZXlzKSB7CiAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBlID0gT2JqZWN0LmtleXMoYXJndW1lbnRzKTsKICAgICAgICAgIHJldHVybiBlICYmIGUubGVuZ3RoID09PSBhcmd1bWVudHMubGVuZ3RoOwogICAgICAgIH0pKDEsIDIpIHx8IChPYmplY3Qua2V5cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gdShpKGUpID8gci5jYWxsKGUpIDogZSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBPYmplY3Qua2V5cyA9IGE7CgogICAgICByZXR1cm4gT2JqZWN0LmtleXMgfHwgYTsKICAgIH0sIGUuZXhwb3J0cyA9IGE7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oMiksCiAgICAgICAgaSA9IG4oNCksCiAgICAgICAgbyA9IG4oMjcpLAogICAgICAgIGEgPSBuKDI4KSwKICAgICAgICB1ID0gbig5MCksCiAgICAgICAgcyA9IGkoYSgpLCBPYmplY3QpOwogICAgcihzLCB7CiAgICAgIGdldFBvbHlmaWxsOiBhLAogICAgICBpbXBsZW1lbnRhdGlvbjogbywKICAgICAgc2hpbTogdQogICAgfSksIGUuZXhwb3J0cyA9IHM7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oMjgpLAogICAgICAgIGkgPSBuKDIpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSByKCk7CiAgICAgIHJldHVybiBpKE9iamVjdCwgewogICAgICAgIGVudHJpZXM6IGUKICAgICAgfSwgewogICAgICAgIGVudHJpZXM6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBPYmplY3QuZW50cmllcyAhPT0gZTsKICAgICAgICB9CiAgICAgIH0pLCBlOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCkgewogICAgZnVuY3Rpb24gbigpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkIik7CiAgICB9CgogICAgZnVuY3Rpb24gcigpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQiKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpKGUpIHsKICAgICAgaWYgKGMgPT09IHNldFRpbWVvdXQpIHJldHVybiBzZXRUaW1lb3V0KGUsIDApOwogICAgICBpZiAoKGMgPT09IG4gfHwgIWMpICYmIHNldFRpbWVvdXQpIHJldHVybiBjID0gc2V0VGltZW91dCwgc2V0VGltZW91dChlLCAwKTsKCiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIGMoZSwgMCk7CiAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIGMuY2FsbChudWxsLCBlLCAwKTsKICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICByZXR1cm4gYy5jYWxsKHRoaXMsIGUsIDApOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIG8oZSkgewogICAgICBpZiAoZiA9PT0gY2xlYXJUaW1lb3V0KSByZXR1cm4gY2xlYXJUaW1lb3V0KGUpOwogICAgICBpZiAoKGYgPT09IHIgfHwgIWYpICYmIGNsZWFyVGltZW91dCkgcmV0dXJuIGYgPSBjbGVhclRpbWVvdXQsIGNsZWFyVGltZW91dChlKTsKCiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIGYoZSk7CiAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIGYuY2FsbChudWxsLCBlKTsKICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICByZXR1cm4gZi5jYWxsKHRoaXMsIGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGEoKSB7CiAgICAgIHYgJiYgZCAmJiAodiA9ICExLCBkLmxlbmd0aCA/IGggPSBkLmNvbmNhdChoKSA6IGcgPSAtMSwgaC5sZW5ndGggJiYgdSgpKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1KCkgewogICAgICBpZiAoIXYpIHsKICAgICAgICB2YXIgZSA9IGkoYSk7CiAgICAgICAgdiA9ICEwOwoKICAgICAgICBmb3IgKHZhciB0ID0gaC5sZW5ndGg7IHQ7KSB7CiAgICAgICAgICBmb3IgKGQgPSBoLCBoID0gW107ICsrZyA8IHQ7KSBkICYmIGRbZ10ucnVuKCk7CgogICAgICAgICAgZyA9IC0xLCB0ID0gaC5sZW5ndGg7CiAgICAgICAgfQoKICAgICAgICBkID0gbnVsbCwgdiA9ICExLCBvKGUpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcyhlLCB0KSB7CiAgICAgIHRoaXMuZnVuID0gZSwgdGhpcy5hcnJheSA9IHQ7CiAgICB9CgogICAgZnVuY3Rpb24gbCgpIHt9CgogICAgdmFyIGMsCiAgICAgICAgZiwKICAgICAgICBwID0gZS5leHBvcnRzID0ge307CiAgICAhZnVuY3Rpb24gKCkgewogICAgICB0cnkgewogICAgICAgIGMgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBzZXRUaW1lb3V0ID8gc2V0VGltZW91dCA6IG47CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjID0gbjsKICAgICAgfQoKICAgICAgdHJ5IHsKICAgICAgICBmID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgY2xlYXJUaW1lb3V0ID8gY2xlYXJUaW1lb3V0IDogcjsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGYgPSByOwogICAgICB9CiAgICB9KCk7CiAgICB2YXIgZCwKICAgICAgICBoID0gW10sCiAgICAgICAgdiA9ICExLAogICAgICAgIGcgPSAtMTsKICAgIHAubmV4dFRpY2sgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7CiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgZm9yICh2YXIgbiA9IDE7IG4gPCBhcmd1bWVudHMubGVuZ3RoOyBuKyspIHRbbiAtIDFdID0gYXJndW1lbnRzW25dOwogICAgICBoLnB1c2gobmV3IHMoZSwgdCkpLCAxICE9PSBoLmxlbmd0aCB8fCB2IHx8IGkodSk7CiAgICB9LCBzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpOwogICAgfSwgcC50aXRsZSA9ICJicm93c2VyIiwgcC5icm93c2VyID0gITAsIHAuZW52ID0ge30sIHAuYXJndiA9IFtdLCBwLnZlcnNpb24gPSAiIiwgcC52ZXJzaW9ucyA9IHt9LCBwLm9uID0gbCwgcC5hZGRMaXN0ZW5lciA9IGwsIHAub25jZSA9IGwsIHAub2ZmID0gbCwgcC5yZW1vdmVMaXN0ZW5lciA9IGwsIHAucmVtb3ZlQWxsTGlzdGVuZXJzID0gbCwgcC5lbWl0ID0gbCwgcC5wcmVwZW5kTGlzdGVuZXIgPSBsLCBwLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBsLCBwLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBbXTsKICAgIH0sIHAuYmluZGluZyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQiKTsKICAgIH0sIHAuY3dkID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gIi8iOwogICAgfSwgcC5jaGRpciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkIik7CiAgICB9LCBwLnVtYXNrID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gMDsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oNCksCiAgICAgICAgaSA9IG4oMiksCiAgICAgICAgbyA9IG4oMjkpLAogICAgICAgIGEgPSBuKDMwKSwKICAgICAgICB1ID0gbig5MyksCiAgICAgICAgcyA9IHIoYSgpKTsKICAgIGkocywgewogICAgICBnZXRQb2x5ZmlsbDogYSwKICAgICAgaW1wbGVtZW50YXRpb246IG8sCiAgICAgIHNoaW06IHUKICAgIH0pLCBlLmV4cG9ydHMgPSBzOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBuKDIpLAogICAgICAgIGkgPSBuKDMwKTsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0gaSgpOwogICAgICByZXR1cm4gcihTdHJpbmcucHJvdG90eXBlLCB7CiAgICAgICAgdHJpbTogZQogICAgICB9LCB7CiAgICAgICAgdHJpbTogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFN0cmluZy5wcm90b3R5cGUudHJpbSAhPT0gZTsKICAgICAgICB9CiAgICAgIH0pLCBlOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIChmdW5jdGlvbiAodCkgewogICAgICB2YXIgbiA9ICJwcm9kdWN0aW9uIiAhPT0gdC5lbnYuTk9ERV9FTlYsCiAgICAgICAgICByID0gZnVuY3Rpb24gKCkge307CgogICAgICBpZiAobikgewogICAgICAgIHZhciBpID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHZhciBuID0gYXJndW1lbnRzLmxlbmd0aDsKICAgICAgICAgIHQgPSBuZXcgQXJyYXkobiA+IDEgPyBuIC0gMSA6IDApOwoKICAgICAgICAgIGZvciAodmFyIHIgPSAxOyByIDwgbjsgcisrKSB0W3IgLSAxXSA9IGFyZ3VtZW50c1tyXTsKCiAgICAgICAgICB2YXIgaSA9IDAsCiAgICAgICAgICAgICAgbyA9ICJXYXJuaW5nOiAiICsgZS5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0W2krK107CiAgICAgICAgICB9KTsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3Iobyk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgIH07CgogICAgICAgIHIgPSBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgdmFyIHIgPSBhcmd1bWVudHMubGVuZ3RoOwogICAgICAgICAgbiA9IG5ldyBBcnJheShyID4gMiA/IHIgLSAyIDogMCk7CgogICAgICAgICAgZm9yICh2YXIgbyA9IDI7IG8gPCByOyBvKyspIG5bbyAtIDJdID0gYXJndW1lbnRzW29dOwoKICAgICAgICAgIGlmICh2b2lkIDAgPT09IHQpIHRocm93IG5ldyBFcnJvcigiYHdhcm5pbmcoY29uZGl0aW9uLCBmb3JtYXQsIC4uLmFyZ3MpYCByZXF1aXJlcyBhIHdhcm5pbmcgbWVzc2FnZSBhcmd1bWVudCIpOwogICAgICAgICAgZSB8fCBpLmFwcGx5KG51bGwsIFt0XS5jb25jYXQobikpOwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGUuZXhwb3J0cyA9IHI7CiAgICB9KS5jYWxsKHQsIG4oOTEpKTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgZnVuY3Rpb24gcihlLCB0KSB7CiAgICAgIHJldHVybiBuZXcgYSh0KS5wcm9jZXNzKGUpOwogICAgfQoKICAgIHZhciBpID0gbigzMSksCiAgICAgICAgbyA9IG4oMzIpLAogICAgICAgIGEgPSBuKDk2KTsKICAgIHQgPSBlLmV4cG9ydHMgPSByLCB0LmZpbHRlclhTUyA9IHIsIHQuRmlsdGVyWFNTID0gYTsKCiAgICBmb3IgKHZhciB1IGluIGkpIHRbdV0gPSBpW3VdOwoKICAgIGZvciAodmFyIHUgaW4gbykgdFt1XSA9IG9bdV07CgogICAgInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdyAmJiAod2luZG93LmZpbHRlclhTUyA9IGUuZXhwb3J0cyksIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICJ1bmRlZmluZWQiICE9IHR5cGVvZiBzZWxmICYmICJ1bmRlZmluZWQiICE9IHR5cGVvZiBEZWRpY2F0ZWRXb3JrZXJHbG9iYWxTY29wZSAmJiBzZWxmIGluc3RhbmNlb2YgRGVkaWNhdGVkV29ya2VyR2xvYmFsU2NvcGU7CiAgICB9KCkgJiYgKHNlbGYuZmlsdGVyWFNTID0gZS5leHBvcnRzKTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgZnVuY3Rpb24gcihlKSB7CiAgICAgIHJldHVybiB2b2lkIDAgPT09IGUgfHwgbnVsbCA9PT0gZTsKICAgIH0KCiAgICBmdW5jdGlvbiBpKGUpIHsKICAgICAgdmFyIHQgPSBwLnNwYWNlSW5kZXgoZSk7CiAgICAgIGlmICgtMSA9PT0gdCkgcmV0dXJuIHsKICAgICAgICBodG1sOiAiIiwKICAgICAgICBjbG9zaW5nOiAiLyIgPT09IGVbZS5sZW5ndGggLSAyXQogICAgICB9OwogICAgICBlID0gcC50cmltKGUuc2xpY2UodCArIDEsIC0xKSk7CiAgICAgIHZhciBuID0gIi8iID09PSBlW2UubGVuZ3RoIC0gMV07CiAgICAgIHJldHVybiBuICYmIChlID0gcC50cmltKGUuc2xpY2UoMCwgLTEpKSksIHsKICAgICAgICBodG1sOiBlLAogICAgICAgIGNsb3Npbmc6IG4KICAgICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiBvKGUpIHsKICAgICAgdmFyIHQgPSB7fTsKCiAgICAgIGZvciAodmFyIG4gaW4gZSkgdFtuXSA9IGVbbl07CgogICAgICByZXR1cm4gdDsKICAgIH0KCiAgICBmdW5jdGlvbiBhKGUpIHsKICAgICAgZSA9IG8oZSB8fCB7fSksIGUuc3RyaXBJZ25vcmVUYWcgJiYgKGUub25JZ25vcmVUYWcsIGUub25JZ25vcmVUYWcgPSBzLm9uSWdub3JlVGFnU3RyaXBBbGwpLCBlLndoaXRlTGlzdCA9IGUud2hpdGVMaXN0IHx8IGUuYWxsb3dMaXN0IHx8IHMud2hpdGVMaXN0LCBlLm9uVGFnID0gZS5vblRhZyB8fCBzLm9uVGFnLCBlLm9uVGFnQXR0ciA9IGUub25UYWdBdHRyIHx8IHMub25UYWdBdHRyLCBlLm9uSWdub3JlVGFnID0gZS5vbklnbm9yZVRhZyB8fCBzLm9uSWdub3JlVGFnLCBlLm9uSWdub3JlVGFnQXR0ciA9IGUub25JZ25vcmVUYWdBdHRyIHx8IHMub25JZ25vcmVUYWdBdHRyLCBlLnNhZmVBdHRyVmFsdWUgPSBlLnNhZmVBdHRyVmFsdWUgfHwgcy5zYWZlQXR0clZhbHVlLCBlLmVzY2FwZUh0bWwgPSBlLmVzY2FwZUh0bWwgfHwgcy5lc2NhcGVIdG1sLCB0aGlzLm9wdGlvbnMgPSBlLCAhMSA9PT0gZS5jc3MgPyB0aGlzLmNzc0ZpbHRlciA9ICExIDogKGUuY3NzID0gZS5jc3MgfHwge30sIHRoaXMuY3NzRmlsdGVyID0gbmV3IHUoZS5jc3MpKTsKICAgIH0KCiAgICB2YXIgdSA9IG4oNykuRmlsdGVyQ1NTLAogICAgICAgIHMgPSBuKDMxKSwKICAgICAgICBsID0gbigzMiksCiAgICAgICAgYyA9IGwucGFyc2VUYWcsCiAgICAgICAgZiA9IGwucGFyc2VBdHRyLAogICAgICAgIHAgPSBuKDExKTsKICAgIGEucHJvdG90eXBlLnByb2Nlc3MgPSBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZSA9IGUgfHwgIiIsICEoZSA9IGUudG9TdHJpbmcoKSkpIHJldHVybiAiIjsKICAgICAgdmFyIHQgPSB0aGlzLAogICAgICAgICAgbiA9IHQub3B0aW9ucywKICAgICAgICAgIG8gPSBuLndoaXRlTGlzdCwKICAgICAgICAgIGEgPSBuLm9uVGFnLAogICAgICAgICAgdSA9IG4ub25JZ25vcmVUYWcsCiAgICAgICAgICBsID0gbi5vblRhZ0F0dHIsCiAgICAgICAgICBkID0gbi5vbklnbm9yZVRhZ0F0dHIsCiAgICAgICAgICBoID0gbi5zYWZlQXR0clZhbHVlLAogICAgICAgICAgdiA9IG4uZXNjYXBlSHRtbCwKICAgICAgICAgIGcgPSB0LmNzc0ZpbHRlcjsKICAgICAgbi5zdHJpcEJsYW5rQ2hhciAmJiAoZSA9IHMuc3RyaXBCbGFua0NoYXIoZSkpLCBuLmFsbG93Q29tbWVudFRhZyB8fCAoZSA9IHMuc3RyaXBDb21tZW50VGFnKGUpKTsKICAgICAgdmFyIG0gPSAhMTsKCiAgICAgIGlmIChuLnN0cmlwSWdub3JlVGFnQm9keSkgewogICAgICAgIHZhciBtID0gcy5TdHJpcFRhZ0JvZHkobi5zdHJpcElnbm9yZVRhZ0JvZHksIHUpOwogICAgICAgIHUgPSBtLm9uSWdub3JlVGFnOwogICAgICB9CgogICAgICB2YXIgeSA9IGMoZSwgZnVuY3Rpb24gKGUsIHQsIG4sIHMsIGMpIHsKICAgICAgICB2YXIgbSA9IHsKICAgICAgICAgIHNvdXJjZVBvc2l0aW9uOiBlLAogICAgICAgICAgcG9zaXRpb246IHQsCiAgICAgICAgICBpc0Nsb3Npbmc6IGMsCiAgICAgICAgICBpc1doaXRlOiBvLmhhc093blByb3BlcnR5KG4pCiAgICAgICAgfSwKICAgICAgICAgICAgeSA9IGEobiwgcywgbSk7CiAgICAgICAgaWYgKCFyKHkpKSByZXR1cm4geTsKCiAgICAgICAgaWYgKG0uaXNXaGl0ZSkgewogICAgICAgICAgaWYgKG0uaXNDbG9zaW5nKSByZXR1cm4gIjwvIiArIG4gKyAiPiI7CiAgICAgICAgICB2YXIgYiA9IGkocyksCiAgICAgICAgICAgICAgRCA9IG9bbl0sCiAgICAgICAgICAgICAgeCA9IGYoYi5odG1sLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICB2YXIgaSA9IC0xICE9PSBwLmluZGV4T2YoRCwgZSksCiAgICAgICAgICAgICAgICBvID0gbChuLCBlLCB0LCBpKTsKICAgICAgICAgICAgaWYgKCFyKG8pKSByZXR1cm4gbzsKICAgICAgICAgICAgaWYgKGkpIHJldHVybiB0ID0gaChuLCBlLCB0LCBnKSwgdCA/IGUgKyAnPSInICsgdCArICciJyA6IGU7CiAgICAgICAgICAgIHZhciBvID0gZChuLCBlLCB0LCBpKTsKICAgICAgICAgICAgcmV0dXJuIHIobykgPyB2b2lkIDAgOiBvOwogICAgICAgICAgfSksCiAgICAgICAgICAgICAgcyA9ICI8IiArIG47CiAgICAgICAgICByZXR1cm4geCAmJiAocyArPSAiICIgKyB4KSwgYi5jbG9zaW5nICYmIChzICs9ICIgLyIpLCBzICs9ICI+IjsKICAgICAgICB9CgogICAgICAgIHZhciB5ID0gdShuLCBzLCBtKTsKICAgICAgICByZXR1cm4gcih5KSA/IHYocykgOiB5OwogICAgICB9LCB2KTsKICAgICAgcmV0dXJuIG0gJiYgKHkgPSBtLnJlbW92ZSh5KSksIHk7CiAgICB9LCBlLmV4cG9ydHMgPSBhOwogIH0sIGZ1bmN0aW9uIChlLCB0KSB7CiAgICBlLmV4cG9ydHMgPSB7CiAgICAgIHNtaWxlOiAiZTMvMjAxOG5ld193ZWl4aW9hMDJfb3JnLnBuZyIsCiAgICAgIGxvdmVseTogIjA5LzIwMThuZXdfa2VhaV9vcmcucG5nIiwKICAgICAgaGFwcHk6ICIxZS8yMDE4bmV3X3RhaWthaXhpbl9vcmcucG5nIiwKICAgICAgY2xhcDogIjZlLzIwMThuZXdfZ3V6aGFuZ190aHVtYi5wbmciLAogICAgICB3aGVlOiAiMzMvMjAxOG5ld194aXhpX3RodW1iLnBuZyIsCiAgICAgIGhhaGE6ICI4Zi8yMDE4bmV3X2hhaGFfdGh1bWIucG5nIiwKICAgICAgImxhdWdoIGFuZCBjcnkiOiAiNGEvMjAxOG5ld194aWFva3VfdGh1bWIucG5nIiwKICAgICAgd2luazogIjQzLzIwMThuZXdfaml5YW5fb3JnLnBuZyIsCiAgICAgIGdyZWRkeTogImZhLzIwMThuZXdfY2hhbnp1aV9vcmcucG5nIiwKICAgICAgYXdrd2FyZDogImEzLzIwMThuZXdfaGVpeGlhbl90aHVtYi5wbmciLAogICAgICBzd2VhdDogIjI4LzIwMThuZXdfaGFuX29yZy5wbmciLAogICAgICAicGljayBub3NlIjogIjlhLzIwMThuZXdfd2FiaV90aHVtYi5wbmciLAogICAgICBodW06ICI3Yy8yMDE4bmV3X2hlbmdfdGh1bWIucG5nIiwKICAgICAgYW5ncnk6ICJmNi8yMDE4bmV3X251X3RodW1iLnBuZyIsCiAgICAgIGdyaWV2YW5jZTogImE1LzIwMThuZXdfd2VpcXVfdGh1bWIucG5nIiwKICAgICAgcG9vcjogIjk2LzIwMThuZXdfa2VsaWFuX29yZy5wbmciLAogICAgICBkaXNhcHBvaW50OiAiYWEvMjAxOG5ld19zaGl3YW5nX3RodW1iLnBuZyIsCiAgICAgIHNhZDogImVlLzIwMThuZXdfYmVpc2hhbmdfb3JnLnBuZyIsCiAgICAgIHRlYXI6ICI2ZS8yMDE4bmV3X2xlaW11X29yZy5wbmciLAogICAgICAibm8gd2F5IjogIjgzLzIwMThuZXdfa3V4aWFvX29yZy5wbmciLAogICAgICBzaHk6ICJjMS8yMDE4bmV3X2hhaXhpdV9vcmcucG5nIiwKICAgICAgZGlydDogIjEwLzIwMThuZXdfd3VfdGh1bWIucG5nIiwKICAgICAgImxvdmUgeW91IjogImY2LzIwMThuZXdfYWluaV9vcmcucG5nIiwKICAgICAga2lzczogIjJjLzIwMThuZXdfcWlucWluX3RodW1iLnBuZyIsCiAgICAgIGFtb3JvdXNuZXNzOiAiOWQvMjAxOG5ld19odWF4aW5fb3JnLnBuZyIsCiAgICAgIGxvbmdpbmc6ICJjOS8yMDE4bmV3X2Nob25namluZ19vcmcucG5nIiwKICAgICAgZGVzaXJlOiAiM2UvMjAxOG5ld190aWFucGluZ190aHVtYi5wbmciLAogICAgICAiYmFkIGxhdWdoIjogIjRkLzIwMThuZXdfaHVhaXhpYW9fb3JnLnBuZyIsCiAgICAgIGJsYWNrbmVzczogIjllLzIwMThuZXdfeWlueGlhbl9vcmcucG5nIiwKICAgICAgImxhdWdoIHdpdGhvdXQgd29yZCI6ICIyZC8yMDE4bmV3X3hpYW9lcmJ1eXVfb3JnLnBuZyIsCiAgICAgIHRpdHRlcjogIjcxLzIwMThuZXdfdG91eGlhb19vcmcucG5nIiwKICAgICAgY29vbDogImM0LzIwMThuZXdfa3Vfb3JnLnBuZyIsCiAgICAgICJub3QgZWFzeSI6ICJhYS8yMDE4bmV3X2JpbmdidWppYW5kYW5fdGh1bWIucG5nIiwKICAgICAgdGhpbms6ICIzMC8yMDE4bmV3X3Npa2FvX29yZy5wbmciLAogICAgICBxdWVzdGlvbjogImI4LzIwMThuZXdfbmluZ3dlbl9vcmcucG5nIiwKICAgICAgIm5vIGlkZWEiOiAiMmEvMjAxOG5ld193ZW5oYW9fdGh1bWIucG5nIiwKICAgICAgZGl6enk6ICIwNy8yMDE4bmV3X3l1bl90aHVtYi5wbmciLAogICAgICBib21iOiAiYTIvMjAxOG5ld19zaHVhaV90aHVtYi5wbmciLAogICAgICBib25lOiAiYTEvMjAxOG5ld19rdWxvdV90aHVtYi5wbmciLAogICAgICAiYmUgcXVpZXQiOiAiYjAvMjAxOG5ld194dV9vcmcucG5nIiwKICAgICAgInNodXQgdXAiOiAiNjIvMjAxOG5ld19iaXp1aV9vcmcucG5nIiwKICAgICAgc3R1cGlkOiAiZGQvMjAxOG5ld19zaGF5YW5fb3JnLnBuZyIsCiAgICAgICJzdXJwcmlzZSAiOiAiNDkvMjAxOG5ld19jaGlqaW5nX29yZy5wbmciLAogICAgICB2b21pdDogIjA4LzIwMThuZXdfdHVfb3JnLnBuZyIsCiAgICAgIGNvbGQ6ICI0MC8yMDE4bmV3X2tvdXpoYW9fdGh1bWIucG5nIiwKICAgICAgc2ljazogIjNiLzIwMThuZXdfc2hlbmdiaW5nX3RodW1iLnBuZyIsCiAgICAgIGJ5ZTogImZkLzIwMThuZXdfYmFpYmFpX3RodW1iLnBuZyIsCiAgICAgICJsb29rIGRvd24gb24iOiAiZGEvMjAxOG5ld19iaXNoaV9vcmcucG5nIiwKICAgICAgIndoaXRlIGV5ZSI6ICJlZi8yMDE4bmV3X2xhbmRlbGluaV9vcmcucG5nIiwKICAgICAgImxlZnQgaHVtIjogIjQzLzIwMThuZXdfenVvaGVuZ2hlbmdfdGh1bWIucG5nIiwKICAgICAgInJpZ2h0IGh1bSI6ICJjMS8yMDE4bmV3X3lvdWhlbmdoZW5nX3RodW1iLnBuZyIsCiAgICAgIGNyYXp5OiAiMTcvMjAxOG5ld196aHVha3Vhbmdfb3JnLnBuZyIsCiAgICAgICJzY29sZCAiOiAiODcvMjAxOG5ld196aG91bWFfdGh1bWIucG5nIiwKICAgICAgImhpdCBvbiBmYWNlIjogImNiLzIwMThuZXdfZGFsaWFuX29yZy5wbmciLAogICAgICB3b3c6ICJhZS8yMDE4bmV3X2Rpbmdfb3JnLnBuZyIsCiAgICAgIGZhbjogIjg2LzIwMThuZXdfaHVmZW4wMl9vcmcucG5nIiwKICAgICAgbW9uZXk6ICJhMi8yMDE4bmV3X3FpYW5fdGh1bWIucG5nIiwKICAgICAgeWF3bjogIjU1LzIwMThuZXdfZGFoYXFpYW5fb3JnLnBuZyIsCiAgICAgIHNsZWVweTogIjNjLzIwMThuZXdfa3VuX3RodW1iLnBuZyIsCiAgICAgIHNsZWVwOiAiZTIvMjAxOG5ld19zaHVpamlhb190aHVtYi5wbmciLAogICAgICAid2F0ZXJtZWxvbiAiOiAiMDEvMjAxOG5ld19jaGlndWFfdGh1bWIucG5nIiwKICAgICAgZG9nZTogImExLzIwMThuZXdfZG9nZTAyX29yZy5wbmciLAogICAgICBkb2c6ICIyMi8yMDE4bmV3X2VyaGFfb3JnLnBuZyIsCiAgICAgIGNhdDogIjdiLzIwMThuZXdfbWlhb21pYW9fdGh1bWIucG5nIiwKICAgICAgdGh1bWI6ICJlNi8yMDE4bmV3X3phbl9vcmcucG5nIiwKICAgICAgZ29vZDogIjhhLzIwMThuZXdfZ29vZF9vcmcucG5nIiwKICAgICAgb2s6ICI0NS8yMDE4bmV3X29rX29yZy5wbmciLAogICAgICB5ZWFoOiAiMjkvMjAxOG5ld195ZV90aHVtYi5wbmciLAogICAgICAic2hhY2sgaGFuZCI6ICJlOS8yMDE4bmV3X3dvc2hvdV90aHVtYi5wbmciLAogICAgICBib3c6ICJlNy8yMDE4bmV3X3p1b3lpX29yZy5wbmciLAogICAgICBjb21lOiAiNDIvMjAxOG5ld19ndW9sYWlfdGh1bWIucG5nIiwKICAgICAgcHVuY2g6ICI4Ni8yMDE4bmV3X3F1YW50b3VfdGh1bWIucG5nIgogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCkgewogICAgZS5leHBvcnRzID0gewogICAgICBuaWNrOiAiTmlja05hbWUiLAogICAgICBtYWlsOiAiRS1NYWlsIiwKICAgICAgbGluazogIldlYnNpdGUoaHR0cDovLykiLAogICAgICBuaWNrRmFpbDogIk5pY2tOYW1lIGNhbm5vdCBiZSBsZXNzIHRoYW4gMyBieXRlcy4iLAogICAgICBtYWlsRmFpbDogIlBsZWFzZSBjb25maXJtIHlvdXIgZW1haWwgYWRkcmVzcy4iLAogICAgICBzb2ZhOiAiTm8gY29tbWVudCB5ZXQuIiwKICAgICAgc3VibWl0OiAiU3VibWl0IiwKICAgICAgcmVwbHk6ICJSZXBseSIsCiAgICAgIGNhbmNlbFJlcGx5OiAiQ2FuY2VsIHJlcGx5IiwKICAgICAgY29tbWVudHM6ICJDb21tZW50cyIsCiAgICAgIGNhbmNlbDogIkNhbmNlbCIsCiAgICAgIGNvbmZpcm06ICJDb25maXJtIiwKICAgICAgY29udGludWU6ICJDb250aW51ZSIsCiAgICAgIG1vcmU6ICJMb2FkIE1vcmUuLi4iLAogICAgICBwcmV2aWV3OiAiUHJldmlldyIsCiAgICAgIGVtb2ppOiAiRW1vamkiLAogICAgICBleHBhbmQ6ICJTZWUgbW9yZS4uLi4iLAogICAgICBzZWNvbmRzOiAic2Vjb25kcyBhZ28iLAogICAgICBtaW51dGVzOiAibWludXRlcyBhZ28iLAogICAgICBob3VyczogImhvdXJzIGFnbyIsCiAgICAgIGRheXM6ICJkYXlzIGFnbyIsCiAgICAgIG5vdzogImp1c3Qgbm93IiwKICAgICAgdXBsb2FkaW5nOiAiVXBsb2FkaW5nIC4uLiIsCiAgICAgIHVwbG9hZERvbmU6ICJVcGxvYWQgY29tcGxldGVkISIsCiAgICAgIGJ1c3k6ICJTdWJtaXQgaXMgYnVzeSwgcGxlYXNlIHdhaXQuLi4iLAogICAgICAiY29kZS05OCI6ICJWYWxpbmUgaW5pdGlhbGl6YXRpb24gZmFpbGVkLCBwbGVhc2UgY2hlY2sgeW91ciB2ZXJzaW9uIG9mIGF2LW1pbi5qcy4iLAogICAgICAiY29kZS05OSI6ICJWYWxpbmUgaW5pdGlhbGl6YXRpb24gZmFpbGVkLCBQbGVhc2UgY2hlY2sgdGhlIGBlbGAgZWxlbWVudCBpbiB0aGUgaW5pdCBtZXRob2QuIiwKICAgICAgImNvZGUtMTAwIjogIlZhbGluZSBpbml0aWFsaXphdGlvbiBmYWlsZWQsIFBsZWFzZSBjaGVjayB5b3VyIGFwcElkIGFuZCBhcHBLZXkuIiwKICAgICAgImNvZGUtMTQwIjogIlRoZSB0b3RhbCBudW1iZXIgb2YgQVBJIGNhbGxzIHRvZGF5IGhhcyBleGNlZWRlZCB0aGUgZGV2ZWxvcG1lbnQgdmVyc2lvbiBsaW1pdC4iLAogICAgICAiY29kZS00MDEiOiAiVW5hdXRob3JpemVkIG9wZXJhdGlvbiwgUGxlYXNlIGNoZWNrIHlvdXIgYXBwSWQgYW5kIGFwcEtleS4iLAogICAgICAiY29kZS00MDMiOiAiQWNjZXNzIGRlbmllZCBieSBBUEkgZG9tYWluIHdoaXRlIGxpc3QsIFBsZWFzZSBjaGVjayB5b3VyIHNlY3VyaXR5IGRvbWFpbi4iCiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0KSB7CiAgICBlLmV4cG9ydHMgPSB7CiAgICAgIG5pY2s6ICLjg4vjg4Pjgq/jg43jg7zjg6AiLAogICAgICBtYWlsOiAi44Oh44O844Or44Ki44OJ44Os44K5IiwKICAgICAgbGluazogIuOCteOCpOODiChodHRwOi8vKSIsCiAgICAgIG5pY2tGYWlsOiAiM+ODkOOCpOODiOS7peS4iuOBruODi+ODg+OCr+ODjeODvOODoOOCkuOBlOWFpeWKm+OBj+OBoOOBleOBhC4iLAogICAgICBtYWlsRmFpbDogIuODoeODvOODq+OCouODieODrOOCueOCkuOBlOeiuuiqjeOBj+OBoOOBleOBhC4iLAogICAgICBzb2ZhOiAi44Kz44Oh44Oz44OI44GX44G+44GX44KH44GGfiIsCiAgICAgIHN1Ym1pdDogIuaPkOWHuuOBmeOCiyIsCiAgICAgIHJlcGx5OiAi6L+U5L+h44GZ44KLIiwKICAgICAgY2FuY2VsUmVwbHk6ICLjgq3jg6Pjg7Pjgrvjg6siLAogICAgICBjb21tZW50czogIuOCs+ODoeODs+ODiCIsCiAgICAgIGNhbmNlbDogIuOCreODo+ODs+OCu+ODqyIsCiAgICAgIGNvbmZpcm06ICLnorroqo3jgZnjgosiLAogICAgICBjb250aW51ZTogIue7p+e7rSIsCiAgICAgIG1vcmU6ICLjgZXjgonjgavoqq3jgb/ovrzjgoAuLi4iLAogICAgICBwcmV2aWV3OiAi44OX44Os44OT44Ol44O8IiwKICAgICAgZW1vamk6ICLntbXmloflrZciLAogICAgICBleHBhbmQ6ICLjgoLjgaPjgajopovjgosiLAogICAgICBzZWNvbmRzOiAi56eS5YmNIiwKICAgICAgbWludXRlczogIuWIhuWJjSIsCiAgICAgIGhvdXJzOiAi5pmC6ZaT5YmNIiwKICAgICAgZGF5czogIuaXpeWJjSIsCiAgICAgIG5vdzogIuOBn+OBo+OBoOS7iiIsCiAgICAgIHVwbG9hZGluZzogIuOCouODg+ODl+ODreODvOODieS4rS4uLiIsCiAgICAgIHVwbG9hZERvbmU6ICLjgqLjg4Pjg5fjg63jg7zjg4njgYzlrozkuobjgZfjgb7jgZfjgZ8hIiwKICAgICAgYnVzeTogIjIwIOenkumWk+malOOBp+aPkOWHuuOBl+OBpuOBj+OBoOOBleOBhCAgICAuLi4iLAogICAgICAiY29kZS05OCI6ICLjg63jg7zjg4njgqjjg6njg7zjgafjgZnjgIJhdi1taW4uanMg44Gu44OQ44O844K444On44Oz44KS56K66KqN44GX44Gm44GP44Gg44GV44GELiIsCiAgICAgICJjb2RlLTk5IjogIuODreODvOODieOCqOODqeODvOOBp+OBmeOAgmluaXTjgavjgYLjgotgZWxg44Ko44Os44Oh44Oz44OI44KS56K66KqN44GP44Gg44GV44GELiIsCiAgICAgICJjb2RlLTEwMCI6ICLjg63jg7zjg4njgqjjg6njg7zjgafjgZnjgIJBcHBJZOOBqEFwcEtleeOCkueiuuiqjeOBj+OBoOOBleOBhC4iLAogICAgICAiY29kZS0xNDAiOiAi5LuK5pel44GuQVBJ44Kz44O844Or44Gu57eP5pWw44GM6ZaL55m644OQ44O844K444On44Oz44Gu5LiK6ZmQ44KS6LaF44GI44GfLiIsCiAgICAgICJjb2RlLTQwMSI6ICLmqKnpmZDjgYzliLbpmZDjgZXjgozjgabjgYTjgb7jgZnjgIJBcHBJZOOBqEFwcEtleeOCkueiuuiqjeOBj+OBoOOBleOBhC4iLAogICAgICAiY29kZS00MDMiOiAi44Ki44Kv44K744K544GMQVBJ44Gq44Gp44Gr5Yi26ZmQ44GV44KM44G+44GX44Gf44CB44OJ44Oh44Kk44Oz5ZCN44Gu44K744Kt44Ol44Oq44OG44Kj6Kit5a6a44KS56K66KqN44GP44Gg44GV44GEIgogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCkgewogICAgZS5leHBvcnRzID0gewogICAgICBuaWNrOiAi5pi156ewIiwKICAgICAgbWFpbDogIumCrueusSIsCiAgICAgIGxpbms6ICLnvZHlnYAoaHR0cDovLykiLAogICAgICBuaWNrRmFpbDogIuaYteensOS4jeiDveWwkeS6jjPkuKrlrZfnrKYiLAogICAgICBtYWlsRmFpbDogIuivt+Whq+WGmeato+ehrueahOmCruS7tuWcsOWdgCIsCiAgICAgIHNvZmE6ICLmnaXlj5Hor4TorrrlkKd+IiwKICAgICAgc3VibWl0OiAi5o+Q5LqkIiwKICAgICAgcmVwbHk6ICLlm57lpI0iLAogICAgICBjYW5jZWxSZXBseTogIuWPlua2iOWbnuWkjSIsCiAgICAgIGNvbW1lbnRzOiAi6K+E6K66IiwKICAgICAgY2FuY2VsOiAi5Y+W5raIIiwKICAgICAgY29uZmlybTogIuehruiupCIsCiAgICAgIGNvbnRpbnVlOiAi57un57utIiwKICAgICAgbW9yZTogIuWKoOi9veabtOWkmi4uLiIsCiAgICAgIHByZXZpZXc6ICLpooTop4giLAogICAgICBlbW9qaTogIuihqOaDhSIsCiAgICAgIGV4cGFuZDogIuafpeeci+abtOWkmi4uLiIsCiAgICAgIHNlY29uZHM6ICLnp5LliY0iLAogICAgICBtaW51dGVzOiAi5YiG6ZKf5YmNIiwKICAgICAgaG91cnM6ICLlsI/ml7bliY0iLAogICAgICBkYXlzOiAi5aSp5YmNIiwKICAgICAgbm93OiAi5Yia5YiaIiwKICAgICAgdXBsb2FkaW5nOiAi5q2j5Zyo5Lyg6L6TLi4uIiwKICAgICAgdXBsb2FkRG9uZTogIuS8oOi+k+WujOaIkCEiLAogICAgICBidXN5OiAi5pON5L2c6aKR57mB77yM6K+356iN5YCZ5YaN6K+VLi4uIiwKICAgICAgImNvZGUtOTgiOiAiVmFsaW5lIOWIneWni+WMluWksei0pe+8jOivt+ajgOafpSBhdi1taW4uanMg54mI5pysIiwKICAgICAgImNvZGUtOTkiOiAiVmFsaW5lIOWIneWni+WMluWksei0pe+8jOivt+ajgOafpWluaXTkuK3nmoRgZWxg5YWD57SgLiIsCiAgICAgICJjb2RlLTEwMCI6ICJWYWxpbmUg5Yid5aeL5YyW5aSx6LSl77yM6K+35qOA5p+l5L2g55qEQXBwSWTlkoxBcHBLZXkuIiwKICAgICAgImNvZGUtMTQwIjogIuS7iuaXpSBBUEkg6LCD55So5oC75qyh5pWw5bey6LaF6L+H5byA5Y+R54mI6ZmQ5Yi2LiIsCiAgICAgICJjb2RlLTQwMSI6ICLmnKrnu4/mjojmnYPnmoTmk43kvZzvvIzor7fmo4Dmn6XkvaDnmoRBcHBJZOWSjEFwcEtleS4iLAogICAgICAiY29kZS00MDMiOiAi6K6/6Zeu6KKrQVBJ5Z+f5ZCN55m95ZCN5Y2V5ouS57ud77yM6K+35qOA5p+l5L2g55qE5a6J5YWo5Z+f5ZCN6K6+572uLiIKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQpIHsKICAgIGUuZXhwb3J0cyA9IHsKICAgICAgbmljazogIuaaseeosSIsCiAgICAgIG1haWw6ICLpg7XnrrEiLAogICAgICBsaW5rOiAi57ay5Z2AKGh0dHA6Ly8pIiwKICAgICAgbmlja0ZhaWw6ICLmmLXnqLHkuI3og73lsJHmlrwz5YCL5a2X56ymIiwKICAgICAgbWFpbEZhaWw6ICLoq4vloavlr6vmraPnorrnmoTpg7Xku7blnLDlnYAiLAogICAgICBzb2ZhOiAi5L6G55m86KmV6KuW5ZCnfiIsCiAgICAgIHN1Ym1pdDogIuaPkOS6pCIsCiAgICAgIHJlcGx5OiAi5Zue6KaGIiwKICAgICAgY2FuY2VsUmVwbHk6ICLlj5bmtojlm57opoYiLAogICAgICBjb21tZW50czogIuipleirliIsCiAgICAgIGNhbmNlbDogIuWPlua2iCIsCiAgICAgIGNvbmZpcm06ICLnorroqo0iLAogICAgICBjb250aW51ZTogIue5vOe6jCIsCiAgICAgIG1vcmU6ICLliqDovInmm7TlpJouLi4iLAogICAgICBwcmV2aWV3OiAi6aCQ6Ka9IiwKICAgICAgZW1vamk6ICLooajmg4UiLAogICAgICBleHBhbmQ6ICLmn6XnnIvmm7TlpJouLi4iLAogICAgICBzZWNvbmRzOiAi56eS5YmNIiwKICAgICAgbWludXRlczogIuWIhumQmOWJjSIsCiAgICAgIGhvdXJzOiAi5bCP5pmC5YmNIiwKICAgICAgZGF5czogIuWkqeWJjSIsCiAgICAgIG5vdzogIuWJm+WJmyIsCiAgICAgIHVwbG9hZGluZzogIuato+WcqOS4iuWCsy4uLiIsCiAgICAgIHVwbG9hZERvbmU6ICLkuIrlgrPlrozmiJAhIiwKICAgICAgYnVzeTogIuaTjeS9nOmgu+e5ge+8jOiri+eojeWAmeWGjeippi4uLiIsCiAgICAgICJjb2RlLTk4IjogIlZhbGluZSDliJ3lp4vljJblpLHmlZfvvIzoq4vmqqLmn6UgYXYtbWluLmpzIOeJiOacrCIsCiAgICAgICJjb2RlLTk5IjogIlZhbGluZSDliJ3lp4vljJblpLHmlZfvvIzoq4vmqqLmn6Vpbml05Lit55qEYGVsYOWFg+e0oC4iLAogICAgICAiY29kZS0xMDAiOiAiVmFsaW5lIOWIneWni+WMluWkseaVl++8jOiri+aqouafpeS9oOeahEFwcElk5ZKMQXBwS2V5LiIsCiAgICAgICJjb2RlLTE0MCI6ICLku4rml6UgQVBJIOiqv+eUqOe4veasoeaVuOW3sui2hemBjumWi+eZvOeJiOmZkOWIti4iLAogICAgICAiY29kZS00MDEiOiAi5pyq57aT5o6I5qyK55qE5pON5L2c77yM6KuL5qqi5p+l5L2g55qEQXBwSWTlkoxBcHBLZXkuIiwKICAgICAgImNvZGUtNDAzIjogIuioquWVj+iiq0FQSeWfn+WQjeeZveWQjeWWruaLkue1le+8jOiri+aqouafpeS9oOeahOWuieWFqOWfn+WQjeioree9ri4iCiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0KSB7fSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgIHZhciByID0gbigxMDQpOwogICAgInN0cmluZyIgPT0gdHlwZW9mIHIgJiYgKHIgPSBbW2UuaSwgciwgIiJdXSk7CiAgICB2YXIgaSA9IHt9OwogICAgaS50cmFuc2Zvcm0gPSB2b2lkIDA7CiAgICBuKDEwNikociwgaSk7CiAgICByLmxvY2FscyAmJiAoZS5leHBvcnRzID0gci5sb2NhbHMpOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICB0ID0gbigxMDUpKCExKSwgdC5wdXNoKFtlLmksICcudltkYXRhLWNsYXNzPXZde2ZvbnQtc2l6ZToxNnB4O3RleHQtYWxpZ246bGVmdH0udltkYXRhLWNsYXNzPXZdICp7LXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O2xpbmUtaGVpZ2h0OjEuNzV9LnZbZGF0YS1jbGFzcz12XSAudmlucHV0LC52W2RhdGEtY2xhc3M9dl0gLnZlZGl0b3IsLnZbZGF0YS1jbGFzcz12XSBwLC52W2RhdGEtY2xhc3M9dl0gcHJlIGNvZGUsLnZbZGF0YS1jbGFzcz12XSAuc3RhdHVzLWJhcntjb2xvcjojNTU1fS52W2RhdGEtY2xhc3M9dl0gLnZ0aW1lLC52W2RhdGEtY2xhc3M9dl0gLnZzeXN7Y29sb3I6I2IzYjNiM30udltkYXRhLWNsYXNzPXZdIC50ZXh0LXJpZ2h0e3RleHQtYWxpZ246cmlnaHR9LnZbZGF0YS1jbGFzcz12XSAudGV4dC1jZW50ZXJ7dGV4dC1hbGlnbjpjZW50ZXJ9LnZbZGF0YS1jbGFzcz12XSBpbWd7bWF4LXdpZHRoOjEwMCU7Ym9yZGVyOm5vbmV9LnZbZGF0YS1jbGFzcz12XSBocnttYXJnaW46LjgyNWVtIDA7Ym9yZGVyLWNvbG9yOiNmNmY2ZjY7Ym9yZGVyLXN0eWxlOmRhc2hlZH0udltkYXRhLWNsYXNzPXZdLmhpZGUtYXZhdGFyIC52aW1ne2Rpc3BsYXk6bm9uZX0udltkYXRhLWNsYXNzPXZdIGF7cG9zaXRpb246cmVsYXRpdmU7Y3Vyc29yOnBvaW50ZXI7Y29sb3I6IzFhYmM5Yzt0ZXh0LWRlY29yYXRpb246bm9uZTtkaXNwbGF5OmlubGluZS1ibG9ja30udltkYXRhLWNsYXNzPXZdIGE6aG92ZXJ7Y29sb3I6I2Q3MTkxYX0udltkYXRhLWNsYXNzPXZdIHByZSwudltkYXRhLWNsYXNzPXZdIGNvZGV7YmFja2dyb3VuZC1jb2xvcjojZjhmOGY4O3BhZGRpbmc6LjJlbSAuNGVtO2JvcmRlci1yYWRpdXM6M3B4O2ZvbnQtc2l6ZTo4NSU7bWFyZ2luOjB9LnZbZGF0YS1jbGFzcz12XSBwcmV7cGFkZGluZzoxMHB4O292ZXJmbG93OmF1dG87bGluZS1oZWlnaHQ6MS40NX0udltkYXRhLWNsYXNzPXZdIHByZSBjb2Rle3BhZGRpbmc6MDtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O3doaXRlLXNwYWNlOnByZS13cmFwO3dvcmQtYnJlYWs6a2VlcC1hbGx9LnZbZGF0YS1jbGFzcz12XSBibG9ja3F1b3Rle2NvbG9yOiM2NjY7bWFyZ2luOi41ZW0gMDtwYWRkaW5nOjAgMCAwIDFlbTtib3JkZXItbGVmdDo4cHggc29saWQgcmdiYSgyMzgsMjM4LDIzOCwuNSl9LnZbZGF0YS1jbGFzcz12XSAudmlucHV0e2JvcmRlcjpub25lO3Jlc2l6ZTpub25lO291dGxpbmU6bm9uZTtwYWRkaW5nOjEwcHggNXB4O21heC13aWR0aDoxMDAlO2ZvbnQtc2l6ZTouNzc1ZW07LXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94fS52W2RhdGEtY2xhc3M9dl0gaW5wdXRbdHlwZT1jaGVja2JveF0sLnZbZGF0YS1jbGFzcz12XSBpbnB1dFt0eXBlPXJhZGlvXXtkaXNwbGF5OmlubGluZS1ibG9jazt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7bWFyZ2luLXRvcDotMnB4fS52W2RhdGEtY2xhc3M9dl0gLnZpY29ue2N1cnNvcjpwb2ludGVyO2Rpc3BsYXk6aW5saW5lLWJsb2NrO292ZXJmbG93OmhpZGRlbjtmaWxsOiM1NTU7dmVydGljYWwtYWxpZ246bWlkZGxlfS52W2RhdGEtY2xhc3M9dl0gLnZpY29uKy52aWNvbnttYXJnaW4tbGVmdDoxMHB4fS52W2RhdGEtY2xhc3M9dl0gLnZpY29uLmFjdGl2ZWR7ZmlsbDojNjZiMWZmfS52W2RhdGEtY2xhc3M9dl0gLnZyb3d7Zm9udC1zaXplOjA7cGFkZGluZzoxMHB4IDB9LnZbZGF0YS1jbGFzcz12XSAudnJvdyAudmNvbHtkaXNwbGF5OmlubGluZS1ibG9jazt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOjE0cHh9LnZbZGF0YS1jbGFzcz12XSAudnJvdyAudmNvbC52Y29sLTIwe3dpZHRoOjIwJX0udltkYXRhLWNsYXNzPXZdIC52cm93IC52Y29sLnZjb2wtMzB7d2lkdGg6MzAlfS52W2RhdGEtY2xhc3M9dl0gLnZyb3cgLnZjb2wudmNvbC00MHt3aWR0aDo0MCV9LnZbZGF0YS1jbGFzcz12XSAudnJvdyAudmNvbC52Y29sLTUwe3dpZHRoOjUwJX0udltkYXRhLWNsYXNzPXZdIC52cm93IC52Y29sLnZjb2wtNjB7d2lkdGg6NjAlfS52W2RhdGEtY2xhc3M9dl0gLnZyb3cgLnZjb2wudmNvbC03MHt3aWR0aDo3MCV9LnZbZGF0YS1jbGFzcz12XSAudnJvdyAudmNvbC52Y29sLTgwe3dpZHRoOjgwJX0udltkYXRhLWNsYXNzPXZdIC52cm93IC52Y29sLnZjdHJse2ZvbnQtc2l6ZToxMnB4fS52W2RhdGEtY2xhc3M9dl0gLnZlbW9qaSwudltkYXRhLWNsYXNzPXZdIC5lbW9qaXt3aWR0aDoyNnB4O2hlaWdodDoyNnB4O292ZXJmbG93OmhpZGRlbjt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7bWFyZ2luOjAgMXB4O2Rpc3BsYXk6aW5saW5lLWJsb2NrfS52W2RhdGEtY2xhc3M9dl0gLnZ3cmFwe2JvcmRlcjoxcHggc29saWQgI2YwZjBmMDtib3JkZXItcmFkaXVzOjRweDttYXJnaW4tYm90dG9tOjEwcHg7b3ZlcmZsb3c6aGlkZGVuO3Bvc2l0aW9uOnJlbGF0aXZlO3BhZGRpbmc6MTBweH0udltkYXRhLWNsYXNzPXZdIC52d3JhcCBpbnB1dHtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50fS52W2RhdGEtY2xhc3M9dl0gLnZ3cmFwIC52ZWRpdHtwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nLXRvcDoxMHB4fS52W2RhdGEtY2xhc3M9dl0gLnZ3cmFwIC5jYW5jZWwtcmVwbHktYnRue3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjVweDt0b3A6NXB4O2N1cnNvcjpwb2ludGVyfS52W2RhdGEtY2xhc3M9dl0gLnZ3cmFwIC52ZW1vamlze2Rpc3BsYXk6bm9uZTtmb250LXNpemU6MThweDttYXgtaGVpZ2h0OjE0NXB4O292ZXJmbG93OmF1dG87cGFkZGluZy1ib3R0b206MTBweDstd2Via2l0LWJveC1zaGFkb3c6MHB4IDAgMXB4ICNmMGYwZjA7Ym94LXNoYWRvdzowcHggMCAxcHggI2YwZjBmMH0udltkYXRhLWNsYXNzPXZdIC52d3JhcCAudmVtb2ppcyBpe2ZvbnQtc3R5bGU6bm9ybWFsO3BhZGRpbmctdG9wOjdweDt3aWR0aDozNnB4O2N1cnNvcjpwb2ludGVyO3RleHQtYWxpZ246Y2VudGVyO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3ZlcnRpY2FsLWFsaWduOm1pZGRsZX0udltkYXRhLWNsYXNzPXZdIC52d3JhcCAudnByZXZpZXd7cGFkZGluZzo3cHg7LXdlYmtpdC1ib3gtc2hhZG93OjBweCAwIDFweCAjZjBmMGYwO2JveC1zaGFkb3c6MHB4IDAgMXB4ICNmMGYwZjB9LnZbZGF0YS1jbGFzcz12XSAudndyYXAgLnZoZWFkZXIgLnZpbnB1dHt3aWR0aDozMy4zMyU7Ym9yZGVyLWJvdHRvbToxcHggI2RlZGVkZSBkYXNoZWR9LnZbZGF0YS1jbGFzcz12XSAudndyYXAgLnZoZWFkZXIuaXRlbTIgLnZpbnB1dHt3aWR0aDo1MCV9LnZbZGF0YS1jbGFzcz12XSAudndyYXAgLnZoZWFkZXIuaXRlbTEgLnZpbnB1dHt3aWR0aDoxMDAlfS52W2RhdGEtY2xhc3M9dl0gLnZ3cmFwIC52aGVhZGVyIC52aW5wdXQ6Zm9jdXN7Ym9yZGVyLWJvdHRvbS1jb2xvcjojZWI1MDU1fUBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDUyMHB4KXsudltkYXRhLWNsYXNzPXZdIC52d3JhcCAudmhlYWRlciAudmlucHV0e3dpZHRoOjEwMCV9LnZbZGF0YS1jbGFzcz12XSAudndyYXAgLnZoZWFkZXIuaXRlbTIgLnZpbnB1dHt3aWR0aDoxMDAlfX0udltkYXRhLWNsYXNzPXZdIC52cG93ZXJ7Y29sb3I6Izk5OTtmb250LXNpemU6Ljc1ZW07cGFkZGluZzouNWVtIDB9LnZbZGF0YS1jbGFzcz12XSAudnBvd2VyIGF7Zm9udC1zaXplOi43NWVtfS52W2RhdGEtY2xhc3M9dl0gLnZjb3VudHtwYWRkaW5nOjVweDtmb250LXdlaWdodDo2MDA7Zm9udC1zaXplOjEuMjVlbX0udltkYXRhLWNsYXNzPXZdIHVsLC52W2RhdGEtY2xhc3M9dl0gb2x7cGFkZGluZzowO21hcmdpbi1sZWZ0OjEuMjVlbX0udltkYXRhLWNsYXNzPXZdIC50eHQtY2VudGVye3RleHQtYWxpZ246Y2VudGVyfS52W2RhdGEtY2xhc3M9dl0gLnR4dC1yaWdodHt0ZXh0LWFsaWduOnJpZ2h0fS52W2RhdGEtY2xhc3M9dl0gLnZlZGl0b3J7d2lkdGg6MTAwJTttaW4taGVpZ2h0OjguNzVlbTtmb250LXNpemU6Ljg3NWVtO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7cmVzaXplOnZlcnRpY2FsOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjI1cyBlYXNlO3RyYW5zaXRpb246YWxsIC4yNXMgZWFzZX0udltkYXRhLWNsYXNzPXZdIC52YnRuey13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvbjouNHM7dHJhbnNpdGlvbi1kdXJhdGlvbjouNHM7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6IzU1NTtib3JkZXI6MXB4IHNvbGlkICNlZGVkZWQ7Ym9yZGVyLXJhZGl1czouM2VtO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7bWFyZ2luLWJvdHRvbTowO2ZvbnQtd2VpZ2h0OjQwMDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7LW1zLXRvdWNoLWFjdGlvbjptYW5pcHVsYXRpb247dG91Y2gtYWN0aW9uOm1hbmlwdWxhdGlvbjtjdXJzb3I6cG9pbnRlcjt3aGl0ZS1zcGFjZTpub3dyYXA7cGFkZGluZzouNWVtIDEuMjVlbTtmb250LXNpemU6Ljg3NWVtO2xpbmUtaGVpZ2h0OjEuNDI4NTcxNDM7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO291dGxpbmU6bm9uZX0udltkYXRhLWNsYXNzPXZdIC52YnRuKy52YnRue21hcmdpbi1sZWZ0OjEuMjVlbX0udltkYXRhLWNsYXNzPXZdIC52YnRuOmFjdGl2ZSwudltkYXRhLWNsYXNzPXZdIC52YnRuOmhvdmVye2NvbG9yOiMzMDkwZTQ7Ym9yZGVyLWNvbG9yOiMzMDkwZTR9LnZbZGF0YS1jbGFzcz12XSAudmJ0bjpkaXNhYmxlZHtib3JkZXItY29sb3I6I2UxZTFlMTtjb2xvcjojZTFlMWUxO2JhY2tncm91bmQtY29sb3I6I2ZkZmFmYTtjdXJzb3I6bm90LWFsbG93ZWR9LnZbZGF0YS1jbGFzcz12XSAudmVtcHR5e3BhZGRpbmc6MS4yNWVtO3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOiM1NTU7b3ZlcmZsb3c6YXV0b30udltkYXRhLWNsYXNzPXZdIC52c3lze2Rpc3BsYXk6aW5saW5lLWJsb2NrO3BhZGRpbmc6LjJlbSAuNWVtO2ZvbnQtc2l6ZTouNzVlbTtib3JkZXItcmFkaXVzOi4yZW07bWFyZ2luLXJpZ2h0Oi4zZW19QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNTIwcHgpey52W2RhdGEtY2xhc3M9dl0gLnZzeXN7ZGlzcGxheTpub25lfX0udltkYXRhLWNsYXNzPXZdIC52Y2FyZHN7d2lkdGg6MTAwJX0udltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJke3BhZGRpbmctdG9wOjEuMjVlbTtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrfS52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmQ6YWZ0ZXJ7Y29udGVudDoiIjtjbGVhcjpib3RoO2Rpc3BsYXk6YmxvY2t9LnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmltZ3t3aWR0aDozLjEyNWVtO2hlaWdodDozLjEyNWVtO2Zsb2F0OmxlZnQ7Ym9yZGVyLXJhZGl1czo1MCU7bWFyZ2luLXJpZ2h0Oi43NTI1ZW07Ym9yZGVyOjFweCBzb2xpZCAjZjVmNWY1O3BhZGRpbmc6LjEyNWVtfUBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDcyMHB4KXsudltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJkIC52aW1ne3dpZHRoOjIuNWVtO2hlaWdodDoyLjVlbX19LnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmhlYWR7bGluZS1oZWlnaHQ6MS41O21hcmdpbi10b3A6MH0udltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJkIC52aGVhZCAudm5pY2t7cG9zaXRpb246cmVsYXRpdmU7Zm9udC1zaXplOi44NzVlbTtmb250LXdlaWdodDo1MDA7bWFyZ2luLXJpZ2h0Oi44NzVlbTtjdXJzb3I6cG9pbnRlcjt0ZXh0LWRlY29yYXRpb246bm9uZTtkaXNwbGF5OmlubGluZS1ibG9ja30udltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJkIC52aGVhZCAudm5pY2s6aG92ZXJ7Y29sb3I6I2Q3MTkxYX0udltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJkIC52aHtvdmVyZmxvdzpoaWRkZW47cGFkZGluZy1ib3R0b206LjVlbTtib3JkZXItYm90dG9tOjFweCBkYXNoZWQgI2Y1ZjVmNX0udltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJkIC52aCAudnRpbWV7Zm9udC1zaXplOi43NWVtO21hcmdpbi1yaWdodDouODc1ZW19LnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmggLnZtZXRhe2xpbmUtaGVpZ2h0OjE7cG9zaXRpb246cmVsYXRpdmV9LnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmggLnZtZXRhIC52YXR7Zm9udC1zaXplOi44MTI1ZW07Y29sb3I6I2VmMmYxMTtjdXJzb3I6cG9pbnRlcjtmbG9hdDpyaWdodH0udltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJkOmxhc3QtY2hpbGQgLnZoe2JvcmRlci1ib3R0b206bm9uZX0udltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJkIC52Y29udGVudHt3b3JkLXdyYXA6YnJlYWstd29yZDt3b3JkLWJyZWFrOmJyZWFrLWFsbDtmb250LXNpemU6Ljg3NWVtO2xpbmUtaGVpZ2h0OjI7cG9zaXRpb246cmVsYXRpdmU7bWFyZ2luLWJvdHRvbTouNzVlbTtwYWRkaW5nLXRvcDouNjI1ZW19LnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmNvbnRlbnQuZXhwYW5ke2N1cnNvcjpwb2ludGVyO21heC1oZWlnaHQ6OGVtO292ZXJmbG93OmhpZGRlbn0udltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJkIC52Y29udGVudC5leHBhbmQ6OmJlZm9yZXtkaXNwbGF5OmJsb2NrO2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MTAwJTtsZWZ0OjA7dG9wOjA7Ym90dG9tOjMuMTVlbTtiYWNrZ3JvdW5kOi13ZWJraXQtZ3JhZGllbnQobGluZWFyLCBsZWZ0IHRvcCwgbGVmdCBib3R0b20sIGZyb20ocmdiYSgyNTUsIDI1NSwgMjU1LCAwKSksIHRvKHJnYmEoMjU1LCAyNTUsIDI1NSwgMC45KSkpO2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KDE4MGRlZywgcmdiYSgyNTUsIDI1NSwgMjU1LCAwKSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjkpKTt6LWluZGV4Ojk5OX0udltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJkIC52Y29udGVudC5leHBhbmQ6OmFmdGVye2Rpc3BsYXk6YmxvY2s7Y29udGVudDphdHRyKGRhdGEtZXhwYW5kKTt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojODI4NTg2O3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCU7aGVpZ2h0OjMuMTVlbTtsaW5lLWhlaWdodDozLjE1ZW07bGVmdDowO2JvdHRvbTowO3otaW5kZXg6OTk5O2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwuOSl9LnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudnF1b3Rle3BhZGRpbmctbGVmdDoxZW07Ym9yZGVyLWxlZnQ6MXB4IGRhc2hlZCByZ2JhKDIzOCwyMzgsMjM4LC41KX0udltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJkIC52cXVvdGUgLnZpbWd7d2lkdGg6Mi4yMjVlbTtoZWlnaHQ6Mi4yMjVlbX0udltkYXRhLWNsYXNzPXZdIC52cGFnZSAudm1vcmV7bWFyZ2luOjFlbSAwfS52W2RhdGEtY2xhc3M9dl0gLmNsZWFye2NvbnRlbnQ6IiI7ZGlzcGxheTpibG9jaztjbGVhcjpib3RofUAtd2Via2l0LWtleWZyYW1lcyBzcGluezAley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDBkZWcpfTEwMCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDM2MGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpfX1Aa2V5ZnJhbWVzIHNwaW57MCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMGRlZyl9MTAwJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDM2MGRlZyl9fUAtd2Via2l0LWtleWZyYW1lcyBwdWxzZXs1MCV7YmFja2dyb3VuZDojZGNkY2RjfX1Aa2V5ZnJhbWVzIHB1bHNlezUwJXtiYWNrZ3JvdW5kOiNkY2RjZGN9fS52W2RhdGEtY2xhc3M9dl0gLnZzcGlubmVye3dpZHRoOjIycHg7aGVpZ2h0OjIycHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7Ym9yZGVyOjZweCBkb3VibGUgI2EwYTBhMDtib3JkZXItdG9wLWNvbG9yOnRyYW5zcGFyZW50O2JvcmRlci1ib3R0b20tY29sb3I6dHJhbnNwYXJlbnQ7Ym9yZGVyLXJhZGl1czo1MCU7LXdlYmtpdC1hbmltYXRpb246c3BpbiAxcyBpbmZpbml0ZSBsaW5lYXI7YW5pbWF0aW9uOnNwaW4gMXMgaW5maW5pdGUgbGluZWFyO3Bvc2l0aW9uOnJlbGF0aXZlO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTttYXJnaW46MCA1cHh9W2RhdGEtdGhlbWU9ZGFya10gLnZbZGF0YS1jbGFzcz12XSAudmlucHV0LFtkYXRhLXRoZW1lPWRhcmtdIC52W2RhdGEtY2xhc3M9dl0gLnZlZGl0b3IsW2RhdGEtdGhlbWU9ZGFya10gLnZbZGF0YS1jbGFzcz12XSBwLFtkYXRhLXRoZW1lPWRhcmtdIC52W2RhdGEtY2xhc3M9dl0gcHJlIGNvZGUsW2RhdGEtdGhlbWU9ZGFya10gLnZbZGF0YS1jbGFzcz12XSAuc3RhdHVzLWJhciwuZGFyayAudltkYXRhLWNsYXNzPXZdIC52aW5wdXQsLmRhcmsgLnZbZGF0YS1jbGFzcz12XSAudmVkaXRvciwuZGFyayAudltkYXRhLWNsYXNzPXZdIHAsLmRhcmsgLnZbZGF0YS1jbGFzcz12XSBwcmUgY29kZSwuZGFyayAudltkYXRhLWNsYXNzPXZdIC5zdGF0dXMtYmFyLC50aGVtZV9fZGFyayAudltkYXRhLWNsYXNzPXZdIC52aW5wdXQsLnRoZW1lX19kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZlZGl0b3IsLnRoZW1lX19kYXJrIC52W2RhdGEtY2xhc3M9dl0gcCwudGhlbWVfX2RhcmsgLnZbZGF0YS1jbGFzcz12XSBwcmUgY29kZSwudGhlbWVfX2RhcmsgLnZbZGF0YS1jbGFzcz12XSAuc3RhdHVzLWJhciwubmlnaHQgLnZbZGF0YS1jbGFzcz12XSAudmlucHV0LC5uaWdodCAudltkYXRhLWNsYXNzPXZdIC52ZWRpdG9yLC5uaWdodCAudltkYXRhLWNsYXNzPXZdIHAsLm5pZ2h0IC52W2RhdGEtY2xhc3M9dl0gcHJlIGNvZGUsLm5pZ2h0IC52W2RhdGEtY2xhc3M9dl0gLnN0YXR1cy1iYXJ7Y29sb3I6I2IyYjJiNX1bZGF0YS10aGVtZT1kYXJrXSAudltkYXRhLWNsYXNzPXZdIC52dGltZSxbZGF0YS10aGVtZT1kYXJrXSAudltkYXRhLWNsYXNzPXZdIC52c3lzLC5kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZ0aW1lLC5kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZzeXMsLnRoZW1lX19kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZ0aW1lLC50aGVtZV9fZGFyayAudltkYXRhLWNsYXNzPXZdIC52c3lzLC5uaWdodCAudltkYXRhLWNsYXNzPXZdIC52dGltZSwubmlnaHQgLnZbZGF0YS1jbGFzcz12XSAudnN5c3tjb2xvcjojOTI5Mjk4fVtkYXRhLXRoZW1lPWRhcmtdIC52W2RhdGEtY2xhc3M9dl0gcHJlLFtkYXRhLXRoZW1lPWRhcmtdIC52W2RhdGEtY2xhc3M9dl0gY29kZSxbZGF0YS10aGVtZT1kYXJrXSAudltkYXRhLWNsYXNzPXZdIHByZSBjb2RlLC5kYXJrIC52W2RhdGEtY2xhc3M9dl0gcHJlLC5kYXJrIC52W2RhdGEtY2xhc3M9dl0gY29kZSwuZGFyayAudltkYXRhLWNsYXNzPXZdIHByZSBjb2RlLC50aGVtZV9fZGFyayAudltkYXRhLWNsYXNzPXZdIHByZSwudGhlbWVfX2RhcmsgLnZbZGF0YS1jbGFzcz12XSBjb2RlLC50aGVtZV9fZGFyayAudltkYXRhLWNsYXNzPXZdIHByZSBjb2RlLC5uaWdodCAudltkYXRhLWNsYXNzPXZdIHByZSwubmlnaHQgLnZbZGF0YS1jbGFzcz12XSBjb2RlLC5uaWdodCAudltkYXRhLWNsYXNzPXZdIHByZSBjb2Rle2NvbG9yOiM5MjkyOTg7YmFja2dyb3VuZC1jb2xvcjojMTUxNDE0fVtkYXRhLXRoZW1lPWRhcmtdIC52W2RhdGEtY2xhc3M9dl0gLnZ3cmFwLC5kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZ3cmFwLC50aGVtZV9fZGFyayAudltkYXRhLWNsYXNzPXZdIC52d3JhcCwubmlnaHQgLnZbZGF0YS1jbGFzcz12XSAudndyYXB7Ym9yZGVyLWNvbG9yOiNiMmIyYjV9W2RhdGEtdGhlbWU9ZGFya10gLnZbZGF0YS1jbGFzcz12XSAudmljb24sLmRhcmsgLnZbZGF0YS1jbGFzcz12XSAudmljb24sLnRoZW1lX19kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZpY29uLC5uaWdodCAudltkYXRhLWNsYXNzPXZdIC52aWNvbntmaWxsOiNiMmIyYjV9W2RhdGEtdGhlbWU9ZGFya10gLnZbZGF0YS1jbGFzcz12XSAudmljb24uYWN0aXZlZCwuZGFyayAudltkYXRhLWNsYXNzPXZdIC52aWNvbi5hY3RpdmVkLC50aGVtZV9fZGFyayAudltkYXRhLWNsYXNzPXZdIC52aWNvbi5hY3RpdmVkLC5uaWdodCAudltkYXRhLWNsYXNzPXZdIC52aWNvbi5hY3RpdmVke2ZpbGw6IzY2YjFmZn1bZGF0YS10aGVtZT1kYXJrXSAudltkYXRhLWNsYXNzPXZdIC52YnRuLC5kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZidG4sLnRoZW1lX19kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZidG4sLm5pZ2h0IC52W2RhdGEtY2xhc3M9dl0gLnZidG57Y29sb3I6I2IyYjJiNTtib3JkZXItY29sb3I6I2IyYjJiNX1bZGF0YS10aGVtZT1kYXJrXSAudltkYXRhLWNsYXNzPXZdIC52YnRuOmhvdmVyLC5kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZidG46aG92ZXIsLnRoZW1lX19kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZidG46aG92ZXIsLm5pZ2h0IC52W2RhdGEtY2xhc3M9dl0gLnZidG46aG92ZXJ7Y29sb3I6IzY2YjFmZjtib3JkZXItY29sb3I6IzY2YjFmZn1bZGF0YS10aGVtZT1kYXJrXSAudltkYXRhLWNsYXNzPXZdIGE6aG92ZXIsLmRhcmsgLnZbZGF0YS1jbGFzcz12XSBhOmhvdmVyLC50aGVtZV9fZGFyayAudltkYXRhLWNsYXNzPXZdIGE6aG92ZXIsLm5pZ2h0IC52W2RhdGEtY2xhc3M9dl0gYTpob3Zlcntjb2xvcjojZDcxOTFhfVtkYXRhLXRoZW1lPWRhcmtdIC52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmQgLnZjb250ZW50LmV4cGFuZDo6YmVmb3JlLC5kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmQgLnZjb250ZW50LmV4cGFuZDo6YmVmb3JlLC50aGVtZV9fZGFyayAudltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJkIC52Y29udGVudC5leHBhbmQ6OmJlZm9yZSwubmlnaHQgLnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmNvbnRlbnQuZXhwYW5kOjpiZWZvcmV7YmFja2dyb3VuZDotd2Via2l0LWdyYWRpZW50KGxpbmVhciwgbGVmdCB0b3AsIGxlZnQgYm90dG9tLCBmcm9tKHJnYmEoMCwgMCwgMCwgMC4zKSksIHRvKHJnYmEoMCwgMCwgMCwgMC43KSkpO2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KDE4MGRlZywgcmdiYSgwLCAwLCAwLCAwLjMpLCByZ2JhKDAsIDAsIDAsIDAuNykpfVtkYXRhLXRoZW1lPWRhcmtdIC52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmQgLnZjb250ZW50LmV4cGFuZDo6YWZ0ZXIsLmRhcmsgLnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmNvbnRlbnQuZXhwYW5kOjphZnRlciwudGhlbWVfX2RhcmsgLnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmNvbnRlbnQuZXhwYW5kOjphZnRlciwubmlnaHQgLnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmNvbnRlbnQuZXhwYW5kOjphZnRlcntiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjcpfUBtZWRpYShwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyayl7LnZbZGF0YS1jbGFzcz12XSAudmlucHV0LC52W2RhdGEtY2xhc3M9dl0gLnZlZGl0b3IsLnZbZGF0YS1jbGFzcz12XSBwLC52W2RhdGEtY2xhc3M9dl0gcHJlIGNvZGUsLnZbZGF0YS1jbGFzcz12XSAuc3RhdHVzLWJhcntjb2xvcjojYjJiMmI1fS52W2RhdGEtY2xhc3M9dl0gLnZ0aW1lLC52W2RhdGEtY2xhc3M9dl0gLnZzeXN7Y29sb3I6IzkyOTI5OH0udltkYXRhLWNsYXNzPXZdIHByZSwudltkYXRhLWNsYXNzPXZdIGNvZGUsLnZbZGF0YS1jbGFzcz12XSBwcmUgY29kZXtjb2xvcjojOTI5Mjk4O2JhY2tncm91bmQtY29sb3I6IzE1MTQxNH0udltkYXRhLWNsYXNzPXZdIC52d3JhcHtib3JkZXItY29sb3I6I2IyYjJiNX0udltkYXRhLWNsYXNzPXZdIC52aWNvbntmaWxsOiNiMmIyYjV9LnZbZGF0YS1jbGFzcz12XSAudmljb24uYWN0aXZlZHtmaWxsOiM2NmIxZmZ9LnZbZGF0YS1jbGFzcz12XSAudmJ0bntjb2xvcjojYjJiMmI1O2JvcmRlci1jb2xvcjojYjJiMmI1fS52W2RhdGEtY2xhc3M9dl0gLnZidG46aG92ZXJ7Y29sb3I6IzY2YjFmZjtib3JkZXItY29sb3I6IzY2YjFmZn0udltkYXRhLWNsYXNzPXZdIGE6aG92ZXJ7Y29sb3I6I2Q3MTkxYX0udltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJkIC52Y29udGVudC5leHBhbmQ6OmJlZm9yZXtiYWNrZ3JvdW5kOi13ZWJraXQtZ3JhZGllbnQobGluZWFyLCBsZWZ0IHRvcCwgbGVmdCBib3R0b20sIGZyb20ocmdiYSgwLCAwLCAwLCAwLjMpKSwgdG8ocmdiYSgwLCAwLCAwLCAwLjcpKSk7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCByZ2JhKDAsIDAsIDAsIDAuMyksIHJnYmEoMCwgMCwgMCwgMC43KSl9LnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmNvbnRlbnQuZXhwYW5kOjphZnRlcntiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjcpfX0nLCAiIl0pLCBlLmV4cG9ydHMgPSB0OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgZnVuY3Rpb24gcihlLCB0KSB7CiAgICAgIHZhciBuID0gZVsxXSB8fCAiIiwKICAgICAgICAgIHIgPSBlWzNdOwogICAgICBpZiAoIXIpIHJldHVybiBuOwoKICAgICAgaWYgKHQgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgYnRvYSkgewogICAgICAgIHZhciBvID0gaShyKTsKICAgICAgICByZXR1cm4gW25dLmNvbmNhdChyLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gIi8qIyBzb3VyY2VVUkw9Ii5jb25jYXQoci5zb3VyY2VSb290IHx8ICIiKS5jb25jYXQoZSwgIiAqLyIpOwogICAgICAgIH0pKS5jb25jYXQoW29dKS5qb2luKCJcbiIpOwogICAgICB9CgogICAgICByZXR1cm4gW25dLmpvaW4oIlxuIik7CiAgICB9CgogICAgZnVuY3Rpb24gaShlKSB7CiAgICAgIHJldHVybiAiLyojICIuY29uY2F0KCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShlKSkpKSksICIgKi8iKTsKICAgIH0KCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IFtdOwogICAgICByZXR1cm4gdC50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHZhciBuID0gcih0LCBlKTsKICAgICAgICAgIHJldHVybiB0WzJdID8gIkBtZWRpYSAiLmNvbmNhdCh0WzJdLCAiIHsiKS5jb25jYXQobiwgIn0iKSA6IG47CiAgICAgICAgfSkuam9pbigiIik7CiAgICAgIH0sIHQuaSA9IGZ1bmN0aW9uIChlLCBuLCByKSB7CiAgICAgICAgInN0cmluZyIgPT0gdHlwZW9mIGUgJiYgKGUgPSBbW251bGwsIGUsICIiXV0pOwogICAgICAgIHZhciBpID0ge307CiAgICAgICAgaWYgKHIpIGZvciAodmFyIG8gPSAwOyBvIDwgdGhpcy5sZW5ndGg7IG8rKykgewogICAgICAgICAgdmFyIGEgPSB0aGlzW29dWzBdOwogICAgICAgICAgbnVsbCAhPSBhICYmIChpW2FdID0gITApOwogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgdSA9IDA7IHUgPCBlLmxlbmd0aDsgdSsrKSB7CiAgICAgICAgICB2YXIgcyA9IFtdLmNvbmNhdChlW3VdKTsKICAgICAgICAgIHIgJiYgaVtzWzBdXSB8fCAobiAmJiAoc1syXSA/IHNbMl0gPSAiIi5jb25jYXQobiwgIiBhbmQgIikuY29uY2F0KHNbMl0pIDogc1syXSA9IG4pLCB0LnB1c2gocykpOwogICAgICAgIH0KICAgICAgfSwgdDsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgIGZ1bmN0aW9uIHIoZSwgdCkgewogICAgICBmb3IgKHZhciBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspIHsKICAgICAgICB2YXIgciA9IGVbbl0sCiAgICAgICAgICAgIGkgPSBoW3IuaWRdOwoKICAgICAgICBpZiAoaSkgewogICAgICAgICAgaS5yZWZzKys7CgogICAgICAgICAgZm9yICh2YXIgbyA9IDA7IG8gPCBpLnBhcnRzLmxlbmd0aDsgbysrKSBpLnBhcnRzW29dKHIucGFydHNbb10pOwoKICAgICAgICAgIGZvciAoOyBvIDwgci5wYXJ0cy5sZW5ndGg7IG8rKykgaS5wYXJ0cy5wdXNoKGMoci5wYXJ0c1tvXSwgdCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmb3IgKHZhciBhID0gW10sIG8gPSAwOyBvIDwgci5wYXJ0cy5sZW5ndGg7IG8rKykgYS5wdXNoKGMoci5wYXJ0c1tvXSwgdCkpOwoKICAgICAgICAgIGhbci5pZF0gPSB7CiAgICAgICAgICAgIGlkOiByLmlkLAogICAgICAgICAgICByZWZzOiAxLAogICAgICAgICAgICBwYXJ0czogYQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBpKGUsIHQpIHsKICAgICAgZm9yICh2YXIgbiA9IFtdLCByID0ge30sIGkgPSAwOyBpIDwgZS5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBvID0gZVtpXSwKICAgICAgICAgICAgYSA9IHQuYmFzZSA/IG9bMF0gKyB0LmJhc2UgOiBvWzBdLAogICAgICAgICAgICB1ID0gb1sxXSwKICAgICAgICAgICAgcyA9IG9bMl0sCiAgICAgICAgICAgIGwgPSBvWzNdLAogICAgICAgICAgICBjID0gewogICAgICAgICAgY3NzOiB1LAogICAgICAgICAgbWVkaWE6IHMsCiAgICAgICAgICBzb3VyY2VNYXA6IGwKICAgICAgICB9OwogICAgICAgIHJbYV0gPyByW2FdLnBhcnRzLnB1c2goYykgOiBuLnB1c2goclthXSA9IHsKICAgICAgICAgIGlkOiBhLAogICAgICAgICAgcGFydHM6IFtjXQogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KCiAgICBmdW5jdGlvbiBvKGUsIHQpIHsKICAgICAgdmFyIG4gPSBnKGUuaW5zZXJ0SW50byk7CiAgICAgIGlmICghbikgdGhyb3cgbmV3IEVycm9yKCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydEludG8nIHBhcmFtZXRlciBpcyBpbnZhbGlkLiIpOwogICAgICB2YXIgciA9IGJbYi5sZW5ndGggLSAxXTsKICAgICAgaWYgKCJ0b3AiID09PSBlLmluc2VydEF0KSByID8gci5uZXh0U2libGluZyA/IG4uaW5zZXJ0QmVmb3JlKHQsIHIubmV4dFNpYmxpbmcpIDogbi5hcHBlbmRDaGlsZCh0KSA6IG4uaW5zZXJ0QmVmb3JlKHQsIG4uZmlyc3RDaGlsZCksIGIucHVzaCh0KTtlbHNlIHsKICAgICAgICBpZiAoImJvdHRvbSIgIT09IGUuaW5zZXJ0QXQpIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcuIE11c3QgYmUgJ3RvcCcgb3IgJ2JvdHRvbScuIik7CiAgICAgICAgbi5hcHBlbmRDaGlsZCh0KTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGEoZSkgewogICAgICBpZiAobnVsbCA9PT0gZS5wYXJlbnROb2RlKSByZXR1cm4gITE7CiAgICAgIGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKTsKICAgICAgdmFyIHQgPSBiLmluZGV4T2YoZSk7CiAgICAgIHQgPj0gMCAmJiBiLnNwbGljZSh0LCAxKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1KGUpIHsKICAgICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpOwogICAgICByZXR1cm4gZS5hdHRycy50eXBlID0gInRleHQvY3NzIiwgbCh0LCBlLmF0dHJzKSwgbyhlLCB0KSwgdDsKICAgIH0KCiAgICBmdW5jdGlvbiBzKGUpIHsKICAgICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIik7CiAgICAgIHJldHVybiBlLmF0dHJzLnR5cGUgPSAidGV4dC9jc3MiLCBlLmF0dHJzLnJlbCA9ICJzdHlsZXNoZWV0IiwgbCh0LCBlLmF0dHJzKSwgbyhlLCB0KSwgdDsKICAgIH0KCiAgICBmdW5jdGlvbiBsKGUsIHQpIHsKICAgICAgT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbiAobikgewogICAgICAgIGUuc2V0QXR0cmlidXRlKG4sIHRbbl0pOwogICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBjKGUsIHQpIHsKICAgICAgdmFyIG4sIHIsIGksIG87CgogICAgICBpZiAodC50cmFuc2Zvcm0gJiYgZS5jc3MpIHsKICAgICAgICBpZiAoIShvID0gdC50cmFuc2Zvcm0oZS5jc3MpKSkgcmV0dXJuIGZ1bmN0aW9uICgpIHt9OwogICAgICAgIGUuY3NzID0gbzsKICAgICAgfQoKICAgICAgaWYgKHQuc2luZ2xldG9uKSB7CiAgICAgICAgdmFyIGwgPSB5Kys7CiAgICAgICAgbiA9IG0gfHwgKG0gPSB1KHQpKSwgciA9IGYuYmluZChudWxsLCBuLCBsLCAhMSksIGkgPSBmLmJpbmQobnVsbCwgbiwgbCwgITApOwogICAgICB9IGVsc2UgZS5zb3VyY2VNYXAgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgVVJMICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIFVSTC5jcmVhdGVPYmplY3RVUkwgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBCbG9iICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIGJ0b2EgPyAobiA9IHModCksIHIgPSBkLmJpbmQobnVsbCwgbiwgdCksIGkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgYShuKSwgbi5ocmVmICYmIFVSTC5yZXZva2VPYmplY3RVUkwobi5ocmVmKTsKICAgICAgfSkgOiAobiA9IHUodCksIHIgPSBwLmJpbmQobnVsbCwgbiksIGkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgYShuKTsKICAgICAgfSk7CgogICAgICByZXR1cm4gcihlKSwgZnVuY3Rpb24gKHQpIHsKICAgICAgICBpZiAodCkgewogICAgICAgICAgaWYgKHQuY3NzID09PSBlLmNzcyAmJiB0Lm1lZGlhID09PSBlLm1lZGlhICYmIHQuc291cmNlTWFwID09PSBlLnNvdXJjZU1hcCkgcmV0dXJuOwogICAgICAgICAgcihlID0gdCk7CiAgICAgICAgfSBlbHNlIGkoKTsKICAgICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiBmKGUsIHQsIG4sIHIpIHsKICAgICAgdmFyIGkgPSBuID8gIiIgOiByLmNzczsKICAgICAgaWYgKGUuc3R5bGVTaGVldCkgZS5zdHlsZVNoZWV0LmNzc1RleHQgPSB4KHQsIGkpO2Vsc2UgewogICAgICAgIHZhciBvID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaSksCiAgICAgICAgICAgIGEgPSBlLmNoaWxkTm9kZXM7CiAgICAgICAgYVt0XSAmJiBlLnJlbW92ZUNoaWxkKGFbdF0pLCBhLmxlbmd0aCA/IGUuaW5zZXJ0QmVmb3JlKG8sIGFbdF0pIDogZS5hcHBlbmRDaGlsZChvKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHAoZSwgdCkgewogICAgICB2YXIgbiA9IHQuY3NzLAogICAgICAgICAgciA9IHQubWVkaWE7CiAgICAgIGlmIChyICYmIGUuc2V0QXR0cmlidXRlKCJtZWRpYSIsIHIpLCBlLnN0eWxlU2hlZXQpIGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gbjtlbHNlIHsKICAgICAgICBmb3IgKDsgZS5maXJzdENoaWxkOykgZS5yZW1vdmVDaGlsZChlLmZpcnN0Q2hpbGQpOwoKICAgICAgICBlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG4pKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGQoZSwgdCwgbikgewogICAgICB2YXIgciA9IG4uY3NzLAogICAgICAgICAgaSA9IG4uc291cmNlTWFwLAogICAgICAgICAgbyA9IHZvaWQgMCA9PT0gdC5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgJiYgaTsKICAgICAgKHQuY29udmVydFRvQWJzb2x1dGVVcmxzIHx8IG8pICYmIChyID0gRChyKSksIGkgJiYgKHIgKz0gIlxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoaSkpKSkgKyAiICovIik7CiAgICAgIHZhciBhID0gbmV3IEJsb2IoW3JdLCB7CiAgICAgICAgdHlwZTogInRleHQvY3NzIgogICAgICB9KSwKICAgICAgICAgIHUgPSBlLmhyZWY7CiAgICAgIGUuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYSksIHUgJiYgVVJMLnJldm9rZU9iamVjdFVSTCh1KTsKICAgIH0KCiAgICB2YXIgaCA9IHt9LAogICAgICAgIHYgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdDsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0ICYmICh0ID0gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSwgdDsKICAgICAgfTsKICAgIH0oZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gd2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2I7CiAgICB9KSwKICAgICAgICBnID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSB7fTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChuKSB7CiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdFtuXSAmJiAodFtuXSA9IGUuY2FsbCh0aGlzLCBuKSksIHRbbl07CiAgICAgIH07CiAgICB9KGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGUpOwogICAgfSksCiAgICAgICAgbSA9IG51bGwsCiAgICAgICAgeSA9IDAsCiAgICAgICAgYiA9IFtdLAogICAgICAgIEQgPSBuKDEwNyk7CgogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBERUJVRyAmJiBERUJVRyAmJiAib2JqZWN0IiAhPSB0eXBlb2YgZG9jdW1lbnQpIHRocm93IG5ldyBFcnJvcigiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50Iik7CiAgICAgIHQgPSB0IHx8IHt9LCB0LmF0dHJzID0gIm9iamVjdCIgPT0gdHlwZW9mIHQuYXR0cnMgPyB0LmF0dHJzIDoge30sIHQuc2luZ2xldG9uIHx8ICh0LnNpbmdsZXRvbiA9IHYoKSksIHQuaW5zZXJ0SW50byB8fCAodC5pbnNlcnRJbnRvID0gImhlYWQiKSwgdC5pbnNlcnRBdCB8fCAodC5pbnNlcnRBdCA9ICJib3R0b20iKTsKICAgICAgdmFyIG4gPSBpKGUsIHQpOwogICAgICByZXR1cm4gcihuLCB0KSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICBmb3IgKHZhciBvID0gW10sIGEgPSAwOyBhIDwgbi5sZW5ndGg7IGErKykgewogICAgICAgICAgdmFyIHUgPSBuW2FdLAogICAgICAgICAgICAgIHMgPSBoW3UuaWRdOwogICAgICAgICAgcy5yZWZzLS0sIG8ucHVzaChzKTsKICAgICAgICB9CgogICAgICAgIGlmIChlKSB7CiAgICAgICAgICByKGkoZSwgdCksIHQpOwogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBvLmxlbmd0aDsgYSsrKSB7CiAgICAgICAgICB2YXIgcyA9IG9bYV07CgogICAgICAgICAgaWYgKDAgPT09IHMucmVmcykgewogICAgICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IHMucGFydHMubGVuZ3RoOyBsKyspIHMucGFydHNbbF0oKTsKCiAgICAgICAgICAgIGRlbGV0ZSBoW3MuaWRdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgIH07CgogICAgdmFyIHggPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0gW107CiAgICAgIHJldHVybiBmdW5jdGlvbiAodCwgbikgewogICAgICAgIHJldHVybiBlW3RdID0gbiwgZS5maWx0ZXIoQm9vbGVhbikuam9pbigiXG4iKTsKICAgICAgfTsKICAgIH0oKTsKICB9LCBmdW5jdGlvbiAoZSwgdCkgewogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygd2luZG93ICYmIHdpbmRvdy5sb2NhdGlvbjsKICAgICAgaWYgKCF0KSB0aHJvdyBuZXcgRXJyb3IoImZpeFVybHMgcmVxdWlyZXMgd2luZG93LmxvY2F0aW9uIik7CiAgICAgIGlmICghZSB8fCAic3RyaW5nIiAhPSB0eXBlb2YgZSkgcmV0dXJuIGU7CiAgICAgIHZhciBuID0gdC5wcm90b2NvbCArICIvLyIgKyB0Lmhvc3QsCiAgICAgICAgICByID0gbiArIHQucGF0aG5hbWUucmVwbGFjZSgvXC9bXlwvXSokLywgIi8iKTsKICAgICAgcmV0dXJuIGUucmVwbGFjZSgvdXJsXHMqXCgoKD86W14pKF18XCgoPzpbXikoXSt8XChbXikoXSpcKSkqXCkpKilcKS9naSwgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICB2YXIgaSA9IHQudHJpbSgpLnJlcGxhY2UoL14iKC4qKSIkLywgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHJldHVybiB0OwogICAgICAgIH0pLnJlcGxhY2UoL14nKC4qKSckLywgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHJldHVybiB0OwogICAgICAgIH0pOwogICAgICAgIGlmICgvXigjfGRhdGE6fGh0dHA6XC9cL3xodHRwczpcL1wvfGZpbGU6XC9cL1wvKS9pLnRlc3QoaSkpIHJldHVybiBlOwogICAgICAgIHZhciBvOwogICAgICAgIHJldHVybiBvID0gMCA9PT0gaS5pbmRleE9mKCIvLyIpID8gaSA6IDAgPT09IGkuaW5kZXhPZigiLyIpID8gbiArIGkgOiByICsgaS5yZXBsYWNlKC9eXC5cLy8sICIiKSwgInVybCgiICsgSlNPTi5zdHJpbmdpZnkobykgKyAiKSI7CiAgICAgIH0pOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgbigxMDMpLCBlLmV4cG9ydHMgPSBuKDM0KTsKICB9XSk7Cn0pOw=="},null]}